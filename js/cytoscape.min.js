
/* cytoscape.min.js */

/**
 * This file is part of cytoscape.js 2.0.0beta2-github-snapshot-2013.03.19-11.55.17.
 * 
 * Cytoscape.js is free software: you can redistribute it and/or modify it
 * under the terms of the GNU Lesser General Public License as published by the Free
 * Software Foundation, either version 3 of the License, or (at your option) any
 * later version.
 * 
 * Cytoscape.js is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more
 * details.
 * 
 * You should have received a copy of the GNU Lesser General Public License along with
 * cytoscape.js. If not, see <http://www.gnu.org/licenses/>.
 */
 
var cytoscape;(function(){var a=cytoscape=function(){return cytoscape.init.apply(cytoscape,arguments)};a.init=function(b){if(b===undefined){b={}}if(a.is.plainObject(b)){return new a.Core(b)}else{if(a.is.string(b)){return a.extension.apply(a.extension,arguments)}}};a.fn={};if(typeof exports!=="undefined"){exports=module.exports=cytoscape}window.cytoscape=cytoscape})();(function(a){a.is={string:function(b){return b!=null&&typeof b==typeof""},fn:function(b){return b!=null&&typeof b===typeof function(){}
},array:function(b){return b!=null&&b instanceof Array},plainObject:function(b){return b!=null&&typeof b===typeof{}&&!a.is.array(b)&&b.constructor===Object},number:function(b){return b!=null&&typeof b===typeof 1&&!isNaN(b)},integer:function(b){return a.is.number(b)&&Math.floor(b)===b},color:function(b){return b!=null&&typeof b===typeof""&&$.Color(b).toString()!==""},bool:function(b){return b!=null&&typeof b===typeof true},elementOrCollection:function(b){return a.is.element(b)||a.is.collection(b)},element:function(b){return b instanceof a.Element&&b._private.single
},collection:function(b){return b instanceof a.Collection&&!b._private.single},core:function(b){return b instanceof a.Core},style:function(b){return b instanceof a.Style},stylesheet:function(b){return b instanceof a.Stylesheet},event:function(b){return b instanceof a.Event},emptyString:function(b){if(!b){return true}else{if(a.is.string(b)){if(b===""||b.match(/^\s+$/)){return true}}}return false},nonemptyString:function(b){if(b&&a.is.string(b)&&b!==""&&!b.match(/^\s+$/)){return true}return false},domElement:function(b){if(typeof HTMLElement==="undefined"){return false
}else{return b instanceof HTMLElement}}}})(cytoscape);(function(a){a.util={extend:function(){var l,d,b,c,h,j,g=arguments[0]||{},f=1,e=arguments.length,k=false;if(typeof g==="boolean"){k=g;g=arguments[1]||{};f=2}if(typeof g!=="object"&&!a.is.fn(g)){g={}}if(e===f){g=this;--f}for(;f<e;f++){if((l=arguments[f])!=null){for(d in l){b=g[d];c=l[d];if(g===c){continue}if(k&&c&&(a.is.plainObject(c)||(h=a.is.array(c)))){if(h){h=false;j=b&&a.is.array(b)?b:[]}else{j=b&&a.is.plainObject(b)?b:{}}g[d]=a.util.extend(k,j,c)
}else{if(c!==undefined){g[d]=c}}}}}return g},error:function(b){if(console){if(console.error){console.error(b)}else{if(console.log){console.log(b)}else{throw b}}}else{throw b}},clone:function(d){var c={};for(var b in d){if(d.hasOwnProperty(b)){c[b]=d[b]}}return c},copy:function(b){if(b==null){return b}if(a.is.array(b)){return b.slice()}else{if(a.is.plainObject(b)){return a.util.clone(b)}else{return b}}},mapEmpty:function(d){var c=true;if(d!=null){for(var b in d){c=false;break}}return c},pushMap:function(b){var c=a.util.getMap(b);
if(c==null){a.util.setMap($.extend({},b,{value:[b.value]}))}else{c.push(b.value)}},setMap:function(c){var g=c.map;var e;var f=c.keys;var b=f.length;for(var d=0;d<b;d++){var e=f[d];if(a.is.plainObject(e)){a.util.error("Tried to set map with object key")}if(d<f.length-1){if(g[e]==null){g[e]={}}g=g[e]}else{g[e]=c.value}}},getMap:function(c){var g=c.map;var f=c.keys;var b=f.length;for(var e=0;e<b;e++){var d=f[e];if(a.is.plainObject(d)){a.util.error("Tried to get map with object key")}g=g[d];if(g==null){return g
}}return g},deleteMap:function(k){var e=k.map;var j=k.keys;var d=j.length;var c=k.keepChildren;for(var f=0;f<d;f++){var g=j[f];if(a.is.plainObject(g)){a.util.error("Tried to delete map with object key")}var h=f===k.keys.length-1;if(h){if(c){for(var b in e){if(!c[b]){delete e[b]}}}else{delete e[g]}}else{e=e[g]}}},capitalize:function(b){if(a.is.emptyString(b)){return b}return b.charAt(0).toUpperCase()+b.substring(1)},camel2dash:function(h){var e=[];for(var f=0;f<h.length;f++){var g=h[f];var b=g.toLowerCase();
var d=g!==b;if(d){e.push("-");e.push(b)}else{e.push(g)}}var c=e.length===h.length;if(c){return h}return e.join("")},dash2camel:function(f){var b=[];var e=false;for(var c=0;c<f.length;c++){var d=f[c];var g=d==="-";if(g){e=true}else{if(e){b.push(d.toUpperCase())}else{b.push(d)}e=false}}return b.join("")},trim:function(d){var c,b;for(c=0;c<d.length&&d[c]===" ";c++){}for(b=d.length-1;b>c&&d[b]===" ";b--){}return d.substring(c,b+1)},hex2tuple:function(h){if(!(h.length===4||h.length===7)||h[0]!=="#"){return
}var f=h.length===4;var e,d,c;var i=16;if(f){e=parseInt(h[1]+h[1],i);d=parseInt(h[2]+h[2],i);c=parseInt(h[3]+h[3],i)}else{e=parseInt(h[1]+h[2],i);d=parseInt(h[3]+h[4],i);c=parseInt(h[5]+h[6],i)}return[e,d,c]},hsl2tuple:function(w){var t;var k=a.util.regex.number;var n,x,j,v,c,o,u;var i=new RegExp("^"+a.util.regex.hsla+"$").exec(w);if(i){n=parseInt(i[1]);if(n<0){n=(360-(-1*n%360))%360}else{if(n>360){n=n%360}}n/=360;x=parseFloat(i[2]);if(x<0||x>100){return}x=x/100;j=parseFloat(i[3]);if(j<0||j>100){return
}j=j/100;v=i[4];if(v!==undefined){v=parseFloat(v);if(v<0||v>1){return}}if(x===0){c=o=u=Math.round(j*255)}else{function f(h,g,b){if(b<0){b+=1}if(b>1){b-=1}if(b<1/6){return h+(g-h)*6*b}if(b<1/2){return g}if(b<2/3){return h+(g-h)*(2/3-b)*6}return h}var d=j<0.5?j*(1+x):j+x-j*x;var e=2*j-d;c=Math.round(255*f(e,d,n+1/3));o=Math.round(255*f(e,d,n));u=Math.round(255*f(e,d,n-1/3))}t=[c,o,u,v]}return t},rgb2tuple:function(k){var h;var d=a.util.regex.number;var b=new RegExp("^"+a.util.regex.rgba+"$").exec(k);
if(b){h=[];var l=[];for(var e=1;e<=3;e++){var g=b[e];if(g[g.length-1]==="%"){l[e]=true}g=parseFloat(g);if(l[e]){g=g/100*255}if(g<0||g>255){return}h.push(Math.floor(g))}var f=l[1]||l[2]||l[3];var j=l[1]&&l[2]&&l[3];if(f&&!j){return}var c=b[4];if(c!==undefined){c=parseFloat(c);if(c<0||c>1){return}h.push(c)}}return h},colorname2tuple:function(b){return a.util.colors[b.toLowerCase()]},color2tuple:function(b){return a.util.colorname2tuple(b)||a.util.hex2tuple(b)||a.util.rgb2tuple(b)||a.util.hsl2tuple(b)
},tuple2hex:function(d){var f=d[0];var e=d[1];var c=d[2];function h(b){var g=b.toString(16);if(g.length===1){g="0"+g}return g}return"#"+h(f)+h(e)+h(c)},colors:{transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}};
a.util.regex={};a.util.regex.number="(?:\\d*\\.\\d+|\\d+|\\d*\\.\\d+[eE]\\d+)";a.util.regex.rgba="rgb[a]?\\(("+a.util.regex.number+"[%]?)\\s*,\\s*("+a.util.regex.number+"[%]?)\\s*,\\s*("+a.util.regex.number+"[%]?)(?:\\s*,\\s*("+a.util.regex.number+"))?\\)";a.util.regex.rgbaNoBackRefs="rgb[a]?\\((?:"+a.util.regex.number+"[%]?)\\s*,\\s*(?:"+a.util.regex.number+"[%]?)\\s*,\\s*(?:"+a.util.regex.number+"[%]?)(?:\\s*,\\s*(?:"+a.util.regex.number+"))?\\)";a.util.regex.hsla="hsl[a]?\\(("+a.util.regex.number+")\\s*,\\s*("+a.util.regex.number+"[%])\\s*,\\s*("+a.util.regex.number+"[%])(?:\\s*,\\s*("+a.util.regex.number+"))?\\)";
a.util.regex.hslaNoBackRefs="hsl[a]?\\((?:"+a.util.regex.number+")\\s*,\\s*(?:"+a.util.regex.number+"[%])\\s*,\\s*(?:"+a.util.regex.number+"[%])(?:\\s*,\\s*(?:"+a.util.regex.number+"))?\\)";a.util.regex.hex3="\\#[0-9a-fA-F]{3}";a.util.regex.hex6="\\#[0-9a-fA-F]{6}"})(cytoscape);(function(b){b.math={};b.math.boxInBezierVicinity=function(n,j,v,k,p,i,o,h,l,f,m){var w=Math.min(n,v)-m;var t=Math.min(j,k)-m;var u=Math.max(n,v)+m;var s=Math.max(j,k)+m;if(p>=w&&p<=u&&i>=t&&i<=s){return 2}else{if(l>=w&&l<=u&&f>=t&&f<=s){return 2
}else{if(o>=w&&o<=u&&h>=t&&h<=s){return 1}}}var g=Math.min(p,o,l);var e=Math.min(i,h,f);var d=Math.max(p,o,l);var c=Math.max(i,h,f);if(g>u||d<w||e>s||c<t){return 0}return 1};b.math.checkStraightEdgeCrossesBox=function(s,k,z,n,u,g,t,d,p){var A=Math.min(s,z)-p;var x=Math.min(k,n)-p;var y=Math.max(s,z)+p;var w=Math.max(k,n)+p;var h=t-u;var m=u;var v;var e=d-g;var l=g;var o;if(Math.abs(h)<0.0001){return(u>=A&&u<=y&&Math.min(g,d)<=x&&Math.max(g,d)>=w)}var c=(A-m)/h;if(c>0&&c<=1){v=e*c+l;if(v>=x&&v<=w){return true
}}var j=(y-m)/h;if(j>0&&j<=1){v=e*j+l;if(v>=x&&v<=w){return true}}var f=(x-l)/e;if(f>0&&f<=1){o=h*f+m;if(o>=A&&o<=y){return true}}var i=(w-l)/e;if(i>0&&i<=1){o=h*i+m;if(o>=A&&o<=y){return true}}return false};b.math.checkBezierCrossesBox=function(x,h,K,z,p,T,l,Q,j,N,d){var t=Math.min(x,K)-d;var o=Math.min(h,z)-d;var S=Math.max(x,K)+d;var P=Math.max(h,z)+d;if(p>=t&&p<=S&&T>=o&&T<=P){return true}else{if(j>=t&&j<=S&&N>=o&&N<=P){return true}}var w=p-2*l+j;var g=-2*p+2*l;var G=p;var A=[];if(Math.abs(w)<0.0001){var L=(t-p)/g;
var y=(S-p)/g;A.push(L,y)}else{var D=g*g-4*w*(G-t);var u,s;if(D>0){var E=Math.sqrt(D);u=(-g+E)/(2*w);s=(-g-E)/(2*w);A.push(u,s)}var C=g*g-4*w*(G-S);var n,k;if(C>0){var E=Math.sqrt(C);n=(-g+E)/(2*w);k=(-g-E)/(2*w);A.push(n,k)}}A.sort(function(V,U){return V-U});var v=T-2*Q+N;var e=-2*T+2*Q;var F=T;var J=[];if(Math.abs(v)<0.0001){var f=(o-T)/e;var H=(P-T)/e;J.push(f,H)}else{var m=e*e-4*v*(F-o);var c,R;if(m>0){var E=Math.sqrt(m);c=(-e+E)/(2*v);R=(-e-E)/(2*v);J.push(c,R)}var i=e*e-4*v*(F-P);var O,M;if(i>0){var E=Math.sqrt(i);
O=(-e+E)/(2*v);M=(-e-E)/(2*v);J.push(O,M)}}J.sort(function(V,U){return V-U});for(var B=0;B<A.length;B+=2){for(var I=1;I<J.length;I+=2){if(A[B]<J[I]&&J[I]>=0&&A[B]<=1&&A[B+1]>J[I-1]&&J[I-1]<=1&&A[B+1]>=0){return true}}}return false};b.math.inBezierVicinity=function(i,h,u,e,t,d,s,c,B){var k=0.25*u+0.5*t+0.25*s;var j=0.25*e+0.5*d+0.25*c;var n,m,z,v;var g,f,l;var A=function(D,J,E,C,I,H,F,G){g=(H-C)*(D-E)+(E-I)*(J-C);f=g*g;sideSquared=(H-C)*(H-C)+(E-I)*(E-I);if(G){if(g>0){return false}}else{if(g<0){return false
}}return(f/sideSquared>F)};var p=(k+t)/2;var o=(j+d)/2;var w=true;if(A(p,o,u,e,t,d,0,w)){w=!w}return(!A(i,h,u,e,t,d,B,w)&&!A(i,h,t,d,s,c,B,w)&&!A(i,h,s,c,u,e,B,w))};b.math.solveCubic=function(n,m,l,k,u){m/=n;l/=n;k/=n;var f,g,e,i,p,o,h,j;g=(3*l-(m*m))/9;e=-(27*k)+m*(9*l-2*(m*m));e/=54;f=g*g*g+e*e;u[1]=0;h=(m/3);if(f>0){p=e+Math.sqrt(f);p=((p<0)?-Math.pow(-p,(1/3)):Math.pow(p,(1/3)));o=e-Math.sqrt(f);o=((o<0)?-Math.pow(-o,(1/3)):Math.pow(o,(1/3)));u[0]=-h+p+o;h+=(p+o)/2;u[4]=u[2]=-h;h=Math.sqrt(3)*(-o+p)/2;
u[3]=h;u[5]=-h;return}u[5]=u[3]=0;if(f==0){j=((e<0)?-Math.pow(-e,(1/3)):Math.pow(e,(1/3)));u[0]=-h+2*j;u[4]=u[2]=-(j+h);return}g=-g;i=g*g*g;i=Math.acos(e/Math.sqrt(i));j=2*Math.sqrt(g);u[0]=-h+j*Math.cos(i/3);u[2]=-h+j*Math.cos((i+2*Math.PI)/3);u[4]=-h+j*Math.cos((i+4*Math.PI)/3);return};b.math.sqDistanceToQuadraticBezier=function(p,o,w,j,v,h,u,g){var E=1*w*w-4*w*v+2*w*u+4*v*v-4*v*u+u*u+j*j-4*j*h+2*j*g+4*h*h-4*h*g+g*g;var D=1*9*w*v-3*w*w-3*w*u-6*v*v+3*v*u+9*j*h-3*j*j-3*j*g-6*h*h+3*h*g;var B=1*3*w*w-6*w*v+w*u-w*p+2*v*v+2*v*p-u*p+3*j*j-6*j*h+j*g-j*o+2*h*h+2*h*o-g*o;
var A=1*w*v-w*w+w*p-v*p+j*h-j*j+j*o-h*o;a("coefficients: "+E/E+", "+D/E+", "+B/E+", "+A/E);var k=[];this.solveCubic(E,D,B,A,k);var e=1e-7;var C=[];for(var l=0;l<6;l+=2){if(Math.abs(k[l+1])<e&&k[l]>=0&&k[l]<=1){C.push(k[l])}}C.push(1);C.push(0);var f=-1;var z;var n,m,s;for(var t=0;t<C.length;t++){n=Math.pow(1-C[t],2)*w+2*(1-C[t])*C[t]*v+C[t]*C[t]*u;m=Math.pow(1-C[t],2)*j+2*(1-C[t])*C[t]*h+C[t]*C[t]*g;s=Math.pow(n-p,2)+Math.pow(m-o,2);a("distance for param "+C[t]+": "+Math.sqrt(s));if(f>=0){if(s<f){f=s;
z=C[t]}}else{f=s;z=C[t]}}a("given: ( "+p+", "+o+"), ( "+w+", "+j+"), ( "+v+", "+h+"), ( "+u+", "+g+")");a("roots: "+k);a("params: "+C);a("closest param: "+z);return f};var a=function(c){if(false){console.log(c)}}})(cytoscape);(function(a){a.instances=[];a.instanceCounter=0;a.lastInstanceTime;a.registerInstance=function(b,f){var h;if(a.is.core(b)){h=b}else{if(a.is.domElement(b)){f=b}}var e=+new Date;var d;if(!a.lastInstanceTime||a.lastInstanceTime===e){a.instanceCounter=0}else{++a.instanceCounter}a.lastInstanceTime=e;
d=a.instanceCounter;var g="cy-"+e+"-"+d;var c={id:g,cy:h,domElement:f,readies:[]};a.instances.push(c);a.instances[g]=c;return c};a.getRegistrationForInstance=function(b,e){var g;if(a.is.core(b)){if(b.registered()){g=b}}else{if(a.is.domElement(b)){e=b}}if(a.is.core(g)){var f=g.instanceId();return a.instances[f]}else{if(a.is.domElement(e)){for(var c=a.instances.length-1;c>=0;c--){var d=a.instances[c];if(d.domElement===e){return d}}}}}})(cytoscape);(function(c){var f={};c.extensions=f;var d={};c.modules=d;
function b(j,i,k){var h={};h[i]=k;switch(j){case"core":case"collection":c.fn[j](h)}return c.util.setMap({map:f,keys:[j,i],value:k})}function g(i,h){return c.util.getMap({map:f,keys:[i,h]})}function e(k,i,j,h,l){return c.util.setMap({map:d,keys:[k,i,j,h],value:l})}function a(k,i,j,h){return c.util.getMap({map:d,keys:[k,i,j,h]})}c.extension=function(){if(arguments.length==2){return g.apply(this,arguments)}else{if(arguments.length==3){return b.apply(this,arguments)}else{if(arguments.length==4){return a.apply(this,arguments)
}else{if(arguments.length==5){return e.apply(this,arguments)}else{$.error("Invalid extension access syntax")}}}}}})(cytoscape);(function(b,a){if(!b){return}b.fn.cytoscape=function(h){var k=b(this);if(h==="get"){var g=a.getRegistrationForInstance(k[0]);return g.cy}else{if(a.is.fn(h)){var f=h;var c=k[0];var g=a.getRegistrationForInstance(c);if(!g){g=a.registerInstance(c)}if(g&&g.cy&&g.cy.ready()){g.cy.trigger("ready",[],f)}else{g.readies.push(f)}}else{if(a.is.plainObject(h)){return k.each(function(){var i=b.extend({},h,{container:b(this)[0]});
cytoscape(i)})}else{var c=k[0];var j=[];var d=[];for(var e=1;e<arguments.length;e++){d[e-1]=arguments[e]}k.each(function(){var l=a.getRegistrationForInstance(c);var n=l.cy;var m=h;if(n&&a.is.fn(n[m])){var i=n[m].apply(n,d);j.push(i)}});if(j.length===1){j=j[0]}else{if(j.length==0){j=b(this)}}return j}}}};b.cytoscape=cytoscape;if(b.fn.cy==null&&b.cy==null){b.fn.cy=b.fn.cytoscape;b.cy=b.cytoscape}})(typeof jQuery!=="undefined"?jQuery:null,cytoscape);(function(a){a.Event=function(e,d){if(!(this instanceof a.Event)){return new a.Event(e,d)
}if(e&&e.type){this.originalEvent=e;this.type=e.type;this.isDefaultPrevented=(e.defaultPrevented||e.returnValue===false||e.getPreventDefault&&e.getPreventDefault())?c:b}else{this.type=e}if(d){a.util.extend(this,d)}this.timeStamp=e&&e.timeStamp||+new Date};function b(){return false}function c(){return true}a.Event.prototype={preventDefault:function(){this.isDefaultPrevented=c;var d=this.originalEvent;if(!d){return}if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=c;
var d=this.originalEvent;if(!d){return}if(d.stopPropagation){d.stopPropagation()}d.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=c;this.stopPropagation()},isDefaultPrevented:b,isPropagationStopped:b,isImmediatePropagationStopped:b}})(cytoscape);(function(a){a.define={data:function(c){var b={field:"data",bindingEvent:"data",allowBinding:false,allowSetting:false,allowGetting:false,settingEvent:"data",settingTriggersEvent:false,triggerFnName:"trigger",immutableKeys:{},updateMappers:false};
c=a.util.extend({},b,c);return function(e,t){var g=c;var y=this;var f=y.length!==undefined;var u=f?y:[y];var x=f?y[0]:y;if(a.is.string(e)){if(g.allowGetting&&t===undefined){var o;if(x){o=x._private[g.field][e]}return o}else{if(g.allowSetting&&t!==undefined){var d=!g.immutableKeys[e];if(d){for(var n=0,h=u.length;n<h;n++){u[n]._private[g.field][e]=t}if(g.updateMappers){y.updateMappers()}if(g.settingTriggersEvent){y[g.triggerFnName](g.settingEvent)}}}}}else{if(g.allowSetting&&a.is.plainObject(e)){var m=e;
var j,w;for(j in m){w=m[j];var d=!g.immutableKeys[j];if(d){for(var n=0,h=u.length;n<h;n++){u[n]._private[g.field][j]=w}}}if(g.updateMappers){y.updateMappers()}if(g.settingTriggersEvent){y[g.triggerFnName](g.settingEvent)}}else{if(g.allowBinding&&a.is.fn(e)){var s=e;y.bind(g.bindingEvent,s)}else{if(g.allowGetting&&e===undefined){var o;if(x){o=x._private[g.field]}return o}}}}return y}},batchData:function(d){var c={field:"data",event:"data",triggerFnName:"trigger",immutableKeys:{},updateMappers:false};
var b=d=a.util.extend({},c,d);return function(f){var t=this;var h=t.length!==undefined;var w=h?t:t._private.elements;if(w.length===0){return t}var j=h?w[0]._private.cy:t;for(var n=0;n<w.length;n++){var u=w[n];var g=u._private.data.id;var s=f[g];if(s!==undefined&&s!==null){var m=s;var l,o;for(l in m){o=m[l];var e=!b.immutableKeys[l];if(e){u._private[b.field][l]=o}}}}var p=new a.Collection(j,w);if(b.updateMappers){p.updateMappers()}p[b.triggerFnName](b.event);return t}},removeData:function(c){var b={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:false,immutableKeys:{}};
c=a.util.extend({},b,c);return function(o){var g=c;var w=this;var f=w.length!==undefined;var s=f?w:[w];var u=f?w[0]:w;if(a.is.string(o)){var v=o.split(/\s+/);var j=v.length;for(var k=0;k<j;k++){var t=v[k];if(a.is.emptyString(t)){continue}var e=!g.immutableKeys[t];if(e){for(var n=0,h=s.length;n<h;n++){delete s[n]._private[g.field][t]}}}if(g.triggerEvent){w[g.triggerFnName](g.event)}}else{if(o===undefined){for(var n=0,h=s.length;n<h;n++){var m=s[n]._private[g.field];for(var t in m){var d=!g.immutableKeys[t];
if(d){delete m[t]}}}if(g.triggerEvent){w[g.triggerFnName](g.event)}}}return w}},event:{regex:/(\w+)(\.\w+)?/,optionalTypeRegex:/(\w+)?(\.\w+)?/,props:"altKey bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase metaKey offsetX offsetY originalTarget pageX pageY prevValue relatedTarget screenX screenY shiftKey target view which".split(/\s+/),aliases:"mousedown mouseup click mouseover mouseout mousemove touchstart touchmove touchend grab drag free".split(/\s+/),aliasesOn:function(e){var b=a.define.event.aliases;
for(var d=0;d<b.length;d++){var c=b[d];e[c]=function(f,g){if(a.is.fn(g)){this.on(c,f,g)}else{if(a.is.fn(f)){g=f;this.on(c,g)}else{this.trigger(c)}}return this}}},falseCallback:function(){return false}},on:function(c){var b={unbindSelfOnTrigger:false,unbindAllBindersOnTrigger:false};c=a.util.extend({},b,c);return function(e,v,A,k){var s=this;var d=s.length!==undefined;var f=d?s:[s];var y=d?s[0]:s;var x=a.is.string(e);var t=c;if(a.is.plainObject(v)){k=A;A=v;v=undefined}else{if(a.is.fn(v)||v===false){k=v;
A=undefined;v=undefined}}if(a.is.fn(A)||A===false){k=A;A=undefined}if(!(a.is.fn(k)||k===false)&&x){return s}if(x){var z={};z[e]=k;e=z}for(var l in e){k=e[l];if(k===false){k=a.define.event.falseCallback}if(!a.is.fn(k)){continue}l=l.split(/\s+/);for(var w=0;w<l.length;w++){var o=l[w];if(a.is.emptyString(o)){continue}var m=o.match(a.define.event.regex);if(m){var g=m[1];var n=m[2]?m[2]:undefined;var h={callback:k,data:A,delegated:v?true:false,selector:v,type:g,namespace:n,unbindSelfOnTrigger:t.unbindSelfOnTrigger,unbindAllBindersOnTrigger:t.unbindAllBindersOnTrigger,binders:f};
for(var u=0;u<f.length;u++){f[u]._private.listeners.push(h)}}}}return s}},off:function(c){var b={};c=a.util.extend({},b,c);return function(e,A,l){var u=this;var d=u.length!==undefined;var f=d?u:[u];var E=d?u[0]:u;var D=a.is.string(e);var v=c;if(arguments.length===0){for(var B=0;B<f.length;B++){f[B]._private.listeners=[]}return u}if(a.is.fn(A)||A===false){l=A;A=undefined}if(D){var G={};G[e]=l;e=G}for(var m in e){l=e[m];if(l===false){l=a.define.event.falseCallback}m=m.split(/\s+/);for(var C=0;C<m.length;
C++){var t=m[C];if(a.is.emptyString(t)){continue}var n=t.match(a.define.event.optionalTypeRegex);if(n){var g=n[1]?n[1]:undefined;var s=n[2]?n[2]:undefined;for(var B=0;B<f.length;B++){var w=f[B]._private.listeners;for(var z=0;z<w.length;z++){var k=w[z];var o=!s||s===k.namespace;var x=!g||k.type===g;var y=!l||l===k.callback;var F=o&&x&&y;if(F){w.splice(z,1);z--}}}}}}return u}},trigger:function(c){var b={};c=a.util.extend({},b,c);return function(E,g,z){var o=this;var w=o.length!==undefined;var A=w?o:[o];
var F=w?o[0]:o;var K=a.is.string(E);var h=a.is.plainObject(E);var f=a.is.event(E);var S=c;var B=this._private.cy||this;if(K){var M=E.split(/\s+/);E=[];for(var X=0;X<M.length;X++){var H=M[X];if(a.is.emptyString(H)){continue}var n=H.match(a.define.event.regex);var ac=n[1];var N=n[2]?n[2]:undefined;E.push({type:ac,namespace:N})}}else{if(h){var Z=E;E=[Z]}}if(g){if(!a.is.array(g)){g=[g]}}else{g=[]}for(var X=0;X<E.length;X++){var s=E[X];for(var W=0;W<A.length;W++){var L=A[W];var Q=L._private.listeners;
var d=a.is.element(L);var D=d;var H;if(f){H=s;H.cyTarget=H.cyTarget||L;H.cy=H.cy||B;H.namespace=H.namespace||s.namespace}else{H=new a.Event(s,{cyTarget:L,cy:B,namespace:s.namespace});var G=a.define.event.props;for(var V=0;V<G.length;V++){var y=G[V];H[y]=s[y]}}if(z){Q=[{namespace:H.namespace,type:H.type,callback:z}]}for(var V=0;V<Q.length;V++){var e=Q[V];var O=!e.namespace||e.namespace===H.namespace;var x=e.type===H.type;var P=e.delegated?(L!==H.cyTarget&&a.is.element(H.cyTarget)&&H.cyTarget.is(e.selector)):(true);
var I=O&&x&&P;if(I){var R=[H];R=R.concat(g);if(e.data){H.data=e.data}else{H.data=undefined}if(e.unbindSelfOnTrigger||e.unbindAllBindersOnTrigger){Q.splice(V,1);V--}if(e.unbindAllBindersOnTrigger){var v=e.binders;for(var U=0;U<v.length;U++){var u=v[U];if(!u||u===L){continue}var C=u._private.listeners;for(var T=0;T<C.length;T++){var aa=C[T];if(aa===e){C.splice(T,1);T--}}}}var ab=e.delegated?H.cyTarget:L;var J=e.callback.apply(ab,R);if(J===false||H.isPropagationStopped()){D=false;if(J===false){H.stopPropagation();
H.preventDefault()}}}}if(D){var t=L.parent();var Y=t.length!==0;if(Y){t=t[0];t.trigger(H)}else{B.trigger(H)}}}}return o}}}})(cytoscape);(function(a,b){a.Style=function(c){if(!(this instanceof a.Style)){return new a.Style(c)}if(!a.is.core(c)){a.util.error("A style must have a core reference");return}this._private={cy:c,coreStyle:{}};this.length=0;this.addDefaultStylesheet()};a.style=a.Style;a.styfn=a.Style.prototype;a.fn.style=function(c,d){for(var f in c){var e=c[f];a.Style.prototype=e}};a.stylesheet=a.Stylesheet=function(){if(!(this instanceof a.Stylesheet)){return new a.Stylesheet()
}this.length=0};a.Stylesheet.prototype.selector=function(c){var d=this.length++;this[d]={selector:c,properties:[]};return this};a.Stylesheet.prototype.css=function(e,g){var f=this.length-1;if(a.is.string(e)){this[f].properties.push({name:e,value:g})}else{if(a.is.plainObject(e)){map=e;for(var d=0;d<a.style.properties.length;d++){var h=a.style.properties[d];var c=map[h.name];if(c===undefined){c=map[a.util.dash2camel(h.name)]}if(c!==undefined){var e=h.name;var g=c;this[f].properties.push({name:e,value:g})
}}}}return this};a.Stylesheet.prototype.generateStyle=function(l){var h=new a.Style(l);for(var f=0;f<this.length;f++){var e=this[f];var c=e.selector;var g=e.properties;h.selector(c);for(var d=0;d<g.length;d++){var k=g[d];h.css(k.name,k.value)}}return h};a.Stylesheet.prototype.assignToStyle=function(h){h.clear();for(var f=0;f<this.length;f++){var e=this[f];var c=e.selector;var g=e.properties;h.selector(c);for(var d=0;d<g.length;d++){var k=g[d];h.css(k.name,k.value)}}};(function(){var e=a.util.regex.number;
var f=a.util.regex.rgbaNoBackRefs;var d=a.util.regex.hslaNoBackRefs;var k=a.util.regex.hex3;var j=a.util.regex.hex6;a.style.types={zeroOneNumber:{number:true,min:0,max:1,unitless:true},nonNegativeInt:{number:true,min:0,integer:true,unitless:true},size:{number:true,min:0,enums:["auto"]},bgSize:{number:true,min:0,allowPercent:true},color:{color:true},lineStyle:{enums:["solid","dotted","dashed"]},curveStyle:{enums:["bundled","bezier"]},fontFamily:{regex:"^([\\w- ]+(?:\\s*,\\s*[\\w- ]+)*)$"},fontVariant:{enums:["small-caps","normal"]},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","capitalize","uppercase","lowercase"]},nodeShape:{enums:["rectangle","roundrectangle","ellipse","triangle","square","pentagon","hexagon","heptagon","octagon"]},arrowShape:{enums:["tee","triangle","square","circle","diamond","none"]},visibility:{enums:["hidden","visible"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},positionx:{enums:["left","center","right"],number:true,allowPercent:true},positiony:{enums:["top","center","bottom"],number:true,allowPercent:true},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"]},cursor:{enums:["auto","crosshair","default","e-resize","n-resize","ne-resize","nw-resize","pointer","progress","s-resize","sw-resize","text","w-resize","wait","grab","grabbing"]},text:{string:true},data:{mapping:true,regex:"^data\\s*\\(\\s*(\\w+)\\s*\\)$"},mapData:{mapping:true,regex:"^mapData\\((\\w+)\\s*\\,\\s*("+e+")\\s*\\,\\s*("+e+")\\s*,\\s*("+e+"|\\w+|"+f+"|"+d+"|"+k+"|"+j+")\\s*\\,\\s*("+e+"|\\w+|"+f+"|"+d+"|"+k+"|"+j+")\\)$"},url:{regex:"^url\\s*\\(\\s*([^\\s]+)\\s*\\s*\\)|none|(.+)$"}};
var l=a.style.types;a.style.properties=[{name:"cursor",type:l.cursor},{name:"text-valign",type:l.valign},{name:"text-halign",type:l.halign},{name:"color",type:l.color},{name:"content",type:l.text},{name:"text-outline-color",type:l.color},{name:"text-outline-width",type:l.size},{name:"text-outline-opacity",type:l.zeroOneNumber},{name:"text-opacity",type:l.zeroOneNumber},{name:"text-decoration",type:l.textDecoration},{name:"text-transform",type:l.textTransform},{name:"font-family",type:l.fontFamily},{name:"font-style",type:l.fontStyle},{name:"font-variant",type:l.fontVariant},{name:"font-weight",type:l.fontWeight},{name:"font-size",type:l.size},{name:"visibility",type:l.visibility},{name:"opacity",type:l.zeroOneNumber},{name:"z-index",type:l.nonNegativeInt},{name:"overlay-padding",type:l.size},{name:"overlay-color",type:l.color},{name:"overlay-opacity",type:l.zeroOneNumber},{name:"background-color",type:l.color},{name:"background-opacity",type:l.zeroOneNumber},{name:"background-image",type:l.url},{name:"background-position-x",type:l.positionx},{name:"background-position-y",type:l.positiony},{name:"background-repeat",type:l.bgRepeat},{name:"background-size-x",type:l.bgSize},{name:"background-size-y",type:l.bgSize},{name:"border-color",type:l.color},{name:"border-opacity",type:l.zeroOneNumber},{name:"border-width",type:l.size},{name:"border-style",type:l.lineStyle},{name:"height",type:l.size},{name:"width",type:l.size},{name:"padding-left",type:l.size},{name:"padding-right",type:l.size},{name:"padding-top",type:l.size},{name:"padding-bottom",type:l.size},{name:"shape",type:l.nodeShape},{name:"source-arrow-shape",type:l.arrowShape},{name:"target-arrow-shape",type:l.arrowShape},{name:"source-arrow-color",type:l.color},{name:"target-arrow-color",type:l.color},{name:"line-style",type:l.lineStyle},{name:"line-color",type:l.color},{name:"control-point-step-size",type:l.size},{name:"curve-style",type:l.curveStyle},{name:"selection-box-color",type:l.color},{name:"selection-box-opacity",type:l.zeroOneNumber},{name:"selection-box-border-color",type:l.color},{name:"selection-box-border-width",type:l.size},{name:"panning-cursor",type:l.cursor}];
var h=a.style.properties;for(var g=0;g<h.length;g++){var c=h[g];h[c.name]=c}})();a.styfn.addDefaultStylesheet=function(){var c=this.containerPropertyAsString("font-family")||"sans-serif";var i=this.containerPropertyAsString("font-style")||"normal";var f=this.containerPropertyAsString("font-variant")||"normal";var e=this.containerPropertyAsString("font-weight")||"normal";var d=this.containerPropertyAsString("color")||"#000";var j=this.containerPropertyAsString("text-transform")||"none";var h=this.containerPropertyAsString("text-decoration")||"none";
var g=this.containerPropertyAsString("font-size")||12;this.selector("node, edge").css({cursor:"default","text-valign":"top","text-halign":"center",color:d,content:undefined,"text-outline-color":"transparent","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":j,"font-family":c,"font-style":i,"font-variant":f,"font-weight":e,"font-size":g,visibility:"visible",opacity:1,"z-index":0,content:"","overlay-opacity":0,"overlay-color":"#000","overlay-padding":10}).selector("node").css({"background-color":"#888","background-opacity":1,"background-image":"none","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,"padding-top":0,"padding-bottom":0,"padding-left":0,"padding-right":0,shape:"ellipse"}).selector("$node > node").css({width:"auto",height:"auto",shape:"rectangle"}).selector("edge").css({"source-arrow-shape":"none","target-arrow-shape":"none","source-arrow-color":"#bbb","target-arrow-color":"#bbb","line-style":"solid","line-color":"#bbb",width:1,"control-point-step-size":40,"curve-style":"bezier"}).selector("core").css({"selection-box-color":"#ddd","selection-box-opacity":0.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"panning-cursor":"grabbing"})
};a.styfn.clear=function(){for(var c=0;c<this.length;c++){delete this[c]}this.length=0;return this};a.styfn.resetToDefault=function(){this.clear();this.addDefaultStylesheet();return this};a.styfn.core=function(){return this._private.coreStyle};a.styfn.parse=function(B,v,l){B=a.util.camel2dash(B);var h=a.style.properties[B];var n=v;if(!h){return null}if(v===undefined||v===null){return null}var j=a.is.string(v);if(j){v=a.util.trim(v)}var g=h.type;if(!g){return null}if(l&&(v===""||v===null)){return{name:B,value:v,bypass:true,deleteBypass:true}
}var A,p;if(!j){}else{if(A=new RegExp(a.style.types.data.regex).exec(v)){return{name:B,value:A,strValue:v,mapped:a.style.types.data,field:A[1],bypass:l}}else{if(p=new RegExp(a.style.types.mapData.regex).exec(v)){if(!(g.color||g.number)){return false}var d=this.parse(B,p[4]);if(!d||d.mapped){return false}var f=this.parse(B,p[5]);if(!f||f.mapped){return false}if(d.value===f.value){return false}else{if(g.color){var t=d.value;var s=f.value;var x=t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&(t[3]===s[3]||((t[3]==null||t[3]===1)&&(s[3]==null||s[3]===1)));
if(x){return false}}}return{name:B,value:p,strValue:v,mapped:a.style.types.mapData,field:p[1],fieldMin:parseFloat(p[2]),fieldMax:parseFloat(p[3]),valueMin:d.value,valueMax:f.value,bypass:l}}}}if(g.number){var w;if(!g.unitless){if(j){var k=v.match("^("+a.util.regex.number+")(px|em"+(g.allowPercent?"|\\%":"")+")?$");if(!g.enums){if(!k){return null}v=k[1];w=k[2]||"px"}}else{w="px"}}v=parseFloat(v);if(isNaN(v)&&g.enums!==undefined){v=n;for(var y=0;y<g.enums.length;y++){var c=g.enums[y];if(c===v){return{name:B,value:v,strValue:v,bypass:l}
}}return null}if(g.integer&&!a.is.integer(v)){return null}if((g.min!==undefined&&v<g.min)||(g.max!==undefined&&v>g.max)){return null}var z={name:B,value:v,strValue:""+v+(w?w:""),units:w,bypass:l,pxValue:g.unitless||w==="%"?undefined:(w==="px"||!w?(v):(this.getEmSizeInPixels()*v))};return z}else{if(g.color){var o=a.util.color2tuple(v);return{name:B,value:o,strValue:v,bypass:l}}else{if(g.enums){for(var y=0;y<g.enums.length;y++){var c=g.enums[y];if(c===v){return{name:B,value:v,strValue:v,bypass:l}}}}else{if(g.regex){var e=new RegExp(g.regex);
var u=e.exec(v);if(u){return{name:B,value:u,strValue:v,bypass:l}}else{return null}}else{if(g.string){return{name:B,value:v,strValue:v,bypass:l}}else{return null}}}}}};a.styfn.getEmSizeInPixels=function(){var f=this._private.cy;var e=f.container();if(b&&e){var d=b.getComputedStyle(e).getPropertyValue("font-size");var c=parseFloat(d);return c}else{return 1}};a.styfn.containerCss=function(c){var e=this._private.cy;var d=e.container();if(b&&d){return b.getComputedStyle(d).getPropertyValue(c)}};a.styfn.containerProperty=function(d){var c=this.containerCss(d);
var e=this.parse(d,c);return e};a.styfn.containerPropertyAsString=function(c){var d=this.containerProperty(c);if(d){return d.strValue}};a.styfn.selector=function(d){var c=d==="core"?null:new a.Selector(d);var e=this.length++;this[e]={selector:c,properties:[]};return this};a.styfn.css=function(){var d=arguments;switch(d.length){case 1:var f=d[0];for(var e=0;e<a.style.properties.length;e++){var g=a.style.properties[e];var c=f[g.name];if(c===undefined){c=f[a.util.dash2camel(g.name)]}if(c!==undefined){this.cssRule(g.name,c)
}}break;case 2:this.cssRule(d[0],d[1]);break;default:break}return this};a.styfn.cssRule=function(c,g){var f=this.parse(c,g);if(f){var d=this.length-1;this[d].properties.push(f);var e=!this[d].selector;if(e){this._private.coreStyle[f.name]=f}}return this};a.styfn.applyParsedProperty=function(n,w){var g=w;var u=n._private.style;var l,i;var h=a.style.properties[g.name].type;var m=g.bypass;var v=u[g.name];var p=v&&v.bypass;if(m&&g.deleteBypass){var o=u[g.name];if(!o){return true}else{if(o.bypass&&o.bypassed){u[g.name]=o.bypassed;
return true}else{return false}}}switch(g.mapped){case a.style.types.mapData:l=n._private.data[g.field];if(!a.is.number(l)){return false}var d=(l-g.fieldMin)/(g.fieldMax-g.fieldMin);if(h.color){var t=g.valueMin[0];var s=g.valueMax[0];var c=g.valueMin[1];var z=g.valueMax[1];var k=g.valueMin[2];var j=g.valueMax[2];var y=g.valueMin[3]==null?1:g.valueMin[3];var x=g.valueMax[3]==null?1:g.valueMax[3];var f=[Math.round(t+(s-t)*d),Math.round(c+(z-c)*d),Math.round(k+(j-k)*d),Math.round(y+(x-y)*d)];i={bypass:g.bypass,name:g.name,value:f,strValue:["rgba(",f[0],", ",f[1],", ",f[2],", ",f[3],")"].join("")}
}else{if(h.number){var e=g.valueMin+(g.valueMax-g.valueMin)*d;i=this.parse(g.name,e,g.bypass)}else{return false}}if(!i){i=this.parse(g.name,v.strValue,g.bypass)}i.mapping=g;g=i;break;case a.style.types.data:l=n._private.data[g.field];i=this.parse(g.name,l,g.bypass);if(!i){i=this.parse(g.name,v.strValue,g.bypass)}i.mapping=g;g=i;break;case undefined:break;default:return false}if(m){if(p){g.bypassed=v.bypassed}else{g.bypassed=v}u[g.name]=g}else{if(p){v.bypassed=g}else{u[g.name]=g}}return true};a.styfn.applyProperty=function(f,d,e){var c=this.parse(d,e);
if(!c){return false}return this.applyParsedProperty(f,c)};a.styfn.apply=function(m){for(var d=0;d<m.length;d++){var l=m[d];for(var g=0;g<this.length;g++){var e=this[g];var h=e.selector&&e.selector.filter(l).length>0;var k=e.properties;if(h){for(var f=0;f<k.length;f++){var c=k[f];this.applyParsedProperty(l,c)}}}}};a.styfn.update=function(){var d=this._private.cy;var c=d.elements();c.updateStyle()};a.styfn.getRenderedStyle=function(l){var l=l[0];if(l){var c={};var e=l._private.style;var h=this._private.cy;
var k=h.zoom();for(var j=0;j<a.style.properties.length;j++){var d=a.style.properties[j];var g=e[d.name];if(g){var f=g.unitless?g.strValue:(g.pxValue*k)+"px";c[d.name]=f;c[a.util.dash2camel(d.name)]=f}}return c}};a.styfn.getRawStyle=function(g){var g=g[0];if(g){var d={};var f=g._private.style;for(var e=0;e<a.style.properties.length;e++){var h=a.style.properties[e];var c=f[h.name];if(c){d[h.name]=c.strValue;d[a.util.dash2camel(h.name)]=c.strValue}}return d}};a.styfn.getValueStyle=function(g){var d,f;
if(a.is.element(g)){d={};f=g._private.style}else{d={};f=g}if(f){for(var e=0;e<a.style.properties.length;e++){var j=a.style.properties[e];var c=f[j.name]||f[a.util.dash2camel(j.name)];if(c!==undefined&&!a.is.plainObject(c)){c=this.parse(j.name,c)}if(c){var h=c.value===undefined?c:c.value;d[j.name]=h;d[a.util.dash2camel(j.name)]=h}}}return d};a.styfn.updateFunctionalProperties=function(c){for(var f=0;f<c.length;f++){var k=c[f];var h=k._private.style;for(var e=0;e<a.style.properties.length;e++){var l=a.style.properties[e];
var g=h[l.name];if(g&&g.mapping){var d=g.mapping;this.applyParsedProperty(k,d)}}}};a.styfn.applyBypass=function(o,d,m){var l=[];if(d==="*"||d==="**"){if(m!==undefined){for(var g=0;g<a.style.properties.length;g++){var c=a.style.properties[g];var d=c.name;var k=this.parse(d,m,true);if(k){l.push(k)}}}}else{if(a.is.string(d)){var k=this.parse(d,m,true);if(k){l.push(k)}}else{if(a.is.plainObject(d)){var e=d;for(var g=0;g<a.style.properties.length;g++){var c=a.style.properties[g];var d=c.name;var m=e[d];
if(m===undefined){m=e[a.util.dash2camel(d)]}if(m!==undefined){var k=this.parse(d,m,true);if(k){l.push(k)}}}}else{return false}}}if(l.length===0){return false}var h=false;for(var g=0;g<o.length;g++){var n=o[g];for(var f=0;f<l.length;f++){var c=l[f];h=this.applyParsedProperty(n,c)||h}}return h};a.styfn.removeAllBypasses=function(c){for(var g=0;g<a.style.properties.length;g++){var l=a.style.properties[g];var f=l.name;var k="";var d=this.parse(f,k,true);for(var e=0;e<c.length;e++){var h=c[e];this.applyParsedProperty(h,d)
}}};a.styfn.calculateControlPoints=function(c){var p={};var v=false;var j=c.length;for(var n=0;n<c.length;n++){var w=c[n];var u=w._private.style["curve-style"].strValue==="bundled";if(u){v=true;break}}var t=j%2!==0&&!v;for(var n=0;n<c.length;n++){var g=c[n];var k=g._private.data.id;var h=g.source();var o=g.target();var s=h.position();var l=o.position();var x={x:(s.x+l.x)/2,y:(s.y+l.y)/2};var d=g._private.style["control-point-step-size"].pxValue;var f=(j-1)*-d/2;if(h.id()==o.id()){c[n]._private.rscratch.isSelfEdge=true;
g._private.rscratch.cp2ax=s.x;g._private.rscratch.cp2ay=s.y-1.3*d*(n/3+1);g._private.rscratch.cp2cx=s.x-1.3*d*(n/3+1);g._private.rscratch.cp2cy=s.y;g._private.rscratch.selfEdgeMidX=(g._private.rscratch.cp2ax+g._private.rscratch.cp2cx)/2;g._private.rscratch.selfEdgeMidY=(g._private.rscratch.cp2ay+g._private.rscratch.cp2cy)/2;continue}var m=f+d*n;if(j%2==1&&n==Math.floor(j/2)){c[n]._private.rscratch.isStraightEdge=true;continue}c[n]._private.rscratch.isBezierEdge=true;var z={x:l.y-s.y,y:s.x-l.x};var y=Math.sqrt(z.x*z.x+z.y*z.y);
if(h.id()>o.id()){y*=-1}z.x/=y;z.y/=y;c[n]._private.rscratch.cp2x=x.x+z.x*m;c[n]._private.rscratch.cp2y=x.y+z.y*m}}})(cytoscape,typeof window==="undefined"?null:window);(function(a){a.fn.core=function(b,d){for(var c in b){var e=b[c];a.Core.prototype[c]=e}};a.Core=function(f){if(!(this instanceof a.Core)){return new a.Core(f)}var g=this;var b=f.container;var d=a.getRegistrationForInstance(g,b);if(d){d.cy=this;d.domElement=b}else{d=a.registerInstance(g,b)}var e=d.readies;var c=f;c.layout=a.util.extend({name:typeof window==="undefined"?"null":"grid"},c.layout);
c.renderer=a.util.extend({name:typeof window==="undefined"?"null":"canvas"},c.renderer);this._private={ready:false,instanceId:null,options:c,elements:[],id2index:{},listeners:[],aniEles:[],scratch:{},layout:null,renderer:null,notificationsEnabled:true,minZoom:1e-50,maxZoom:1e+50,zoomEnabled:true,panEnabled:true,zoom:a.is.number(c.zoom)?c.zoom:1,pan:{x:a.is.plainObject(c.pan)&&a.is.number(c.pan.x)?c.pan.x:0,y:a.is.plainObject(c.pan)&&a.is.number(c.pan.y)?c.pan.y:0,}};if(a.is.number(c.minZoom)&&a.is.number(c.maxZoom)&&c.minZoom<c.maxZoom){this._private.minZoom=c.minZoom;
this._private.maxZoom=c.maxZoom}else{if(a.is.number(c.minZoom)&&c.maxZoom===undefined){this._private.minZoom=c.minZoom}else{if(a.is.number(c.maxZoom)&&c.minZoom===undefined){this._private.maxZoom=c.maxZoom}}}this._private.style=a.is.stylesheet(c.style)?c.style.generateStyle(this):new a.Style(g);g.initRenderer(c.renderer);g.load(c.elements,function(){g.startAnimationLoop();g._private.ready=true;if(a.is.fn(c.ready)){g.bind("ready",c.ready)}for(var h=0;h<e.length;h++){var j=e[h];g.bind("ready",j)}d.readies=[];
g.trigger("ready")},c.done)};a.corefn=a.Core.prototype;a.fn.core({ready:function(){return this._private.ready},registered:function(){if(this._private&&this._private.instanceId!=null){return true}else{return false}},registeredId:function(){return this._private.instanceId},getElementById:function(c){var b=this._private.id2index[c];if(b!==undefined){return this._private.elements[b]}return new a.Collection(this)},addToPool:function(c){var g=this._private.elements;var j=this._private.id2index;for(var e=0;
e<c.length;e++){var f=c[e];var h=f._private.data.id;var d=j[h];var b=d!==undefined;if(!b){d=g.length;g.push(f);j[h]=d}}return this},removeFromPool:function(m){var b=this._private.elements;var e=this._private.id2index;for(var g=0;g<m.length;g++){var l=m[g];var c=l._private.data.id;var h=e[c];var k=h!==undefined;if(k){delete this._private.id2index[c];b.splice(h,1);for(var f=h;f<b.length;f++){var d=b[f]._private.data.id;e[d]--}}}},container:function(){return this._private.options.container},options:function(){return a.util.copy(this._private.options)
},json:function(c){var b={};var d=this;b.elements={};d.elements().each(function(e,f){var g=f.group();if(!b.elements[g]){b.elements[g]=[]}b.elements[g].push(f.json())});b.style=d.style();b.scratch=d.scratch();b.zoomEnabled=d._private.zoomEnabled;b.panEnabled=d._private.panEnabled;b.layout=d._private.options.layout;b.renderer=d._private.options.renderer;return b}})})(cytoscape);(function(a,b){a.fn.core({add:function(d){var c;var e=this;if(a.is.elementOrCollection(d)){var v=d;var n=[];for(var h=0;h<v.length;
h++){var u=v[h];n.push(u.json())}c=new a.Collection(e,n)}else{if(a.is.array(d)){var n=d;c=new a.Collection(e,n)}else{if(a.is.plainObject(d)&&(a.is.array(d.nodes)||a.is.array(d.edges))){var l=d;var n=[];var o=["nodes","edges"];for(var h=0,p=o.length;h<p;h++){var s=o[h];var m=l[s];if(a.is.array(m)){for(var f=0,g=m.length;f<g;f++){var t=m[f];var k=a.util.extend({},t,{group:s});n.push(k)}}}c=new a.Collection(e,n)}else{var t=d;c=(new a.Element(e,t)).collection()}}}return c.filter(function(){return !this.removed()
})},remove:function(d){if(!a.is.elementOrCollection(d)){d=d}else{if(a.is.string(d)){var c=d;d=this.$(c)}}return d.remove()},load:function(f,g,e){var i=this;var d=i.elements();if(d.length>0){d.remove()}i.notifications(false);var c=[];if(f!=null){if(a.is.plainObject(f)||a.is.array(f)){i.add(f)}}function h(){i.one("layoutready",function(j){i.notifications(true);i.trigger(j);i.notify({type:"load",collection:i.elements(),style:i._private.style});i.one("load",g);i.trigger("load")}).one("layoutstop",function(){i.one("done",e);
i.trigger("done")});i.layout(i._private.options.layout)}if(true||b&&b.chrome){setTimeout(function(){h()},30)}else{h()}return this}})})(cytoscape,typeof window==="undefined"?null:window);(function(a){a.fn.core({addToAnimationPool:function(b){var h=this;var c=h._private.aniEles;var e=[];for(var d=0;d<c.length;d++){var g=c[d]._private.data.id;e[g]=true}for(var d=0;d<b.length;d++){var f=b[d];var g=f._private.data.id;if(!e[g]){c.push(f)}}},startAnimationLoop:function(){var g=this;var f=10;var l=false;
var i=true;g._private.aniEles=[];var j=typeof window==="undefined"?function(){}:(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame);if(j==null||!i){j=function(m){window.setTimeout(function(){m(+new Date)},f)}}var c=g.container();function k(){function m(){j(function(n){d(n);k()},c)}if(l){setTimeout(function(){m()},f)}else{m()}}k();function d(p){var A=g._private.aniEles;for(var w=0;w<A.length;w++){var z=A[w];var x=z._private.animation.current;
var v=z._private.animation.queue;if(x.length===0){var n=v;var u=n.length>0?n.shift():null;if(u!=null){u.callTime=+new Date;x.push(u)}}var y=[];for(var t=0;t<x.length;t++){var s=x[t];e(z,s,p);if(x[t].done){y.push(s);x.splice(t,1);t--}}for(var t=0;t<y.length;t++){var s=y[t];var o=s.params.complete;if(a.is.fn(o)){o.apply(z,[p])}}}if(A.length>0){g.notify({type:"draw",collection:A})}for(var t=0;t<A.length;t++){var z=A[t];var v=z._private.animation.queue;var x=z._private.animation.current;var m=x.length>0||v.length>0;
if(!m){A.splice(t,1);t--}}}function e(E,x,t){var n=g.style();var B=x.properties;var w=x.params;var u=x.callTime;var A;if(x.duration===0){A=1}else{A=Math.min(1,(t-u)/x.duration)}if(B.delay==null){var z=x.startPosition;var s=B.position;var D=E._private.position;if(s){if(b(z.x,s.x)){D.x=h(z.x,s.x,A)}if(b(z.y,s.y)){D.y=h(z.y,s.y,A)}}if(B.css){var C=a.style.properties;for(var y=0;y<C.length;y++){var m=C[y].name;var v=B.css[m];if(v!==undefined){var p=x.startStyle[m];var o=h(p,v,A);n.applyBypass(E,m,o)}}}}if(a.is.fn(w.step)){w.step.apply(E,[t])
}if(A>=1){x.done=true}return A}function b(n,m){if(n==null||m==null){return false}if(a.is.number(n)&&a.is.number(m)){return true}else{if((n)&&(m)){return true}}return false}function h(o,p,v){if(a.is.number(o)&&a.is.number(p)){return o+(p-o)*v}else{if(a.is.number(o[0])&&a.is.number(p[0])){var t=o;var s=p;function n(z,x){var A=x-z;var y=z;return Math.round(v*A+y)}var m=n(t[0],s[0]);var u=n(t[1],s[1]);var w=n(t[2],s[2]);return a.util.tuple2hex([m,u,w])}}return undefined}}})})(cytoscape);(function(a){a.fn.core({data:a.define.data({field:"data",bindingEvent:"data",allowBinding:true,allowSetting:true,settingEvent:"data",settingTriggersEvent:true,triggerFnName:"trigger",allowGetting:true}),removeData:a.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:true}),batchData:a.define.batchData({field:"data",event:"data",triggerFnName:"trigger",immutableKeys:{id:true,source:true,target:true,parent:true},updateMappers:true}),scratch:a.define.data({field:"scratch",allowBinding:false,allowSetting:true,settingTriggersEvent:false,allowGetting:true}),removeScratch:a.define.removeData({field:"scratch",triggerEvent:false}),})
})(cytoscape);(function(a){a.fn.core({on:a.define.on(),one:a.define.on({unbindSelfOnTrigger:true}),once:a.define.on({unbindAllBindersOnTrigger:true}),off:a.define.off(),trigger:a.define.trigger(),});a.corefn.bind=a.corefn.on;a.corefn.unbind=a.corefn.off;a.define.event.aliasesOn(a.corefn)})(cytoscape);(function(a){a.fn.core({png:function(){var c=this;var b=this._private.renderer;return b.png()}})})(cytoscape);(function(a){a.fn.core({layout:function(b){var c=this;if(b==null){b=this._private.options.layout
}this.initLayout(b);c.trigger("layoutstart");this._private.layout.run();return this},initLayout:function(d){if(d==null){a.util.error("Layout options must be specified to run a layout");return}if(d.name==null){a.util.error("A `name` must be specified to run a layout");return}var c=d.name;var b=a.extension("layout",c);if(b==null){a.util.error("Can not apply layout: No such layout `%s` found; did you include its JS file?",c);return}this._private.layout=new b(a.util.extend({},d,{renderer:this._private.renderer,cy:this}));
this._private.options.layout=d}})})(cytoscape);(function(a){a.fn.core({notify:function(e){if(!this._private.notificationsEnabled){return}var d=this.renderer();var f=this;if(a.is.element(e.collection)){var b=e.collection;e.collection=new a.Collection(f,[b])}else{if(a.is.array(e.collection)){var c=e.collection;e.collection=new a.Collection(f,c)}}d.notify(e)},notifications:function(b){var c=this._private;if(b===undefined){return c.notificationsEnabled}else{c.notificationsEnabled=b?true:false}},noNotifications:function(b){this.notifications(false);
b();this.notifications(true)}})})(cytoscape);(function(a){a.fn.core({renderer:function(){return this._private.renderer},initRenderer:function(c){var d=this;var b=a.extension("renderer",c.name);if(b==null){a.util.error("Can not initialise: No such renderer `%s` found; did you include its JS file?",c.name);return}this._private.renderer=new b(a.util.extend({},c,{cy:d,style:d._private.style}))}})})(cytoscape);(function(a){a.fn.core({collection:function(b){if(a.is.string(b)){return this.$(b)}else{if(a.is.elementOrCollection(b)){return b.collection()
}}return new a.Collection(this)},nodes:function(b){var c=this.$("node");if(b){return c.filter(b)}return c},edges:function(b){var c=this.$("edge");if(b){return c.filter(b)}return c},$:function(c){var b=new a.Collection(this,this._private.elements);if(c){return b.filter(c)}return b}});a.corefn.elements=a.corefn.filter=a.corefn.$})(cytoscape);(function(a){a.fn.core({style:function(b){return this._private.style}})})(cytoscape);(function(a){a.fn.core({panningEnabled:function(b){if(b!==undefined){this._private.panEnabled=b?true:false
}else{return this._private.panEnabled}return this},zoomingEnabled:function(b){if(b!==undefined){this._private.zoomEnabled=b?true:false}else{return this._private.zoomEnabled}return this},pan:function(){var c=arguments;var g=this._private.pan;var d,f,e,b,h;switch(c.length){case 0:return g;case 1:if(!this._private.panEnabled){return this}else{if(a.is.string(c[0])){d=c[0];return g[d]}else{if(a.is.plainObject(c[0])){e=c[0];b=e.x;h=e.y;if(a.is.number(b)){g.x=b}if(a.is.number(h)){g.y=h}this.trigger("pan")
}}}break;case 2:if(!this._private.panEnabled){return this}d=c[0];f=c[1];if((d==="x"||d==="y")&&a.is.number(f)){g[d]=f}this.trigger("pan");break;default:break}this.notify({type:"viewport"});return this},panBy:function(h){var c=arguments;var g=this._private.pan;var d,f,e,b,i;if(!this._private.panEnabled){return this}switch(c.length){case 1:if(a.is.plainObject(c[0])){e=c[0];b=e.x;i=e.y;if(a.is.number(b)){g.x+=b}if(a.is.number(i)){g.y+=i}this.trigger("pan")}break;case 2:d=c[0];f=c[1];if((d==="x"||d==="y")&&a.is.number(f)){g[d]+=f
}this.trigger("pan");break;default:break}this.notify({type:"viewport"});return this},fit:function(f,g){if(a.is.number(f)&&g===undefined){g=f;f=undefined}if(!this._private.panEnabled||!this._private.zoomEnabled){return this}var i=this.boundingBox(f);var d=this.style();var b=parseFloat(d.containerCss("width"));var c=parseFloat(d.containerCss("height"));var e;g=a.is.number(g)?g:0;if(!isNaN(b)&&!isNaN(c)){e=this._private.zoom=Math.min((b-2*g)/i.w,(c-2*g)/i.h);e=e>this._private.maxZoom?this._private.maxZoom:e;
e=e<this._private.minZoom?this._private.minZoom:e;this._private.pan={x:(b-e*(i.x1+i.x2))/2,y:(c-e*(i.y1+i.y2))/2}}this.trigger("pan zoom");this.notify({type:"viewport"});return this},minZoom:function(b){if(b===undefined){return this._private.minZoom}else{if(a.is.number(b)){this._private.minZoom=b}}return this},maxZoom:function(b){if(b===undefined){return this._private.maxZoom}else{if(a.is.number(b)){this._private.maxZoom=b}}return this},zoom:function(d){var j;var k;if(d===undefined){return this._private.zoom
}else{if(a.is.number(d)){k=d;j={x:0,y:0}}else{if(a.is.plainObject(d)){k=d.level;if(d.renderedPosition){var l=d.renderedPosition;var b=this._private.pan;var i=this._private.zoom;j={x:(l.x-b.x)/i,y:(l.y-b.y)/i}}else{if(d.position){j=d.position}}if(j&&!this._private.panEnabled){return this}}}}if(!this._private.zoomEnabled){return this}if(!a.is.number(k)||!a.is.number(j.x)||!a.is.number(j.y)){return this}k=k>this._private.maxZoom?this._private.maxZoom:k;k=k<this._private.minZoom?this._private.minZoom:k;
var g=this._private.pan;var h=this._private.zoom;var f=k;var e={x:-f/h*(j.x-g.x)+j.x,y:-f/h*(j.y-g.y)+j.y};this._private.zoom=k;this._private.pan=e;var c=g.x!==e.x||g.y!==e.y;this.trigger("zoom"+(c?" pan":""));this.notify({type:"viewport"});return this},boundingBox:function(c){var b=this.$(c);return b.boundingBox()},center:function(f){if(!this._private.panEnabled||!this._private.zoomEnabled){return this}var g=this.boundingBox(f);var d=this.style();var b=parseFloat(d.containerCss("width"));var c=parseFloat(d.containerCss("height"));
var e=this._private.zoom;this.pan({x:(b-e*(g.x1+g.x2))/2,y:(c-e*(g.y1+g.y2))/2});this.trigger("pan");this.notify({type:"viewport"});return this},reset:function(){if(!this._private.panEnabled||!this._private.zoomEnabled){return this}this.pan({x:0,y:0});if(this._private.maxZoom>1&&this._private.minZoom<1){this.zoom(1)}this.notify({type:"viewport"});return this}})})(cytoscape);(function(b){b.fn.collection=b.fn.eles=function(c,e){for(var d in c){var f=c[d];b.Collection.prototype[d]=f}};var a={prefix:{nodes:"n",edges:"e"},id:{nodes:0,edges:0},generate:function(h,d,g){var c=b.is.element(d)?d._private:d;
var e=c.group;var f=g!=null?g:this.prefix[e]+this.id[e];if(h.getElementById(f).empty()){this.id[e]++}else{while(!h.getElementById(f).empty()){f=this.prefix[e]+(++this.id[e])}}return f}};b.Element=function(d,f,h){if(!(this instanceof b.Element)){return new b.Element(d,f,h)}var n=this;h=(h===undefined||h?true:false);if(d===undefined||f===undefined||!b.is.core(d)){b.util.error("An element must have a core reference and parameters set");return}if(f.group!=="nodes"&&f.group!=="edges"){b.util.error("An element must be of type `nodes` or `edges`; you specified `"+f.group+"`");
return}this.length=1;this[0]=this;this._private={cy:d,single:true,data:f.data||{},position:f.position||{},autoWidth:undefined,autoHeight:undefined,listeners:[],group:f.group,style:{},rstyle:{},removed:true,selected:f.selected?true:false,selectable:f.selectable===undefined?true:(f.selectable?true:false),locked:f.locked?true:false,grabbed:false,grabbable:f.grabbable===undefined?true:(f.grabbable?true:false),active:false,classes:{},animation:{current:[],queue:[]},rscratch:{},scratch:{},edges:[],children:[]};
if(f.renderedPosition){var o=f.renderedPosition;var j=d.pan();var m=d.zoom();this._private.position={x:(o.x-j.x)/m,y:(o.y-j.y)/m}}if(b.is.string(f.classes)){var e=f.classes.split(/\s+/);for(var g=0,c=e.length;g<c;g++){var k=e[g];if(!k||k===""){continue}n._private.classes[k]=true}}if(h===undefined||h){this.restore()}};b.Collection=function(h,c){if(!(this instanceof b.Collection)){return new b.Collection(h,c)}if(h===undefined||!b.is.core(h)){b.util.error("A collection must have a reference to the core");
return}var d={};var f=[];var o=false;if(!c){c=[]}else{if(c.length>0&&b.is.plainObject(c[0])&&!b.is.element(c[0])){o=true;var t=[];var j={};for(var n=0,g=c.length;n<g;n++){var p=c[n];if(p.data==null){p.data={}}var m=p.data;if(m.id==null){m.id=a.generate(h,p)}else{if(h.getElementById(m.id).length!=0||j[m.id]){continue}}var s=new b.Element(h,p,false);t.push(s);j[m.id]=true}c=t}}for(var n=0,g=c.length;n<g;n++){var k=c[n];if(!k){continue}var e=k._private.data.id;if(!d[e]){d[e]=k;f.push(k)}}for(var n=0,g=f.length;
n<g;n++){this[n]=f[n]}this.length=f.length;this._private={cy:h,ids:d};if(o){this.restore()}};b.elefn=b.elesfn=b.Element.prototype=b.Collection.prototype;b.elesfn.cy=function(){return this._private.cy};b.elesfn.element=function(){return this[0]};b.elesfn.collection=function(){if(b.is.collection(this)){return this}else{return new b.Collection(this._private.cy,[this])}};b.elesfn.json=function(){var g=this.element();if(g==null){return undefined}var h=g._private;var f=b.util.copy({data:h.data,position:h.position,group:h.group,bypass:h.bypass,removed:h.removed,selected:h.selected,selectable:h.selectable,locked:h.locked,grabbed:h.grabbed,grabbable:h.grabbable,classes:"",scratch:h.scratch});
var e=[];for(var c in h.classes){e.push(c)}for(var d=0;d<e.length;d++){var c=e[d];f.classes+=c+(d<e.length-1?" ":"")}return f};b.elesfn.restore=function(s){var p=this;var F=[];var e=p.cy();if(s===undefined){s=true}var n=[];var v=0;var d=0;for(var C=0,y=p.length;C<y;C++){var m=p[C];if(m.isNode()){n.unshift(m);v++}else{n.push(m);d++}}for(var C=0,y=n.length;C<y;C++){var m=n[C];if(!m.removed()){continue}var o=m._private;var G=o.data;if(G.id===undefined){G.id=a.generate(e,m)}else{if(b.is.emptyString(G.id)||!b.is.string(G.id)){continue
}else{if(e.getElementById(G.id).length!=0){continue}}}var t=G.id;if(m.isEdge()){var g=m;var u=["source","target"];var w=u.length;for(var z=0;z<w;z++){var c=u[z];var H=G[c];if(H==null||H===""){continue}else{if(e.getElementById(H).empty()){continue}}}var h=e.getElementById(G.source);var B=e.getElementById(G.target);h._private.edges.push(g);B._private.edges.push(g)}o.ids={};o.ids[G.id]=m;o.removed=false;e.addToPool(m);F.push(m)}for(var C=0;C<v;C++){var x=n[C];var G=x._private.data;var t=G.id;var A=x._private.data.parent;
var f=A!=null;if(f){var k=e.getElementById(A);if(k.empty()){delete G.parent}else{var D=false;var E=k;while(!E.empty()){if(x.same(E)){D=true;delete G.parent;break}E=E.parent()}if(!D){k[0]._private.children.push(x)}}}}F=new b.Collection(e,F);if(F.length>0){F.updateStyle(false);F.connectedNodes().updateStyle(s);if(s){F.rtrigger("add")}else{F.trigger("add")}}return p};b.elesfn.removed=function(){var c=this[0];return c&&c._private.removed};b.elesfn.inside=function(){var c=this[0];return c&&!c._private.removed
};b.elesfn.remove=function(j){var t=this;var n=[];var d=[];var e={};var g=t._private.cy;if(j===undefined){j=true}function k(x){var l=x._private.edges;for(var w=0;w<l.length;w++){s(l[w])}}function v(x){var w=x._private.children;for(var l=0;l<w.length;l++){s(w[l])}}function s(i){var l=e[i.id()];if(l){return}else{e[i.id()]=true}if(i.isNode()){d.push(i);k(i);v(i)}else{d.unshift(i)}}for(var m=0,f=t.length;m<f;m++){var u=t[m];s(u)}function p(y,x){var i=y._private.edges;for(var l=0;l<i.length;l++){var w=i[l];
if(x===w){i.splice(l,1);break}}}for(var m=0;m<d.length;m++){var u=d[m];u._private.removed=true;g.removeFromPool(u);n.push(u);if(u.isEdge()){var c=u.source()[0];var h=u.target()[0];p(c,u);p(h,u)}}var o=new b.Collection(this.cy(),n);if(o.size()>0){if(j){this.cy().notify({type:"remove",collection:o})}o.trigger("remove")}return this}})(cytoscape);(function(a){a.fn.eles({animated:function(){var b=this[0];if(b){return b._private.animation.current.length>0}},clearQueue:function(){for(var b=0;b<this.length;
b++){var c=this[b];c._private.animation.queue=[]}return this},delay:function(c,b){this.animate({delay:c},{duration:c,complete:b});return this},animate:function(j,e){var c=+new Date;var d=this._private.cy;var b=d.style();if(e===undefined){e={}}if(e.duration===undefined){e.duration=400}switch(e.duration){case"slow":e.duration=600;break;case"fast":e.duration=200;break}if(j==null||(j.position==null&&j.css==null&&j.delay==null)){return this}if(j.css){j.css=b.getValueStyle(j.css)}for(var h=0;h<this.length;
h++){var l=this[h];var k=l._private.position;var g={x:k.x,y:k.y};var f=b.getValueStyle(l);if(l.animated()&&(e.queue===undefined||e.queue)){q=l._private.animation.queue}else{q=l._private.animation.current}q.push({properties:j,duration:e.duration,params:e,callTime:c,startPosition:g,startStyle:f})}d.addToAnimationPool(this);return this},stop:function(f,h){for(var e=0;e<this.length;e++){var c=this[e];var b=c._private.animation.current;for(var d=0;d<b.length;d++){var g=b[d];if(h){g.duration=0}}if(f){c._private.animation.queue=[]
}}this.cy().notify({collection:this,type:"draw"});return this}})})(cytoscape);(function(a){a.fn.eles({addClass:function(g){g=g.split(/\s+/);var c=this;var k=[];for(var f=0;f<g.length;f++){var b=g[f];if(a.is.emptyString(b)){continue}for(var d=0;d<c.length;d++){var h=c[d];var e=h._private.classes[b];h._private.classes[b]=true;if(!e){k.push(h)}}}if(k.length>0){new a.Collection(this._private.cy,k).updateStyle()}c.trigger("class");return c},hasClass:function(b){var c=this[0];return c!=null&&c._private.classes[b]
},toggleClass:function(h,g){var b=h.split(/\s+/);var n=this;var e=[];for(var f=0,k=n.length;f<k;f++){var o=n[f];for(var c=0;c<b.length;c++){var m=b[c];if(a.is.emptyString(m)){continue}var d=o._private.classes[m];var l=g||(g===undefined&&!d);if(l){o._private.classes[m]=true;if(!d){e.push(o)}}else{o._private.classes[m]=false;if(d){e.push(o)}}}}if(e.length>0){new a.Collection(this._private.cy,e).updateStyle()}n.trigger("class");return n},removeClass:function(g){g=g.split(/\s+/);var c=this;var k=[];for(var f=0;
f<c.length;f++){var h=c[f];for(var d=0;d<g.length;d++){var b=g[d];if(!b||b===""){continue}var e=h._private.classes[b];delete h._private.classes[b];if(e){k.push(h)}}}if(k.length>0){new a.Collection(c._private.cy,k).updateStyle()}c.trigger("class");return c}})})(cytoscape);(function(a){a.fn.eles({allAre:function(b){return this.filter(b).length===this.length},is:function(b){return this.filter(b).length>0},same:function(b){b=this.cy().collection(b);if(this.length!==b.length){return false}return this.intersect(b).length===this.length
},anySame:function(b){b=this.cy().collection(b);return this.intersect(b).length>0},allAreNeighbors:function(b){b=this.cy().collection(b);return this.neighborhood().intersect(b).length===b.length}})})(cytoscape);(function(a){a.fn.eles({updateStyle:function(b){var d=this._private.cy;var c=d.style();b=b||b===undefined?true:false;c.apply(this);if(b){this.rtrigger("style")}else{this.trigger("style")}return this},updateMappers:function(b){var f=this._private.cy;var d=f.style();b=b||b===undefined?true:false;
for(var c=0;c<this.length;c++){var e=this[c];d.apply(e)}if(b){this.rtrigger("style")}else{this.trigger("style")}return this},data:a.define.data({field:"data",bindingEvent:"data",allowBinding:true,allowSetting:true,settingEvent:"data",settingTriggersEvent:true,triggerFnName:"trigger",allowGetting:true,immutableKeys:{id:true,source:true,target:true,parent:true},updateMappers:true}),removeData:a.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:true,immutableKeys:{id:true,source:true,target:true,parent:true},updateMappers:true}),batchData:a.define.batchData({field:"data",event:"data",triggerFnName:"trigger",immutableKeys:{id:true,source:true,target:true,parent:true},updateMappers:true}),scratch:a.define.data({field:"scratch",allowBinding:false,allowSetting:true,settingTriggersEvent:false,allowGetting:true}),removeScratch:a.define.removeData({field:"scratch",triggerEvent:false}),rscratch:a.define.data({field:"rscratch",allowBinding:false,allowSetting:true,settingTriggersEvent:false,allowGetting:true}),removeRscratch:a.define.removeData({field:"rscratch",triggerEvent:false}),id:function(){var b=this[0];
if(b){return b._private.data.id}},position:a.define.data({field:"position",bindingEvent:"position",allowBinding:true,allowSetting:true,settingEvent:"position",settingTriggersEvent:true,triggerFnName:"rtrigger",allowGetting:true,validKeys:["x","y"]}),positions:function(f){if(a.is.plainObject(f)){this.position(f)}else{if(a.is.fn(f)){var c=f;for(var b=0;b<this.length;b++){var d=this[b];var f=c.apply(d,[b,d]);if(f){var e=d._private.position;e.x=f.x;e.y=f.y}}this.rtrigger("position")}}return this},renderedPosition:function(d){var c=this[0];
var h=this.cy();var b=h.zoom();var f=h.pan();if(c&&c.isNode()){var g=c._private.position;var e={x:g.x*b+f.x,y:g.y*b+f.y};if(d===undefined){return e}else{return e[d]}}},renderedCss:function(d){var c=this[0];if(c){var b=c.cy().style().getRenderedStyle(c);if(d===undefined){return b}else{return b[d]}}},css:function(b,f){var d=this.cy().style();if(a.is.plainObject(b)){var c=b;d.applyBypass(this,c);this.rtrigger("style")}else{if(a.is.string(b)){if(f===undefined){var e=this[0];if(e){return e._private.style[b].strValue
}else{return}}else{d.applyBypass(this,b,f);this.rtrigger("style")}}else{if(b===undefined){var e=this[0];if(e){return d.getRawStyle(e)}else{return}}}}return this},removeCss:function(){var d=this.cy().style();var b=this;for(var c=0;c<b.length;c++){var e=b[c];d.removeAllBypasses(e)}this.rtrigger("style")},show:function(){this.css("visibility","visible");return this},hide:function(){this.css("visibility","hidden");return this},visible:function(){var f=this[0];if(f){if(f.css("visibility")!=="visible"){return false
}if(f.isNode()){var c=f.parents();for(var d=0;d<c.length;d++){var e=c[d];var b=e.css("visibility");if(b!=="visible"){return false}}return true}else{if(f.isEdge()){var g=f.source();var h=f.target();return g.visible()&&h.visible()}}}},hidden:function(){var b=this[0];if(b){return !this.visible()}},width:function(){var c=this[0];if(c){var b=this._private.style.width;return b.strValue==="auto"?c._private.autoWidth:b.pxValue}},outerWidth:function(){var e=this[0];if(e){var d=this._private.style;var c=d.width.strValue==="auto"?e._private.autoWidth:d.width.pxValue;
var b=d["border-width"]?d["border-width"].pxValue:0;return c+b}},renderedWidth:function(){var c=this[0];if(c){var b=this.width();return b*this.cy().zoom()}},renderedOuterWidth:function(){var c=this[0];if(c){var b=this.outerWidth();return b*this.cy().zoom()}},height:function(){var c=this[0];if(c&&c.isNode()){var b=this._private.style.height;return b.strValue==="auto"?c._private.autoHeight:b.pxValue}},outerHeight:function(){var e=this[0];if(e){var d=this._private.style;var b=d.height.strValue==="auto"?e._private.autoHeight:d.height.pxValue;
var c=d["border-width"]?d["border-width"].pxValue:0;return b+c}},renderedHeight:function(){var c=this[0];if(c){var b=this.height();return b*this.cy().zoom()}},renderedOuterHeight:function(){var c=this[0];if(c){var b=this.outerHeight();return b*this.cy().zoom()}},offset:function(){var e=this[0];if(e&&e.isNode()){var g={x:e._private.position.x,y:e._private.position.y};var b=e.parents();for(var c=0;c<b.length;c++){var d=b[c];var f=d._private.position;g.x+=f.x;g.y+=f.y}return g}},renderedOffset:function(){var c=this[0];
if(c&&c.isNode()){var e=this.offset();var f=this.cy();var b=f.zoom();var d=f.pan();return{x:e.x*b+d.x,y:e.y*b+d.y}}},boundingBox:function(c){var I=this;if(!c||(a.is.elementOrCollection(c)&&c.length===0)){I=this}else{if(a.is.string(c)){I=this.filter(c)}else{if(a.is.elementOrCollection(c)){I=c}}}var m=Infinity;var l=-Infinity;var U=Infinity;var S=-Infinity;for(var Q=0;Q<I.length;Q++){var T=I[Q];var A,z,k,g,F,E;if(T.isNode()){var u=T._private.position;F=u.x;E=u.y;var G=T.outerWidth();var B=G/2;var R=T.outerHeight();
var K=R/2;A=F-B;z=F+B;k=E-K;g=E+K;m=A<m?A:m;l=z>l?z:l;U=k<U?k:U;S=g>S?g:S}else{var v=T.source()[0]._private.position;var b=T.target()[0]._private.position;var C=T._private.rstyle;F=C.labelX;E=C.labelY;A=v.x;z=b.x;k=v.y;g=b.y;if(A>z){var d=A;A=z;z=d}if(k>g){var d=k;k=g;g=d}m=A<m?A:m;l=z>l?z:l;U=k<U?k:U;S=g>S?g:S;var f=C.bezierPts||[];var G=T._private.style.width.value;for(var P=0;P<f.length;P++){var O=f[P];m=O.x-G<m?O.x-G:m;l=O.x+G>l?O.x+G:l;U=O.y-G<U?O.y-G:U;S=O.y+G>S?O.y+G:S}}var N=T._private.style;
var M=N.content.value;var n=N["font-size"];var t=N["text-halign"];var H=N["text-valign"];var e=T._private.rstyle.labelWidth;if(M&&n&&e!=undefined&&t&&H){var D=n.value;var s=e;var L,J,p,o;switch(t.value){case"left":L=A-s;J=A;break;case"center":L=F-s/2;J=F+s/2;break;case"right":L=z;J=z+s;break}if(T.isEdge()){L=F-s/2;J=F+s/2}switch(H.value){case"top":p=k-D;o=k;break;case"center":p=E-D/2;o=E+D/2;break;case"bottom":p=g;o=g+D;break}if(T.isEdge()){p=E-D/2;o=E+D/2}m=L<m?L:m;l=J>l?J:l;U=p<U?p:U;S=o>S?o:S}}return{x1:m,x2:l,y1:U,y2:S,w:l-m,h:S-U}
}})})(cytoscape);(function(b){function a(d){return function(){var f=this;if(f.length===0){return}if(f.isNode()&&!f.removed()){var k=0;var j=f[0];var e=j._private.edges;for(var g=0;g<e.length;g++){var h=e[g];k+=d(j,h)}return k}else{return}}}b.fn.eles({degree:a(function(e,d){if(d.source().same(d.target())){return 2}else{return 1}}),indegree:a(function(e,d){if(d.target().same(e)){return 1}else{return 0}}),outdegree:a(function(e,d){if(d.source().same(e)){return 1}else{return 0}})});function c(e,d){return function(){var g=undefined;
var f=this.nodes();for(var h=0;h<f.length;h++){var j=f[h];var k=j[e]();if(k!==undefined&&(g===undefined||d(k,g))){g=k}}return g}}b.fn.eles({minDegree:c("degree",function(e,d){return e<d}),maxDegree:c("degree",function(e,d){return e>d}),minIndegree:c("indegree",function(e,d){return e<d}),maxIndegree:c("indegree",function(e,d){return e>d}),minOutdegree:c("outdegree",function(e,d){return e<d}),maxOutdegree:c("outdegree",function(e,d){return e>d})});b.fn.eles({totalDegree:function(){var f=0;var d=this.nodes();
for(var e=0;e<d.length;e++){f+=d[e].degree()}return f}})})(cytoscape);(function(a){a.fn.eles({on:a.define.on(),one:a.define.on({unbindSelfOnTrigger:true}),once:a.define.on({unbindAllBindersOnTrigger:true}),off:a.define.off(),trigger:a.define.trigger(),rtrigger:function(b,c){this.cy().notify({type:b,collection:this.filter(function(){return !this.removed()})});this.trigger(b,c);return this}});a.elesfn.bind=a.elesfn.on;a.elesfn.unbind=a.elesfn.off;a.define.event.aliasesOn(a.elesfn)})(cytoscape);(function(a){a.fn.eles({isNode:function(){return this.group()==="nodes"
},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source().id()===this.target().id()},group:function(){var b=this[0];if(b){return b._private.group}}})})(cytoscape);(function(a){a.fn.eles({each:function(d){if(a.is.fn(d)){for(var c=0;c<this.length;c++){var e=this[c];var b=d.apply(e,[c,e]);if(b===false){break}}}return this},toArray:function(){var c=[];for(var b=0;b<this.length;b++){c.push(this[b])}return c},slice:function(f,b){var e=[];var c=this.length;
if(b==null){b=c}if(f<0){f=c+f}for(var d=f;d>=0&&d<b&&d<c;d++){e.push(this[d])}return new a.Collection(this.cy(),e)},size:function(){return this.length},eq:function(b){return this[b]},empty:function(){return this.length===0},nonempty:function(){return !this.empty()}})})(cytoscape);(function(b){function c(d){return function(){var e=arguments;if(e.length===2){var j=e[0];var g=e[1];this.bind(d.event,j,g)}else{if(e.length===1){var g=e[0];this.bind(d.event,g)}else{if(e.length===0){for(var f=0;f<this.length;
f++){var h=this[f];if(!d.ableField||h._private[d.ableField]){h._private[d.field]=d.value}}this.updateStyle();this.trigger(d.event)}}}return this}}function a(d){b.elesfn[d.field]=function(){var e=this[0];if(e){return e._private[d.field]}};b.elesfn[d.on]=c({event:d.on,field:d.field,ableField:d.ableField,value:true});b.elesfn[d.off]=c({event:d.off,field:d.field,ableField:d.ableField,value:false})}a({field:"locked",on:"lock",off:"unlock"});a({field:"grabbable",on:"grabify",off:"ungrabify"});a({field:"selected",ableField:"selectable",on:"select",off:"unselect"});
a({field:"selectable",on:"selectify",off:"unselectify"});b.elesfn.grabbed=function(){var d=this[0];if(d){return d._private.grabbed}};a({field:"active",on:"activate",off:"unactivate"});b.elesfn.inactive=function(){var d=this[0];if(d){return !d._private.active}}})(cytoscape);(function(b){b.fn.eles({nodes:function(e){return this.filter(function(g,f){return f.isNode()}).filter(e)},edges:function(e){return this.filter(function(g,f){return f.isEdge()}).filter(e)},filter:function(f){var j=this._private.cy;
if(b.is.fn(f)){var h=[];for(var e=0;e<this.length;e++){var g=this[e];if(f.apply(g,[e,g])){h.push(g)}}return new b.Collection(j,h)}else{if(b.is.string(f)||b.is.elementOrCollection(f)){return new b.Selector(f).filter(this)}else{if(f===undefined){return this}}}return new b.Collection(j)},not:function(h){var k=this._private.cy;if(!h){return this}else{if(b.is.string(h)){h=this.filter(h)}var j=[];for(var g=0;g<this.length;g++){var f=this[g];var e=h._private.ids[f.id()];if(!e){j.push(f)}}return new b.Collection(k,j)
}},intersect:function(m){var o=this;var i=this._private.cy;if(b.is.string(m)){var j=m;return this.filter(j)}var e=[];var l=this;var k=m;var n=this.length<m.length;var h=n?l._private.ids:k._private.ids;var g=n?k._private.ids:l._private.ids;for(var f in h){var p=g[f];if(p){e.push(p)}}return new b.Collection(i,e)},add:function(m){var n=this;var g=this._private.cy;if(!m){return this}if(b.is.string(m)){var h=m;m=g.elements(h)}var e=[];var f={};function l(i){if(!i){return}if(!f[i.id()]){e.push(i);f[i.id()]=true
}}for(var k=0;k<n.length;k++){var j=n[k];l(j)}for(var k=0;k<m.length;k++){var j=m[k];l(j)}return new b.Collection(g,e)}});b.fn.eles({neighborhood:function(m){var e=[];var l=this._private.cy;var f=this.nodes();for(var p=0;p<f.length;p++){var k=f[p];var h=k.connectedEdges();for(var o=0;o<h.length;o++){var g=h[o];var n=g.connectedNodes().not(k);if(n.length>0){e.push(n[0])}e.push(g[0])}}return(new b.Collection(l,e)).filter(m)},closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)
},openNeighborhood:function(e){return this.neighborhood(e)}});b.fn.eles({source:d({attr:"source"}),target:d({attr:"target"})});function d(e){return function(f){var h=[];var g=this.edges();var n=this._private.cy;for(var j=0;j<g.length;j++){var k=g[j];var m=k._private.data[e.attr];var l=n.getElementById(m);if(l.length>0){h.push(l)}}return new b.Collection(n,h).filter(f)}}b.fn.eles({edgesWith:a(),edgesTo:a({thisIs:"source"})});function a(e){return function(s){var f=[];var j=this._private.cy;var g=e||{};
if(b.is.string(s)){s=j.$(s)}var l=s.connectedEdges();var t=this._private.ids;for(var m=0;m<l.length;m++){var h=l[m];var n;var o=h._private.data;if(g.thisIs){var k=o[g.thisIs];n=t[k]}else{n=t[o.source]||t[o.target]}if(n){f.push(h)}}return new b.Collection(j,f)}}b.fn.eles({connectedEdges:function(l){var e=[];var k=this._private.cy;var f=this.nodes();for(var o=0;o<f.length;o++){var h=f[o];var n=h._private.edges;for(var m=0;m<n.length;m++){var g=n[m];e.push(g)}}return new b.Collection(k,e).filter(l)},connectedNodes:function(e){var j=[];
var k=this._private.cy;var f=this.edges();for(var g=0;g<f.length;g++){var h=f[g];j.push(h.source()[0]);j.push(h.target()[0])}return new b.Collection(k,j).filter(e)},parallelEdges:c(),codirectedEdges:c({codirected:true}),parallelIndex:function(){var g=this[0];if(g.isEdge()){var e=g.source()[0];var m=e._private.edges;var l=0;for(var j=0;j<m.length;j++){var h=m[j];var o=h===g;if(o){return l}var n=g._private.data.source===h._private.data.source&&g._private.data.target===h._private.data.target;var f=g._private.data.source===h._private.data.target&&g._private.data.target===h._private.data.source;
var k=n||f;if(k){l++}}}},parallelSize:function(){var g=this[0];if(g.isEdge()){var e=g.source()[0];var m=e._private.edges;var j=0;for(var k=0;k<m.length;k++){var h=m[k];var n=g._private.data.source===h._private.data.source&&g._private.data.target===h._private.data.target;var f=g._private.data.source===h._private.data.target&&g._private.data.target===h._private.data.source;var l=n||f;if(l){j++}}return j}}});function c(f){var e={codirected:false};f=b.util.extend({},e,f);return function(B){var l=this._private.cy;
var v=[];var k=this.edges();var w=f;for(var C=0;C<k.length;C++){var u=k[C];var D=u.source()[0];var s=D.id();var z=u.target()[0];var n=z.id();var y=D._private.edges;for(var A=0;A<y.length;A++){var t=y[A];var g=t._private.data;var m=g.target;var o=g.source;var h=m===n&&o===s;var x=s===m&&n===o;if((w.codirected&&h)||(!w.codirected&&(h||x))){v.push(t)}}}return new b.Collection(l,v).filter(B)}}b.fn.eles({parent:function(e){var f=[];var k=this._private.cy;for(var g=0;g<this.length;g++){var j=this[g];var h=k.getElementById(j._private.data.parent);
if(h.size()>0){f.push(h)}}return new b.Collection(k,f).filter(e)},parents:function(f){var g=[];var e=this.parent();while(e.nonempty()){for(var h=0;h<e.length;h++){var j=e[h];g.push(j)}e=e.parent()}return new b.Collection(this.cy(),g).filter(f)},children:function(e){var g=[];for(var f=0;f<this.length;f++){var h=this[f];g=g.concat(h._private.children)}return new b.Collection(this.cy(),g).filter(e)},siblings:function(e){return this.parent().children().not(this).filter(e)},descendants:function(e){var f=[];
function g(h){for(var j=0;j<h.length;j++){var k=h[j];f.push(k);if(k.children().nonempty()){g(k.children())}}}g(this.children());return new b.Collection(this.cy(),f).filter(e)}})})(cytoscape);(function($$){$$.fn.selector=function(map,options){for(var name in map){var fn=map[name];$$.Selector.prototype[name]=fn}};$$.Selector=function(onlyThisGroup,selector){if(!(this instanceof $$.Selector)){return new $$.Selector(onlyThisGroup,selector)}if(selector===undefined&&onlyThisGroup!==undefined){selector=onlyThisGroup;
onlyThisGroup=undefined}var self=this;self._private={selectorText:null,invalid:true};function newQuery(){return{classes:[],colonSelectors:[],data:[],group:null,ids:[],meta:[],collection:null,filter:null,parent:null,ancestor:null,subject:null,child:null,descendant:null}}if(!selector||($$.is.string(selector)&&selector.match(/^\s*$/))){if(onlyThisGroup==null){self.length=0}else{self[0]=newQuery();self[0].group=onlyThisGroup;self.length=1}}else{if($$.is.element(selector)){var collection=new $$.Collection(self.cy(),[selector]);
self[0]=newQuery();self[0].collection=collection;self.length=1}else{if($$.is.collection(selector)){self[0]=newQuery();self[0].collection=selector;self.length=1}else{if($$.is.fn(selector)){self[0]=newQuery();self[0].filter=selector;self.length=1}else{if($$.is.string(selector)){var metaChar="[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]";var variable="(?:[\\w-]|(?:\\\\"+metaChar+"))+";var comparatorOp="=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=";var boolOp="\\?|\\!|\\^";
var string="\"(?:\\\\\"|[^\"])+\"|'(?:\\\\'|[^'])+'";var number=$$.util.regex.number;var value=string+"|"+number;var meta="degree|indegree|outdegree";var separator="\\s*,\\s*";var className=variable;var descendant="\\s+";var child="\\s+>\\s+";var subject="\\$";var id=variable;function cleanMetaChars(str){return str.replace(new RegExp("\\\\("+metaChar+")","g"),"\1")}var ops=comparatorOp.split("|");for(var i=0;i<ops.length;i++){var op=ops[i];comparatorOp+="|@"+op}var currentSubject=null;var exprs={group:{query:true,regex:"(node|edge|\\*)",populate:function(group){this.group=group=="*"?group:group+"s"
}},state:{query:true,regex:"(:selected|:unselected|:locked|:unlocked|:visible|:hidden|:grabbed|:free|:removed|:inside|:grabbable|:ungrabbable|:animated|:unanimated|:selectable|:unselectable|:parent|:child|:active|:inactive|:touch)",populate:function(state){this.colonSelectors.push(state)}},id:{query:true,regex:"\\#("+id+")",populate:function(id){this.ids.push(cleanMetaChars(id))}},className:{query:true,regex:"\\.("+className+")",populate:function(className){this.classes.push(cleanMetaChars(className))
}},dataExists:{query:true,regex:"\\[\\s*("+variable+")\\s*\\]",populate:function(variable){this.data.push({field:cleanMetaChars(variable)})}},dataCompare:{query:true,regex:"\\[\\s*("+variable+")\\s*("+comparatorOp+")\\s*("+value+")\\s*\\]",populate:function(variable,comparatorOp,value){this.data.push({field:cleanMetaChars(variable),operator:comparatorOp,value:value})}},dataBool:{query:true,regex:"\\[\\s*("+boolOp+")\\s*("+variable+")\\s*\\]",populate:function(boolOp,variable){this.data.push({field:cleanMetaChars(variable),operator:boolOp})
}},metaCompare:{query:true,regex:"\\{\\s*("+meta+")\\s*("+comparatorOp+")\\s*("+number+")\\s*\\}",populate:function(meta,comparatorOp,number){this.meta.push({field:cleanMetaChars(meta),operator:comparatorOp,value:number})}},nextQuery:{separator:true,regex:separator,populate:function(){self[++i]=newQuery();currentSubject=null}},child:{separator:true,regex:child,populate:function(){var childQuery=newQuery();childQuery.parent=this;childQuery.subject=currentSubject;self[i]=childQuery}},descendant:{separator:true,regex:descendant,populate:function(){var descendantQuery=newQuery();
descendantQuery.ancestor=this;descendantQuery.subject=currentSubject;self[i]=descendantQuery}},subject:{modifier:true,regex:subject,populate:function(){if(currentSubject!=null&&this.subject!=this){$$.util.error("Redefinition of subject in selector `%s`",selector);return false}currentSubject=this;this.subject=this},}};var j=0;for(var name in exprs){exprs[j]=exprs[name];exprs[j].name=name;j++}exprs.length=j;self._private.selectorText=selector;var remaining=selector;var i=0;function consumeExpr(expectation){var expr;
var match;var name;for(var j=0;j<exprs.length;j++){var e=exprs[j];var n=e.name;if($$.is.fn(expectation)&&!expectation(n,e)){continue}var m=remaining.match(new RegExp("^"+e.regex));if(m!=null){match=m;expr=e;name=n;var consumed=m[0];remaining=remaining.substring(consumed.length);break}}return{expr:expr,match:match,name:name}}function consumeWhitespace(){var match=remaining.match(/^\s+/);if(match){var consumed=match[0];remaining=remaining.substring(consumed.length)}}self[0]=newQuery();consumeWhitespace();
for(;;){var check=consumeExpr();if(check.expr==null){$$.util.error("The selector `%s` is invalid",selector);return}else{var args=[];for(var j=1;j<check.match.length;j++){args.push(check.match[j])}var ret=check.expr.populate.apply(self[i],args);if(ret===false){return}}if(remaining.match(/^\s*$/)){break}}self.length=i+1;for(j=0;j<self.length;j++){var query=self[j];if(query.subject!=null){for(;;){if(query.subject==query){break}if(query.parent!=null){var parent=query.parent;var child=query;child.parent=null;
parent.child=child;query=parent}else{if(query.ancestor!=null){var ancestor=query.ancestor;var descendant=query;descendant.ancestor=null;ancestor.descendant=descendant;query=ancestor}else{$.error("When adjusting references for the selector `%s`, neither parent nor ancestor was found");break}}}self[j]=query.subject}}if(onlyThisGroup!=null){for(var j=0;j<self.length;j++){if(self[j].group!=null&&self[j].group!=onlyThisGroup){$.error("Group `%s` conflicts with implicit group `%s` in selector `%s`",self[j].group,onlyThisGroup,selector);
return}self[j].group=onlyThisGroup}}}else{$.error("A selector must be created from a string; found %o",selector);return}}}}}self._private.invalid=false};$$.selfn=$$.Selector.prototype;$$.selfn.size=function(){return this.length};$$.selfn.eq=function(i){return this[i]};$$.selfn.find=function(){};$$.selfn.filter=function(collection,addLiveFunction){var self=this;var cy=collection.cy();if(self._private.invalid){return new $$.Collection(cy)}var queryMatches=function(query,element){if(query.group!=null&&query.group!="*"&&query.group!=element._private.group){return false
}var allColonSelectorsMatch=true;for(var k=0;k<query.colonSelectors.length;k++){var sel=query.colonSelectors[k];var renderer=cy.renderer();switch(sel){case":selected":allColonSelectorsMatch=element.selected();break;case":unselected":allColonSelectorsMatch=!element.selected();break;case":selectable":allColonSelectorsMatch=element.selectable();break;case":unselectable":allColonSelectorsMatch=!element.selectable();break;case":locked":allColonSelectorsMatch=element.locked();break;case":unlocked":allColonSelectorsMatch=!element.locked();
break;case":visible":allColonSelectorsMatch=element.visible();break;case":hidden":allColonSelectorsMatch=!element.visible();break;case":grabbed":allColonSelectorsMatch=element.grabbed();break;case":free":allColonSelectorsMatch=!element.grabbed();break;case":removed":allColonSelectorsMatch=element.removed();break;case":inside":allColonSelectorsMatch=!element.removed();break;case":grabbable":allColonSelectorsMatch=element.grabbable();break;case":ungrabbable":allColonSelectorsMatch=!element.grabbable();
break;case":animated":allColonSelectorsMatch=element.animated();break;case":unanimated":allColonSelectorsMatch=!element.animated();break;case":parent":allColonSelectorsMatch=element.children().nonempty();break;case":child":allColonSelectorsMatch=element.parent().nonempty();break;case":active":allColonSelectorsMatch=element.active();break;case":inactive":allColonSelectorsMatch=!element.active();break;case":touch":allColonSelectorsMatch=window&&document&&(("ontouchstart" in window)||window.DocumentTouch&&document instanceof DocumentTouch);
break}if(!allColonSelectorsMatch){break}}if(!allColonSelectorsMatch){return false}var allIdsMatch=true;for(var k=0;k<query.ids.length;k++){var id=query.ids[k];var actualId=element._private.data.id;allIdsMatch=allIdsMatch&&(id==actualId);if(!allIdsMatch){break}}if(!allIdsMatch){return false}var allClassesMatch=true;for(var k=0;k<query.classes.length;k++){var cls=query.classes[k];allClassesMatch=allClassesMatch&&element.hasClass(cls);if(!allClassesMatch){break}}if(!allClassesMatch){return false}function operandsMatch(params){var allDataMatches=true;
for(var k=0;k<query[params.name].length;k++){var data=query[params.name][k];var operator=data.operator;var value=data.value;var field=data.field;var matches;if(operator!=null&&value!=null){var fieldStr=""+params.fieldValue(field);var valStr=""+eval(value);var caseInsensitive=false;if(operator.charAt(0)=="@"){fieldStr=fieldStr.toLowerCase();valStr=valStr.toLowerCase();operator=operator.substring(1);caseInsensitive=true}if(operator=="="){operator="=="}switch(operator){case"*=":matches=fieldStr.search(valStr)>=0;
break;case"$=":matches=new RegExp(valStr+"$").exec(fieldStr)!=null;break;case"^=":matches=new RegExp("^"+valStr).exec(fieldStr)!=null;break;default:if(caseInsensitive){var expr="fieldStr "+operator+" valStr";matches=eval(expr)}else{var expr=params.fieldRef(field)+" "+operator+" "+value;matches=eval(expr)}}}else{if(operator!=null){switch(operator){case"?":matches=params.fieldTruthy(field);break;case"!":matches=!params.fieldTruthy(field);break;case"^":matches=params.fieldUndefined(field);break}}else{matches=!params.fieldUndefined(field)
}}if(!matches){allDataMatches=false;break}}return allDataMatches}var allDataMatches=operandsMatch({name:"data",fieldValue:function(field){return element._private.data[field]},fieldRef:function(field){return"element._private.data."+field},fieldUndefined:function(field){return element._private.data[field]===undefined},fieldTruthy:function(field){if(element._private.data[field]){return true}return false}});if(!allDataMatches){return false}var allMetaMatches=operandsMatch({name:"meta",fieldValue:function(field){return element[field]()
},fieldRef:function(field){return"element."+field+"()"},fieldUndefined:function(field){return element[field]()==undefined},fieldTruthy:function(field){if(element[field]()){return true}return false}});if(!allMetaMatches){return false}if(query.collection!=null){var matchesAny=query.collection._private.ids[element.id()]!=null;if(!matchesAny){return false}}if(query.filter!=null&&element.collection().filter(query.filter).size()==0){return false}function confirmRelations(query,elements){if(query!=null){var matches=false;
elements=elements();for(var i=0;i<elements.size();i++){if(queryMatches(query,elements.eq(i))){matches=true;break}}return matches}else{return true}}if(!confirmRelations(query.parent,function(){return element.parent()})){return false}if(!confirmRelations(query.ancestor,function(){return element.parents()})){return false}if(!confirmRelations(query.child,function(){return element.children()})){return false}if(!confirmRelations(query.descendant,function(){return element.descendants()})){return false}return true
};var selectorFunction=function(i,element){for(var j=0;j<self.length;j++){var query=self[j];if(queryMatches(query,element)){return true}}return false};if(self._private.selectorText==null){selectorFunction=function(){return true}}var filteredCollection=collection.filter(selectorFunction);return filteredCollection};$$.selfn.toString=$$.selfn.selector=function(){var str="";function clean(obj){if($$.is.string(obj)){return obj}return""}function queryToString(query){var str="";var group=clean(query.group);
str+=group.substring(0,group.length-1);for(var j=0;j<query.data.length;j++){var data=query.data[j];str+="["+data.field+clean(data.operator)+clean(data.value)+"]"}for(var j=0;j<query.meta.length;j++){var meta=query.meta[j];str+="{"+meta.field+clean(meta.operator)+clean(meta.value)+"}"}for(var j=0;j<query.colonSelectors.length;j++){var sel=query.colonSelectors[i];str+=sel}for(var j=0;j<query.ids.length;j++){var sel="#"+query.ids[i];str+=sel}for(var j=0;j<query.classes.length;j++){var sel="."+query.classes[i];
str+=sel}if(query.parent!=null){str=queryToString(query.parent)+" > "+str}if(query.ancestor!=null){str=queryToString(query.ancestor)+" "+str}if(query.child!=null){str+=" > "+queryToString(query.child)}if(query.descendant!=null){str+=" "+queryToString(query.descendant)}return str}for(var i=0;i<this.length;i++){var query=this[i];str+=queryToString(query);if(this.length>1&&i<this.length-1){str+=", "}}return str}})(cytoscape);(function(a){function b(c){}b.prototype.notify=function(c){};a("renderer","null",b)
})(cytoscape);(function(t){var l=function(){return Date.now()};var b={};var n={};var c=u.prototype;var e=5,x=0,d=2,A=4,a=2;function u(B){this.data={select:[0,0,0,0,0],renderer:this,cy:B.cy,container:B.cy.container(),canvases:new Array(e),canvasRedrawReason:new Array(e),canvasNeedsRedraw:new Array(e),bufferCanvases:new Array(a)};this.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:false,initialPan:[null,null],capture:false};this.timeoutData={panTimeout:null};this.dragData={possibleDragElements:[]};
this.touchData={start:null,capture:false,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:true,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]};this.zoomData={freeToZoom:false,lastPointerX:null};this.redraws=0;this.init();for(var C=0;C<e;C++){this.data.canvases[C]=document.createElement("canvas");this.data.canvases[C].style.position="absolute";this.data.canvases[C].setAttribute("data-id","layer"+C);this.data.canvases[C].style.zIndex=String(-C);
this.data.canvases[C].style.visibility="hidden";this.data.container.appendChild(this.data.canvases[C]);this.data.canvasRedrawReason[C]=new Array();this.data.canvasNeedsRedraw[C]=false}for(var C=0;C<a;C++){this.data.bufferCanvases[C]=document.createElement("canvas");this.data.bufferCanvases[C].style.position="absolute";this.data.bufferCanvases[C].setAttribute("data-id","buffer"+C);this.data.bufferCanvases[C].style.zIndex=String(-C);this.data.bufferCanvases[C].style.visibility="visible";this.data.container.appendChild(this.data.bufferCanvases[C])
}}u.prototype.notify=function(i){if(i.type=="add"||i.type=="remove"){this.updateNodesCache();this.updateEdgesCache()}if(i.type=="load"){this.load()}if(i.type=="viewport"){this.data.canvasNeedsRedraw[x]=true;this.data.canvasRedrawReason[x].push("viewchange")}this.data.canvasNeedsRedraw[d]=true;this.data.canvasRedrawReason[d].push("notify");this.data.canvasNeedsRedraw[A]=true;this.data.canvasRedrawReason[A].push("notify");this.redraws++;this.redraw()};u.prototype.png=function(){var i=this.data.bufferCanvases[0];
return i.toDataURL("image/png")};u.prototype.load=function(){var B=this;var F=function(U,P,T){if(!P){var R=U.parents();for(var S=0;S<R.size();S++){if(R[S]._private.selected){return}}}var V=U.descendants();for(var S=0;S<V.size();S++){if(P||!V[S]._private.selected){V[S]._private.rscratch.inDragLayer=true;B.dragData.possibleDragElements.push(V[S]);for(var Q=0;Q<V[S]._private.edges.length;Q++){V[S]._private.edges[Q]._private.rscratch.inDragLayer=true}}}};var E=function(R,Q){R._private.grabbed=true;R._private.rscratch.inDragLayer=true;
B.dragData.possibleDragElements.push(R);for(var P=0;P<R._private.edges.length;P++){R._private.edges[P]._private.rscratch.inDragLayer=true}R.trigger(Q)};var O=function(U,S){var T=U;while(T.parent().nonempty()){T=T.parent()[0]}if(T==U){return}var P=T.descendants().add(T);for(var R=0;R<P.size();R++){P[R]._private.rscratch.inDragLayer=S;for(var Q=0;Q<P[R]._private.edges.length;Q++){P[R]._private.edges[Q]._private.rscratch.inDragLayer=S}}};u.prototype.nodeIsDraggable=function(P){if(P._private.style.opacity.value!=0&&P._private.style.visibility.value=="visible"&&!P._private.locked&&P._private.grabbable){return true
}return false};B.data.container.addEventListener("mousedown",function(S){B.hoverData.capture=true;var P=B.data.cy;var V=B.projectIntoViewport(S.pageX,S.pageY);var W=B.data.select;var R=B.findNearestElement(V[0],V[1]);var Y=B.hoverData.down;var T=B.dragData.possibleDragElements;var U=new t.Event(S,{type:"grab"});if(S.button==0){if(R){R.activate()}if(R!=null&&B.nodeIsDraggable(R)){if(R._private.group=="nodes"&&R._private.selected==false){T=B.dragData.possibleDragElements=[];E(R,U);if(R._private.style.width.value=="auto"||R._private.style.height.value=="auto"){F(R,true,U)
}O(R,true)}if(R._private.group=="nodes"&&R._private.selected==true){T=B.dragData.possibleDragElements=[];var X=P.$("node:selected");for(var Q=0;Q<X.length;Q++){if(B.nodeIsDraggable(X[Q])){E(X[Q],U);if(X[Q]._private.style.width.value=="auto"||X[Q]._private.style.height.value=="auto"){F(X[Q],false,U)}O(X[Q],true)}}}R.trigger(new t.Event(S,{type:"mousedown"})).trigger(new t.Event(S,{type:"tapstart"})).trigger(new t.Event(S,{type:"vmousedown"}))}else{if(R==null){P.trigger(new t.Event(S,{type:"mousedown"})).trigger(new t.Event(S,{type:"tapstart"})).trigger(new t.Event(S,{type:"vmousedown"}))
}}B.hoverData.down=R;B.hoverData.downTime=(new Date()).getTime();if(R==null){W[4]=1}}else{if(S.button==1){B.hoverData.dragging=true;B.hoverData.initialPan=[P.pan().x,P.pan().y]}}W[0]=W[2]=V[0];W[1]=W[3]=V[1];B.redraw()},false);window.addEventListener("mousemove",function(af){var U=false;var Q=B.data.cy;var T=B.projectIntoViewport(af.pageX,af.pageY);var Y=B.data.select;var ag=B.findNearestElement(T[0],T[1]);var W=B.hoverData.last;var X=B.hoverData.down;var ab=[T[0]-Y[2],T[1]-Y[3]];var Z=B.getCachedNodes();
var P=B.getCachedEdges();var S=B.dragData.possibleDragElements;var aa=B.hoverData.capture;var R=af.shiftKey;if(!aa){var V=B.findContainerPageCoords();if(af.pageX>V[0]&&af.pageX<V[0]+B.data.container.clientWidth&&af.pageY>V[1]&&af.pageY<V[1]+B.data.container.clientHeight){}else{return}}var ac=new t.Event(af,{type:"mousemove"});if(ag!=null){ag.trigger(ac)}else{if(ag==null){Q.trigger(ac)}}if(B.hoverData.dragging){U=true;if(Q.panningEnabled()){Q.panBy({x:ab[0]*Q.zoom(),y:ab[1]*Q.zoom()})}T=B.projectIntoViewport(af.pageX,af.pageY)
}else{if(Y[4]==1&&X==null&&(new Date()).getTime()-B.hoverData.downTime>400&&(Math.abs(Y[3]-Y[1])+Math.abs(Y[2]-Y[0])<4)&&Q.panningEnabled()){B.hoverData.dragging=true;Y[4]=0}else{if(ag!=W){if(W){W.trigger(new t.Event(af,{type:"mouseout"}))}if(ag){ag.trigger(new t.Event(af,{type:"mouseover"}))}B.hoverData.last=ag}if(X&&X.isNode()&&X._private.grabbable&&!X._private.locked){var ae=new t.Event(af,{type:"position"});for(var ad=0;ad<S.length;ad++){if(S[ad]._private.group=="nodes"&&B.nodeIsDraggable(S[ad])){S[ad]._private.position.x+=ab[0];
S[ad]._private.position.y+=ab[1];S[ad].trigger(ae)}}if(Y[2]==Y[0]&&Y[3]==Y[1]){B.data.canvasNeedsRedraw[A]=true;B.data.canvasRedrawReason[A].push("Node(s) and edge(s) moved to drag layer")}B.data.canvasNeedsRedraw[d]=true;B.data.canvasRedrawReason[d].push("Nodes dragged")}B.data.canvasNeedsRedraw[x]=true;B.data.canvasRedrawReason[x].push("Mouse moved, redraw selection box");U=true}}Y[2]=T[0];Y[3]=T[1];B.redraw();if(U){if(af.stopPropagation){af.stopPropagation()}if(af.preventDefault){af.preventDefault()
}af.cancelBubble=true;af.returnValue=false;return false}},false);window.addEventListener("mouseup",function(aa){var af=B.hoverData.capture;if(!af){return}B.hoverData.capture=false;var S=B.data.cy;var ac=B.projectIntoViewport(aa.pageX,aa.pageY);var ad=B.data.select;var Z=B.findNearestElement(ac[0],ac[1]);var Q=B.getCachedNodes();var U=B.getCachedEdges();var ab=B.dragData.possibleDragElements;var ae=B.hoverData.down;var Y=aa.shiftKey;if(ae){ae.unactivate()}if((Z==null||Z!=ae)&&!(Math.pow(ad[2]-ad[0],2)+Math.pow(ad[3]-ad[1],2)>7&&ad[4])&&!B.hoverData.dragging){S.$(":selected").unselect();
if(ab.length>0){B.data.canvasNeedsRedraw[A]=true;B.data.canvasRedrawReason[A].push("De-select")}B.dragData.possibleDragElements=ab=[]}if(Math.pow(ad[2]-ad[0],2)+Math.pow(ad[3]-ad[1],2)==0){if(Z!=null){Z.trigger(new t.Event(aa,{type:"click"})).trigger(new t.Event(aa,{type:"tap"})).trigger(new t.Event(aa,{type:"vclick"}))}else{if(Z==null){S.trigger(new t.Event(aa,{type:"click"})).trigger(new t.Event(aa,{type:"tap"})).trigger(new t.Event(aa,{type:"vclick"}))}}}if(Z!=null){Z.trigger(new t.Event(aa,{type:"mouseup"})).trigger(new t.Event(aa,{type:"tapend"})).trigger(new t.Event(aa,{type:"vmouseup"}))
}else{if(Z==null){S.trigger(new t.Event(aa,{type:"mouseup"})).trigger(new t.Event(aa,{type:"tapend"})).trigger(new t.Event(aa,{type:"vmouseup"}))}}if(Z==ae&&(Math.pow(ad[2]-ad[0],2)+Math.pow(ad[3]-ad[1],2)<7)){if(Z!=null&&Z._private.selectable){if(!Y){S.$(":selected").unselect()}if(Z.selected()){Z.unselect()}else{Z.select()}O(Z,false);B.data.canvasNeedsRedraw[A]=true;B.data.canvasRedrawReason[A].push("sglslct")}}else{if(Z==ae){if(Z!=null&&Z._private.grabbed){var R=new t.Event(aa,{type:"free"});Z._private.grabbed=false;
Z.trigger(R);var W=Z._private.edges;for(var T=0;T<W.length;T++){W[T]._private.rscratch.inDragLayer=false}O(Z,false)}}}if(Math.pow(ad[2]-ad[0],2)+Math.pow(ad[3]-ad[1],2)>7&&ad[4]){if(!Y){S.$(":selected").unselect()}var X=B.getAllInBox(ad[0],ad[1],ad[2],ad[3]);var P=new t.Event(aa,{type:"select"});for(var V=0;V<X.length;V++){if(X[V]._private.selectable){X[V]._private.selected=true;X[V].trigger(P);X[V].updateStyle(false);ab.push(X[V])}}if(X.length>0){B.data.canvasNeedsRedraw[A]=true;B.data.canvasRedrawReason[A].push("Selection")
}}B.hoverData.dragging=false;if(!ad[4]){var R=new t.Event(aa,{type:"free"});for(var V=0;V<ab.length;V++){if(ab[V]._private.group=="nodes"){ab[V]._private.rscratch.inDragLayer=false;var W=ab[V]._private.edges;for(var T=0;T<W.length;T++){W[T]._private.rscratch.inDragLayer=false}O(ab[V],false)}else{if(ab[V]._private.group=="edges"){ab[V]._private.rscratch.inDragLayer=false}}ab[V].trigger(R)}B.data.canvasNeedsRedraw[d]=true;B.data.canvasRedrawReason[d].push("Node/nodes back from drag");B.data.canvasNeedsRedraw[A]=true;
B.data.canvasRedrawReason[A].push("Node/nodes back from drag")}ad[4]=0;B.hoverData.down=null;B.data.canvasNeedsRedraw[x]=true;B.data.canvasRedrawReason[x].push("Mouse up, selection box gone");B.redraw()},false);var K=function(R){var T=B.data.cy;var S=B.projectIntoViewport(R.pageX,R.pageY);var Q=[S[0]*T.zoom()+T.pan().x,S[1]*T.zoom()+T.pan().y];if(B.zoomData.freeToZoom){R.preventDefault();var P=R.wheelDeltaY/1000||R.detail/-8.4;if(T.panningEnabled()&&T.zoomingEnabled()){T.zoom({level:T.zoom()*Math.pow(10,P),position:{x:Q[0],y:Q[1]}})
}}};B.data.container.addEventListener("mousewheel",K,false);B.data.container.addEventListener("DOMMouseScroll",K,false);B.data.container.addEventListener("mousemove",function(P){if(B.zoomData.lastPointerX&&B.zoomData.lastPointerX!=P.pageX&&!B.zoomData.freeToZoom){B.zoomData.freeToZoom=true}B.zoomData.lastPointerX=P.pageX},false);B.data.container.addEventListener("mouseout",function(P){B.zoomData.freeToZoom=false;B.zoomData.lastPointerX=null},false);B.data.container.addEventListener("mouseout",function(P){B.data.cy.trigger(new t.Event(P,{type:"mouseout"}))
},false);B.data.container.addEventListener("mouseover",function(P){B.data.cy.trigger(new t.Event(P,{type:"mouseover"}))},false);var H,N,J,i;var M;var D,L;var I,G;function C(Q,S,P,R){return Math.sqrt((P-Q)*(P-Q)+(R-S)*(R-S))}B.data.container.addEventListener("touchstart",function(ag){ag.preventDefault();B.touchData.capture=true;var S=B.data.cy;var aa=B.getCachedNodes();var R=B.getCachedEdges();var Q=B.touchData.now;var ae=B.touchData.earlier;if(ag.touches[0]){var U=B.projectIntoViewport(ag.touches[0].pageX,ag.touches[0].pageY);
Q[0]=U[0];Q[1]=U[1]}if(ag.touches[1]){var U=B.projectIntoViewport(ag.touches[1].pageX,ag.touches[1].pageY);Q[2]=U[0];Q[3]=U[1]}if(ag.touches[2]){var U=B.projectIntoViewport(ag.touches[2].pageX,ag.touches[2].pageY);Q[4]=U[0];Q[5]=U[1]}if(ag.touches[1]){var T=B.findContainerPageCoords();G=T[1];I=T[0];H=ag.touches[0].pageX-I;N=ag.touches[0].pageY-G;J=ag.touches[1].pageX-I;i=ag.touches[1].pageY-G;var Z=S.pan();var P=S.zoom();M=C(H,N,J,i);D=[(H+J)/2,(N+i)/2];L=[(D[0]-Z.x)/P,(D[1]-Z.y)/P]}if(ag.touches[2]){}else{if(ag.touches[1]){}else{if(ag.touches[0]){var ah=B.findNearestElement(Q[0],Q[1]);
if(ah!=null){ah.activate();B.touchData.start=ah;if(ah._private.group=="nodes"&&B.nodeIsDraggable(ah)){ah._private.grabbed=true;ah._private.rscratch.inDragLayer=true;ah.trigger(new t.Event(ag,{type:"grab"}));var X=ah._private.edges;for(var ac=0;ac<X.length;ac++){X[ac]._private.rscratch.inDragLayer=true}var V=B.dragData.touchDragEles=[];if(ah.selected()){var W=S.$("node:selected");for(var ab=0;ab<W.length;ab++){var af=W[ab];if(B.nodeIsDraggable(af)){V.push(af);var X=af._private.edges;for(var ac=0;ac<X.length;
ac++){X[ac]._private.rscratch.inDragLayer=true}}}}else{V.push(ah)}}ah.trigger(new t.Event(ag,{type:"touchstart"})).trigger(new t.Event(ag,{type:"tapstart"})).trigger(new t.Event(ag,{type:"vmousdown"}))}else{if(ah==null){S.trigger(new t.Event(ag,{type:"touchstart"})).trigger(new t.Event(ag,{type:"tapstart"})).trigger(new t.Event(ag,{type:"vmousedown"}))}}for(var ad=0;ad<Q.length;ad++){ae[ad]=Q[ad];B.touchData.startPosition[ad]=Q[ad]}B.touchData.singleTouchMoved=false;B.touchData.singleTouchStartTime=l();
var Y=setTimeout(function(){if(B.touchData.singleTouchMoved==false&&l()-B.touchData.singleTouchStartTime<1040&&l()-B.touchData.singleTouchStartTime>960){if(B.touchData.start){B.touchData.start.trigger(new t.Event(ag,{type:"taphold"}))}else{B.data.cy.trigger(new t.Event(ag,{type:"taphold"}))}}},1000)}}}B.redraw()},true);window.addEventListener("touchmove",function(au){var ai=B.touchData.capture;if(!ai){return}au.preventDefault();var S=B.data.cy;var ah=B.getCachedNodes();var R=B.getCachedEdges();var Q=B.touchData.now;
var aq=B.touchData.earlier;if(au.touches[0]){var Y=B.projectIntoViewport(au.touches[0].pageX,au.touches[0].pageY);Q[0]=Y[0];Q[1]=Y[1]}if(au.touches[1]){var Y=B.projectIntoViewport(au.touches[1].pageX,au.touches[1].pageY);Q[2]=Y[0];Q[3]=Y[1]}if(au.touches[2]){var Y=B.projectIntoViewport(au.touches[2].pageX,au.touches[2].pageY);Q[4]=Y[0];Q[5]=Y[1]}var am=[];for(var an=0;an<Q.length;an++){am[an]=Q[an]-aq[an]}if(au.touches[1]&&S.zoomingEnabled()&&S.panningEnabled()){var P=au.touches[0].pageX-I,ab=au.touches[0].pageY-G;
var af=au.touches[1].pageX-I,ax=au.touches[1].pageY-G;var ag=C(P,ab,af,ax);var ad=ag/M;if(ad!=1){var ac=P-H;var aa=ab-N;var ar=af-J;var ap=ax-i;var aw=(ac+ar)/2;var av=(aa+ap)/2;var X=S.zoom();var W=X*ad;var al=S.pan();var U=L[0]*X+al.x;var T=L[1]*X+al.y;var ak={x:-W/X*(U-al.x-aw)+U,y:-W/X*(T-al.y-av)+T};S._private.zoom=W;S._private.pan=ak;S.trigger("pan zoom").notify("viewport");M=ag;H=P;N=ab;J=af;i=ax}if(au.touches[0]){var Y=B.projectIntoViewport(au.touches[0].pageX,au.touches[0].pageY);Q[0]=Y[0];
Q[1]=Y[1]}if(au.touches[1]){var Y=B.projectIntoViewport(au.touches[1].pageX,au.touches[1].pageY);Q[2]=Y[0];Q[3]=Y[1]}if(au.touches[2]){var Y=B.projectIntoViewport(au.touches[2].pageX,au.touches[2].pageY);Q[4]=Y[0];Q[5]=Y[1]}}else{if(au.touches[0]){var V=B.touchData.start;if(V!=null&&V._private.group=="nodes"&&B.nodeIsDraggable(V)){var Z=B.dragData.touchDragEles;for(var aj=0;aj<Z.length;aj++){var ae=Z[aj];if(B.nodeIsDraggable(ae)){ae._private.position.x+=am[0];ae._private.position.y+=am[1];ae.trigger(new t.Event(au,{type:"position"}));
ae.trigger(new t.Event(au,{type:"drag"}))}}B.data.canvasNeedsRedraw[d]=true;B.data.canvasRedrawReason[d].push("touchdrag node");if(B.touchData.startPosition[0]==aq[0]&&B.touchData.startPosition[1]==aq[1]){B.data.canvasNeedsRedraw[A]=true;B.data.canvasRedrawReason[A].push("node drag started")}}if(V!=null){V.trigger(new t.Event(au,{type:"touchmove"}))}if(V==null){var at=B.findNearestElement(Q[0],Q[1]);if(at!=null){at.trigger(new t.Event(au,{type:"touchmove"}))}if(at==null){S.trigger(new t.Event(au,{type:"touchmove"}))
}}for(var ao=0;ao<Q.length;ao++){if(Q[ao]&&B.touchData.startPosition[ao]&&Math.abs(Q[ao]-B.touchData.startPosition[ao])>4){B.touchData.singleTouchMoved=true}}if(V==null&&S.panningEnabled()){S.panBy({x:am[0]*S.zoom(),y:am[1]*S.zoom()});var Y=B.projectIntoViewport(au.touches[0].pageX,au.touches[0].pageY);Q[0]=Y[0];Q[1]=Y[1]}}}for(var an=0;an<Q.length;an++){aq[an]=Q[an]}B.redraw()},true);window.addEventListener("touchend",function(Y){var aa=B.touchData.capture;if(!aa){return}B.touchData.capture=false;
Y.preventDefault();var S=B.data.cy;var P=B.getCachedNodes();var V=B.getCachedEdges();var R=B.touchData.now;var T=B.touchData.earlier;if(Y.touches[0]){var Z=B.projectIntoViewport(Y.touches[0].pageX,Y.touches[0].pageY);R[0]=Z[0];R[1]=Z[1]}if(Y.touches[1]){var Z=B.projectIntoViewport(Y.touches[1].pageX,Y.touches[1].pageY);R[2]=Z[0];R[3]=Z[1]}if(Y.touches[2]){var Z=B.projectIntoViewport(Y.touches[2].pageX,Y.touches[2].pageY);R[4]=Z[0];R[5]=Z[1]}if(Y.touches[2]){}else{if(Y.touches[1]){}else{if(Y.touches[0]){}else{if(!Y.touches[0]){var Q=B.touchData.start;
if(Q!=null){Q.unactivate();if(Q._private.grabbed==true){Q._private.grabbed=false;Q.trigger(new t.Event(Y,{type:"free"}));Q._private.rscratch.inDragLayer=false}var W=Q._private.edges;for(var U=0;U<W.length;U++){W[U]._private.rscratch.inDragLayer=false}B.data.canvasNeedsRedraw[d]=true;B.data.canvasRedrawReason[d].push("touchdrag node end");B.data.canvasNeedsRedraw[A]=true;B.data.canvasRedrawReason[A].push("touchdrag node end");Q.trigger(new t.Event(Y,{type:"touchend"})).trigger(new t.Event(Y,{type:"tapend"})).trigger(new t.Event(Y,{type:"vmouseup"}));
B.touchData.start=null}else{var X=B.findNearestElement(R[0],R[1]);if(X!=null){X.trigger(new t.Event(Y,{type:"touchend"})).trigger(new t.Event(Y,{type:"tapend"})).trigger(new t.Event(Y,{type:"vmouseup"}))}if(X==null){S.trigger(new t.Event(Y,{type:"touchend"})).trigger(new t.Event(Y,{type:"tapend"})).trigger(new t.Event(Y,{type:"vmouseup"}))}}if(Q!=null&&Q._private.selectable&&(Math.sqrt(Math.pow(B.touchData.startPosition[0]-R[0],2)+Math.pow(B.touchData.startPosition[1]-R[1],2)))<6){if(Q.selected()){Q.unselect()
}else{Q.select()}B.data.canvasNeedsRedraw[A]=true;B.data.canvasRedrawReason[A].push("sglslct")}if(B.touchData.singleTouchMoved==false){if(Q){Q.trigger(new t.Event(Y,{type:"tap"})).trigger(new t.Event(Y,{type:"vclick"}))}else{S.trigger(new t.Event(Y,{type:"tap"})).trigger(new t.Event(Y,{type:"vclick"}))}}B.touchData.singleTouchMoved=true}}}}for(var U=0;U<R.length;U++){T[U]=R[U]}B.redraw()},true)};u.prototype.init=function(){};u.prototype.getCachedNodes=function(){var i=this.data;var B=this.data.cy;
if(i.cache==undefined){i.cache={}}if(i.cache.cachedNodes==undefined){i.cache.cachedNodes=B.nodes()}return i.cache.cachedNodes};u.prototype.updateNodesCache=function(){var i=this.data;var B=this.data.cy;if(i.cache==undefined){i.cache={}}i.cache.cachedNodes=B.nodes()};u.prototype.getCachedEdges=function(){var i=this.data;var B=this.data.cy;if(i.cache==undefined){i.cache={}}if(i.cache.cachedEdges==undefined){i.cache.cachedEdges=B.edges()}return i.cache.cachedEdges};u.prototype.updateEdgesCache=function(){var i=this.data;
var B=this.data.cy;if(i.cache==undefined){i.cache={}}i.cache.cachedEdges=B.edges()};u.prototype.projectIntoViewport=function(D,B){var i,H;var E=0;var C=0;var G;G=this.data.container;var F=false;while(G!=null){if(typeof(G.offsetLeft)=="number"){E+=G.offsetLeft;C+=G.offsetTop;if(G==document.body||G==document.header){F=true}if(!F){E-=G.scrollLeft;C-=G.scrollTop}}G=G.offsetParent}i=D-E;H=B-C;i-=this.data.cy.pan().x;H-=this.data.cy.pan().y;i/=this.data.cy.zoom();H/=this.data.cy.zoom();return[i,H]};u.prototype.findContainerPageCoords=function(){var i,F;
var C=0;var B=0;var E;E=this.data.container;var D=false;while(E!=null){if(typeof(E.offsetLeft)=="number"){C+=E.offsetLeft;B+=E.offsetTop;if(E==document.body||E==document.header){D=true}if(!D){C-=E.scrollLeft;B-=E.scrollTop}}E=E.offsetParent}return[C,B]};u.prototype.findNearestElement=function(L,K){var H=this.data;var B=this.getCachedNodes();var G=this.getCachedEdges();var J=[];for(var I=0;I<B.length;I++){if(n[this.getNodeShape(B[I])].checkPointRough(L,K,B[I]._private.style["border-width"].value,this.getNodeWidth(B[I]),this.getNodeHeight(B[I]),B[I]._private.position.x,B[I]._private.position.y)&&n[this.getNodeShape(B[I])].checkPoint(L,K,B[I]._private.style["border-width"].value,this.getNodeWidth(B[I])/2,this.getNodeHeight(B[I])/2,B[I]._private.position.x,B[I]._private.position.y)){J.push(B[I])
}}for(var I=0;I<G.length;I++){var C=G[I];var F=C._private.rscratch;var E=("ontouchstart" in window)||window.DocumentTouch&&document instanceof DocumentTouch;var D=E?256:32;if(F.isSelfEdge){if((this.inBezierVicinity(L,K,F.startX,F.startY,F.cp2ax,F.cp2ay,F.selfEdgeMidX,F.selfEdgeMidY,Math.pow(C._private.style.width.value/2,2))&&(Math.pow(G[I]._private.style.width.value/2,2)+D>this.sqDistanceToQuadraticBezier(L,K,F.startX,F.startY,F.cp2ax,F.cp2ay,F.selfEdgeMidX,F.selfEdgeMidY)))||(this.inBezierVicinity(L,K,F.selfEdgeMidX,F.selfEdgeMidY,F.cp2cx,F.cp2cy,F.endX,F.endY,Math.pow(G[I]._private.style.width.value/2,2))&&(Math.pow(G[I]._private.style.width.value/2,2)+D>this.sqDistanceToQuadraticBezier(L,K,F.selfEdgeMidX,F.selfEdgeMidY,F.cp2cx,F.cp2cy,F.endX,F.endY)))){J.push(G[I])
}}else{if(F.isStraightEdge){if(Math.pow(G[I]._private.style.width.value/2,2)+D>this.sqDistanceToFiniteLine(L,K,F.startX,F.startY,F.endX,F.endY)){J.push(G[I])}}else{if(F.isBezierEdge){if(this.inBezierVicinity(L,K,F.startX,F.startY,F.cp2x,F.cp2y,F.endX,F.endY,Math.pow(G[I]._private.style.width.value/2,2))&&(Math.pow(G[I]._private.style.width.value/2,2)+D>this.sqDistanceToQuadraticBezier(L,K,F.startX,F.startY,F.cp2x,F.cp2y,F.endX,F.endY))){J.push(G[I])}}}}if(!J.length||J[J.length-1]!=G[I]){if((b[G[I]._private.style["source-arrow-shape"].value].roughCollide(L,K,G[I]._private.rscratch.arrowStartX,G[I]._private.rscratch.arrowStartY,this.getArrowWidth(G[I]._private.style.width.value),this.getArrowHeight(G[I]._private.style.width.value),[G[I]._private.rscratch.arrowStartX-G[I].source()[0]._private.position.x,G[I]._private.rscratch.arrowStartY-G[I].source()[0]._private.position.y],0)&&b[G[I]._private.style["source-arrow-shape"].value].collide(L,K,G[I]._private.rscratch.arrowStartX,G[I]._private.rscratch.arrowStartY,this.getArrowWidth(G[I]._private.style.width.value),this.getArrowHeight(G[I]._private.style.width.value),[G[I]._private.rscratch.arrowStartX-G[I].source()[0]._private.position.x,G[I]._private.rscratch.arrowStartY-G[I].source()[0]._private.position.y],0))||(b[G[I]._private.style["target-arrow-shape"].value].roughCollide(L,K,G[I]._private.rscratch.arrowEndX,G[I]._private.rscratch.arrowEndY,this.getArrowWidth(G[I]._private.style.width.value),this.getArrowHeight(G[I]._private.style.width.value),[G[I]._private.rscratch.arrowEndX-G[I].target()[0]._private.position.x,G[I]._private.rscratch.arrowEndY-G[I].target()[0]._private.position.y],0)&&b[G[I]._private.style["target-arrow-shape"].value].collide(L,K,G[I]._private.rscratch.arrowEndX,G[I]._private.rscratch.arrowEndY,this.getArrowWidth(G[I]._private.style.width.value),this.getArrowHeight(G[I]._private.style.width.value),[G[I]._private.rscratch.arrowEndX-G[I].target()[0]._private.position.x,G[I]._private.rscratch.arrowEndY-G[I].target()[0]._private.position.y],0))){J.push(G[I])
}}}J.sort(function(M,i){var O=i._private.style["z-index"].value-M._private.style["z-index"].value;var N=i._private.data.id.localeCompare(M._private.data.id);var P=(function(R,Q){if(R.isEdge()&&Q.isNode()){return 1}else{if(R.isNode()&&Q.isEdge()){return -1}}return 0})(M,i);return O||P||N});if(J.length>0){return J[0]}else{return null}};u.prototype.getAllInBox=function(D,N,B,M){var I=this.data;var C=this.getCachedNodes();var G=this.getCachedEdges();var J=[];var L=Math.min(D,B);var F=Math.max(D,B);var O=Math.min(N,M);
var K=Math.max(N,M);D=L;B=F;N=O;M=K;var E;for(var H=0;H<C.length;H++){if(n[this.getNodeShape(C[H])].intersectBox(D,N,B,M,this.getNodeWidth(C[H]),this.getNodeHeight(C[H]),C[H]._private.position.x,C[H]._private.position.y,C[H]._private.style["border-width"].value/2)){J.push(C[H])}}for(var H=0;H<G.length;H++){if(G[H]._private.rscratch.isSelfEdge){if((E=this.boxInBezierVicinity(D,N,B,M,G[H]._private.rscratch.startX,G[H]._private.rscratch.startY,G[H]._private.rscratch.cp2ax,G[H]._private.rscratch.cp2ay,G[H]._private.rscratch.endX,G[H]._private.rscratch.endY,G[H]._private.style.width.value))&&(E==2||(E==1&&this.checkBezierCrossesBox(D,N,B,M,G[H]._private.rscratch.startX,G[H]._private.rscratch.startY,G[H]._private.rscratch.cp2ax,G[H]._private.rscratch.cp2ay,G[H]._private.rscratch.endX,G[H]._private.rscratch.endY,G[H]._private.style.width.value)))||(E=this.boxInBezierVicinity(D,N,B,M,G[H]._private.rscratch.startX,G[H]._private.rscratch.startY,G[H]._private.rscratch.cp2cx,G[H]._private.rscratch.cp2cy,G[H]._private.rscratch.endX,G[H]._private.rscratch.endY,G[H]._private.style.width.value))&&(E==2||(E==1&&this.checkBezierCrossesBox(D,N,B,M,G[H]._private.rscratch.startX,G[H]._private.rscratch.startY,G[H]._private.rscratch.cp2cx,G[H]._private.rscratch.cp2cy,G[H]._private.rscratch.endX,G[H]._private.rscratch.endY,G[H]._private.style.width.value)))){J.push(G[H])
}}if(G[H]._private.rscratch.isBezierEdge&&(E=this.boxInBezierVicinity(D,N,B,M,G[H]._private.rscratch.startX,G[H]._private.rscratch.startY,G[H]._private.rscratch.cp2x,G[H]._private.rscratch.cp2y,G[H]._private.rscratch.endX,G[H]._private.rscratch.endY,G[H]._private.style.width.value))&&(E==2||(E==1&&this.checkBezierCrossesBox(D,N,B,M,G[H]._private.rscratch.startX,G[H]._private.rscratch.startY,G[H]._private.rscratch.cp2x,G[H]._private.rscratch.cp2y,G[H]._private.rscratch.endX,G[H]._private.rscratch.endY,G[H]._private.style.width.value)))){J.push(G[H])
}if(G[H]._private.rscratch.isStraightEdge&&(E=this.boxInBezierVicinity(D,N,B,M,G[H]._private.rscratch.startX,G[H]._private.rscratch.startY,G[H]._private.rscratch.startX*0.5+G[H]._private.rscratch.endX*0.5,G[H]._private.rscratch.startY*0.5+G[H]._private.rscratch.endY*0.5,G[H]._private.rscratch.endX,G[H]._private.rscratch.endY,G[H]._private.style.width.value))&&(E==2||(E==1&&this.checkStraightEdgeCrossesBox(D,N,B,M,G[H]._private.rscratch.startX,G[H]._private.rscratch.startY,G[H]._private.rscratch.endX,G[H]._private.rscratch.endY,G[H]._private.style.width.value)))){J.push(G[H])
}}return J};u.prototype.updateAllCompounds=function(E){for(var B=E.length-1;B>=0;B--){if(E[B].isNode()&&(E[B]._private.style.width.value=="auto"||E[B]._private.style.height.value=="auto")&&E[B].children().length>0){var D=E[B];var C=this.calcCompoundBounds(D);D._private.position.x=C.x;D._private.position.y=C.y;D._private.autoWidth=C.width;D._private.autoHeight=C.height}}};u.prototype.calcCompoundBounds=function(F){var E=F.children(":visible").not(":removed");var K=this.getNodePadding(F);var i={x:F._private.position.x,y:F._private.position.y,width:F._private.autoWidth,height:F._private.autoHeight};
if(E.size()==0){return i}var B=this.borderValue(E,"left");var H=this.borderValue(E,"right");var G=this.borderValue(E,"top");var D=this.borderValue(E,"bottom");var J=(B-K.left+H+K.right)/2;var I=(G-K.top+D+K.bottom)/2;var C=(H-B)+K.left+K.right;var L=(D-G)+K.top+K.bottom;i={x:J,y:I,width:C,height:L};return i};u.prototype.borderValue=function(D,L){var H,C;var M=1/0,J=-1/0;var i=this;var K=function(P){var O={};O.x=P._private.position.x;O.y=P._private.position.y;O.width=P.outerWidth();O.height=P.outerHeight();
return O};var F=function(P){var Q=String(P._private.style.content.value);var R=P._private.style["text-transform"].value;if(R=="none"){}else{if(R=="uppercase"){Q=Q.toUpperCase()}else{if(R=="lowercase"){Q=Q.toLowerCase()}}}var O=i.data.canvases[4].getContext("2d");return O.measureText(Q).width};var N=function(S){var Q={};var O=i.getNodeWidth(S);var T=i.getNodeHeight(S);Q.height=S._private.style["font-size"].value;Q.width=Q.height;var R=S._private.style["text-halign"].strValue;if(R=="left"){Q.x=S._private.position.x-O/2;
Q.left=Q.x-Q.width;Q.right=Q.x}else{if(R=="right"){Q.x=S._private.position.x+O/2;Q.left=Q.x;Q.right=Q.x+Q.width}else{Q.x=S._private.position.x;Q.left=Q.x-Q.width/2;Q.right=Q.x+Q.width/2}}var P=S._private.style["text-valign"].strValue;if(P=="top"){Q.y=S._private.position.y-T/2;Q.top=Q.y-Q.height;Q.bottom=Q.y}else{if(P=="bottom"){Q.y=S._private.position.y+T/2;Q.top=Q.y;Q.bottom=Q.y+Q.height}else{Q.y=S._private.position.y;Q.top=Q.y-Q.height/2;Q.bottom=Q.y+Q.height/2}}return Q};for(y=0;y<D.length;y++){H=K(D[y]);
C=N(D[y]);if(L=="left"){var B=Math.min(H.x-H.width/2,C.left);if(B<M){M=B}}else{if(L=="right"){var I=Math.max(H.x+H.width/2,C.right);if(I>J){J=I}}else{if(L=="top"){var G=Math.min(H.y-H.height/2,C.top);if(G<M){M=G}}else{if(L=="bottom"){var E=Math.max(H.y+H.height/2,C.bottom);if(E>J){J=E}}}}}}if((L=="left")||(L=="top")){return M}else{return J}};u.prototype.getNodeWidth=function(i){if(i._private.style.width.value=="auto"||i._private.style.height.value=="auto"){return i._private.autoWidth}else{return i._private.style.width.value
}};u.prototype.getNodeHeight=function(i){if(i._private.style.width.value=="auto"||i._private.style.height.value=="auto"){return i._private.autoHeight}else{return i._private.style.height.value}};u.prototype.getNodeShape=function(i){if(i._private.style.width.value=="auto"||i._private.style.height.value=="auto"){return"rectangle"}else{return i._private.style.shape.value}};u.prototype.getNodePadding=function(C){var E=C._private.style["padding-left"].value;var B=C._private.style["padding-right"].value;
var D=C._private.style["padding-top"].value;var i=C._private.style["padding-bottom"].value;if(isNaN(E)){E=0}if(isNaN(B)){B=0}if(isNaN(D)){D=0}if(isNaN(i)){i=0}return{left:E,right:B,top:D,bottom:i}};u.prototype.matchCanvasSize=function(C){var G=this.data;var F=C.clientWidth;var B=C.clientHeight;var D;for(var E=0;E<5;E++){D=G.canvases[E];if(D.width!==F||D.height!==B){D.width=F;D.height=B}}for(var E=0;E<2;E++){D=G.bufferCanvases[E];if(D.width!==F||D.height!==B){D.width=F;D.height=B}}};u.prototype.redraw=function(){var G=this.data.cy;
var J=this.data;var D=this.getCachedNodes();var H=this.getCachedEdges();this.matchCanvasSize(J.container);var C=D.add(H).toArray();var E=function(i){if(i._private.group=="nodes"){return i.parents().size()}else{if(i._private.group=="edges"){return Math.max(i.source()[0].parents().size(),i.target()[0].parents().size())}else{return 0}}};if(J.canvasNeedsRedraw[d]||J.canvasNeedsRedraw[A]){this.findEdgeControlPoints(H);var N=false;for(var K=0;K<C.length;K++){if((C[K]._private.group=="nodes")&&(C[K]._private.style.width.value=="auto"||C[K]._private.style.height.value=="auto")){N=true;
break}}C.sort(function(P,O){var i=P._private.style["z-index"].value-O._private.style["z-index"].value;var R=0;var Q=0;if(N){R=E(P);Q=E(O)}if(i==0){if(R-Q==0){if(P._private.group=="nodes"&&O._private.group=="edges"){return 1}else{if(P._private.group=="edges"&&O._private.group=="nodes"){return -1}else{return 0}}}else{return R-Q}}return 0});if(N){this.updateAllCompounds(C)}}if(J.canvasNeedsRedraw[A]){var F=J.canvases[4].getContext("2d");F.setTransform(1,0,0,1,0,0);F.clearRect(0,0,F.canvas.width,F.canvas.height);
F.translate(G.pan().x,G.pan().y);F.scale(G.zoom(),G.zoom());var I;for(var L=0;L<C.length;L++){I=C[L];if(!I._private.rscratch.inDragLayer){if(I._private.group=="nodes"){this.drawNode(F,I)}else{if(I._private.group=="edges"){this.drawEdge(F,I)}}}}for(var L=0;L<C.length;L++){I=C[L];if(!I._private.rscratch.inDragLayer){if(I._private.group=="nodes"){this.drawNodeText(F,I)}else{if(I._private.group=="edges"){this.drawEdgeText(F,I)}}}}J.canvasNeedsRedraw[A]=false;J.canvasRedrawReason[A]=[]}if(J.canvasNeedsRedraw[d]){var F=J.canvases[2].getContext("2d");
F.setTransform(1,0,0,1,0,0);F.clearRect(0,0,F.canvas.width,F.canvas.height);F.translate(G.pan().x,G.pan().y);F.scale(G.zoom(),G.zoom());var I;for(var L=0;L<C.length;L++){I=C[L];if(I._private.rscratch.inDragLayer){if(I._private.group=="nodes"){this.drawNode(F,I)}else{if(I._private.group=="edges"){this.drawEdge(F,I)}}}}for(var L=0;L<C.length;L++){I=C[L];if(I._private.rscratch.inDragLayer){if(I._private.group=="nodes"){this.drawNodeText(F,I)}else{if(I._private.group=="edges"){this.drawEdgeText(F,I)}}}}J.canvasNeedsRedraw[d]=false;
J.canvasRedrawReason[d]=[]}if(J.canvasNeedsRedraw[x]){var F=J.canvases[0].getContext("2d");F.setTransform(1,0,0,1,0,0);F.clearRect(0,0,F.canvas.width,F.canvas.height);F.translate(G.pan().x,G.pan().y);F.scale(G.zoom(),G.zoom());if(J.select[4]==1){var M=G.style()._private.coreStyle;var B=M["selection-box-border-width"].value/J.cy.zoom();F.lineWidth=B;F.fillStyle="rgba("+M["selection-box-color"].value[0]+","+M["selection-box-color"].value[1]+","+M["selection-box-color"].value[2]+","+M["selection-box-opacity"].value+")";
F.fillRect(J.select[0],J.select[1],J.select[2]-J.select[0],J.select[3]-J.select[1]);if(B>0){F.strokeStyle="rgba("+M["selection-box-border-color"].value[0]+","+M["selection-box-border-color"].value[1]+","+M["selection-box-border-color"].value[2]+","+M["selection-box-opacity"].value+")";F.strokeRect(J.select[0],J.select[1],J.select[2]-J.select[0],J.select[3]-J.select[1])}}J.canvasNeedsRedraw[x]=false;J.canvasRedrawReason[x]=[]}var F;if(this.data.container.clientHeight>0&&this.data.container.clientWidth>0){F=J.bufferCanvases[1].getContext("2d");
F.globalCompositeOperation="copy";F.drawImage(J.canvases[4],0,0);F.globalCompositeOperation="source-over";F.drawImage(J.canvases[2],0,0);F.drawImage(J.canvases[0],0,0);F=J.bufferCanvases[0].getContext("2d");F.globalCompositeOperation="copy";F.drawImage(J.bufferCanvases[1],0,0)}};var j={};var g=30*300;u.prototype.getCachedImage=function(B,C){if(j[B]&&j[B].image){j[B].keepTime=g;return j[B].image}var i=j[B];if(i==undefined){j[B]=new Object();j[B].image=new Image();j[B].image.onload=C;j[B].image.src=B;
j[B].keepTime=g;i=j[B]}return i.image};u.prototype.swapCachedImage=function(B){if(j[B]){if(j[B].image&&j[B].image.complete){var C=j[B].image;var i=document.createElement("canvas");i.width=C.width;i.height=C.height;i.getContext("2d").drawImage(C,0,0);j[B].image=i;j[B].swappedWithCanvas=true;return i}else{return null}}else{return null}};u.prototype.updateImageCaches=function(){for(var i in j){if(j[i].keepTime<=0){if(j[i].image!=undefined){j[i].image.src=undefined;j[i].image=undefined}j[i]=undefined
}else{j[i]-=1}}};u.prototype.drawImage=function(i,H,G,E,D,I,C){C.widthScale=0.5;C.heightScale=0.5;C.rotate=I;var F;var B;canvas.drawImage(C,H,G)};u.prototype.drawEdge=function(C,E,F){var G,K;G=E.source()[0];K=E.target()[0];if(E._private.style.visibility.value!="visible"||G._private.style.visibility.value!="visible"||K._private.style.visibility.value!="visible"){return}var O=E._private.style["overlay-padding"].value;var M=E._private.style["overlay-opacity"].value;var N=E._private.style["overlay-color"].value;
if(F){C.strokeStyle="rgba( "+N[0]+", "+N[1]+", "+N[2]+", "+M+" )";C.lineCap="round";if(E._private.rscratch.isSelfEdge){C.lineCap="butt"}}else{C.strokeStyle="rgba("+E._private.style["line-color"].value[0]+","+E._private.style["line-color"].value[1]+","+E._private.style["line-color"].value[2]+","+E._private.style.opacity.value+")"}if(E._private.style.width.value<=0){return}var L=E._private.style.width.value+(F?2*O:0);var I=F?"solid":E._private.style["line-style"].value;C.lineWidth=L;this.findEndpoints(E);
if(E._private.rscratch.isSelfEdge){var i=E._private.rscratch;this.drawStyledEdge(E,C,[i.startX,i.startY,i.cp2ax,i.cp2ay,i.selfEdgeMidX,i.selfEdgeMidY],I,L);this.drawStyledEdge(E,C,[i.selfEdgeMidX,i.selfEdgeMidY,i.cp2cx,i.cp2cy,i.endX,i.endY],I,L)}else{if(E._private.rscratch.isStraightEdge){var D=K._private.position.x-G._private.position.x;var B=K._private.position.y-G._private.position.y;var J=E._private.rscratch.endX-E._private.rscratch.startX;var H=E._private.rscratch.endY-E._private.rscratch.startY;
if(D*J+B*H<0){E._private.rscratch.straightEdgeTooShort=true}else{var i=E._private.rscratch;this.drawStyledEdge(E,C,[i.startX,i.startY,i.endX,i.endY],I,L);E._private.rscratch.straightEdgeTooShort=false}}else{var i=E._private.rscratch;this.drawStyledEdge(E,C,[i.startX,i.startY,i.cp2x,i.cp2y,i.endX,i.endY],I,L)}}if(E._private.rscratch.noArrowPlacement!==true&&E._private.rscratch.startX!==undefined){this.drawArrowheads(C,E,F)}if(!F&&M>0){this.drawEdge(C,E,true)}};var s=function(J,F,D){var C=Math.sqrt(Math.pow(J[4]-J[0],2)+Math.pow(J[5]-J[1],2));
C+=Math.sqrt(Math.pow((J[4]+J[0])/2-J[2],2)+Math.pow((J[5]+J[1])/2-J[3],2));var I=Math.ceil(C/F);var B=C/F;var G;if(I>0){G=new Array(I*2)}else{return null}for(var E=0;E<I;E++){var H=E/I;G[E*2]=J[0]*(1-H)*(1-H)+2*(J[2])*(1-H)*H+J[4]*(H)*(H);G[E*2+1]=J[1]*(1-H)*(1-H)+2*(J[3])*(1-H)*H+J[5]*(H)*(H)}return G};var p=function(J,F,D){var C=Math.sqrt(Math.pow(J[2]-J[0],2)+Math.pow(J[3]-J[1],2));var I=Math.ceil(C/F);var G;if(I>0){G=new Array(I*2)}else{return null}var B=[J[2]-J[0],J[3]-J[1]];for(var E=0;E<I;
E++){var H=E/I;G[E*2]=B[0]*H+J[0];G[E*2+1]=B[1]*H+J[1]}return G};var o=function(C,i,B){pt1=_genpts(C,i);pt2=_genpts(C,B)};u.prototype.createBuffer=function(B,C){var i=document.createElement("canvas");i.width=B;i.height=C;return[i,i.getContext("2d")]};u.prototype.drawStyledEdge=function(H,D,U,E,N){var B=this.data.cy.zoom();function T(X,W,V,i){return(1-i)*(1-i)*X+2*(1-i)*i*W+i*i*V}if(H._private.rstyle.bezierPts===undefined){H._private.rstyle.bezierPts=[]}var P=H._private.rstyle.bezierPts.length;if(H.isLoop()){if(P>=12){H._private.rstyle.bezierPts=[]
}else{}}else{H._private.rstyle.bezierPts=[]}var K=H._private.rstyle.bezierPts;K.push({x:T(U[0],U[2],U[4],0.05),y:T(U[1],U[3],U[5],0.05)});K.push({x:T(U[0],U[2],U[4],0.25),y:T(U[1],U[3],U[5],0.25)});K.push({x:T(U[0],U[2],U[4],0.35),y:T(U[1],U[3],U[5],0.35)});K.push({x:T(U[0],U[2],U[4],0.65),y:T(U[1],U[3],U[5],0.65)});K.push({x:T(U[0],U[2],U[4],0.75),y:T(U[1],U[3],U[5],0.75)});K.push({x:T(U[0],U[2],U[4],0.95),y:T(U[1],U[3],U[5],0.95)});if(E=="solid"){D.beginPath();D.moveTo(U[0],U[1]);if(U.length==3*2){D.quadraticCurveTo(U[2],U[3],U[4],U[5])
}else{D.lineTo(U[2],U[3])}D.stroke()}else{if(E=="dotted"){var M;if(U.length==3*2){M=s(U,16,true)}else{M=p(U,16,true)}if(!M){return}var G=Math.max(N*1.6,3.4)*B;var F=G*2,J=G*2;F=Math.max(F,1);J=Math.max(J,1);var Q=this.createBuffer(F,J);var O=Q[1];O.setTransform(1,0,0,1,0,0);O.clearRect(0,0,F,J);O.fillStyle=D.strokeStyle;O.beginPath();O.arc(F/2,J/2,G*0.5,0,Math.PI*2,false);O.fill();D.beginPath();D.save();for(var R=0;R<M.length/2;R++){D.drawImage(Q[0],M[R*2]-F/2/B,M[R*2+1]-J/2/B,F/B,J/B)}D.restore()
}else{if(E=="dashed"){var M;if(U.length==3*2){M=s(U,13,true)}else{M=p(U,13,true)}if(!M){return}var F=N*2*B,J=N*1.7*B;F=Math.max(F,1);J=Math.max(J,1);var Q=this.createBuffer(F,J);var O=Q[1];O.setTransform(1,0,0,1,0,0);O.clearRect(0,0,F,J);if(D.strokeStyle){O.strokeStyle=D.strokeStyle}O.beginPath();O.moveTo(F/2,J*0.2);O.lineTo(F/2,J*0.8);O.stroke();D.save();var C=false;var I,S;if(U.length==2*2){I=[U[2]-U[0],U[3]-M[1]];S=Math.acos((I[0]*0+I[1]*-1)/Math.sqrt(I[0]*I[0]+I[1]*I[1]));if(I[0]<0){S=-S+2*Math.PI
}}else{if(U.length==3*2){C=true}}for(var R=0;R<M.length/2;R++){var L=R/(Math.max(M.length/2-1,1));if(C){I=[2*(1-L)*(U[2]-U[0])+2*L*(U[4]-U[2]),2*(1-L)*(U[3]-U[1])+2*L*(U[5]-U[3])];S=Math.acos((I[0]*0+I[1]*-1)/Math.sqrt(I[0]*I[0]+I[1]*I[1]));if(I[0]<0){S=-S+2*Math.PI}}D.translate(M[R*2],M[R*2+1]);D.rotate(S);D.translate(-F/2/B,-J/2/B);D.drawImage(Q[0],0,0,F/B,J/B);D.translate(F/2/B,J/2/B);D.rotate(-S);D.translate(-M[R*2],-M[R*2+1])}D.restore()}else{this.drawStyledEdge(H,D,U,"solid",N)}}}};u.prototype.drawEdgeText=function(D,G){if(G._private.style.visibility.value!="visible"){return
}D.textAlign="center";D.textBaseline="middle";var B,i;var F,E;if(G._private.rscratch.isSelfEdge){F=G._private.rscratch.selfEdgeMidX;E=G._private.rscratch.selfEdgeMidY}else{if(G._private.rscratch.isStraightEdge&&!G._private.rscratch.isBezierEdge){F=(G._private.rscratch.startX+G._private.rscratch.endX)/2;E=(G._private.rscratch.startY+G._private.rscratch.endY)/2}else{if(G._private.rscratch.isBezierEdge&&!G._private.rscratch.isStraightEdge){F=0.25*G._private.rscratch.startX+2*0.5*0.5*G._private.rscratch.cp2x+(0.5*0.5)*G._private.rscratch.endX;
E=Math.pow(1-0.5,2)*G._private.rscratch.startY+2*(1-0.5)*0.5*G._private.rscratch.cp2y+(0.5*0.5)*G._private.rscratch.endY}}}B=F;i=E;var C=G._private.rstyle;C.labelX=B;C.labelY=i;this.drawText(D,G,B,i)};u.prototype.drawNode=function(D,E){var I,C;if(E._private.style.visibility.value!="visible"){return}D.fillStyle="rgba("+E._private.style["background-color"].value[0]+","+E._private.style["background-color"].value[1]+","+E._private.style["background-color"].value[2]+","+(E._private.style["background-opacity"].value*E._private.style.opacity.value)+")";
D.strokeStyle="rgba("+E._private.style["border-color"].value[0]+","+E._private.style["border-color"].value[1]+","+E._private.style["border-color"].value[2]+","+(E._private.style["border-opacity"].value*E._private.style.opacity.value)+")";I=this.getNodeWidth(E);C=this.getNodeHeight(E);var B=E._private.style["background-image"].value[2]||E._private.style["background-image"].value[1];if(B!=undefined){var i=this;var F=this.getCachedImage(B,function(){i.data.canvasNeedsRedraw[A]=true;i.data.canvasRedrawReason[A].push("image finished load");
i.data.canvasNeedsRedraw[d]=true;i.data.canvasRedrawReason[d].push("image finished load");i.swapCachedImage(B);i.redraw()});if(F.complete==false){n[i.getNodeShape(E)].drawPath(D,E._private.position.x,E._private.position.y,I,C);D.stroke();D.fillStyle="#555555";D.fill()}else{this.drawInscribedImage(D,F,E)}}else{n[this.getNodeShape(E)].draw(D,E._private.position.x,E._private.position.y,I,C)}D.lineWidth=E._private.style["border-width"].value;if(E._private.style["border-width"].value>0){D.stroke()}var J=E._private.style["overlay-padding"].value;
var G=E._private.style["overlay-opacity"].value;var H=E._private.style["overlay-color"].value;if(G>0){D.fillStyle="rgba( "+H[0]+", "+H[1]+", "+H[2]+", "+G+" )";n[this.getNodeShape(E)].draw(D,E._private.position.x,E._private.position.y,I+J*2,C+J*2)}};u.prototype.drawInscribedImage=function(B,G,E){var I=this.data.cy._private.zoom;var D=E._private.position.x;var C=E._private.position.y;var H=this.getNodeWidth(E);var i=this.getNodeHeight(E);B.save();n[r.getNodeShape(E)].drawPath(B,D,C,H,i);B.clip();var F=[G.width,G.height];
B.drawImage(G,D-F[0]/2,C-F[1]/2,F[0],F[1]);B.restore();B.stroke()};u.prototype.drawNodeText=function(E,G){if(G._private.style.visibility.value!="visible"){return}var C,i;var B=this.getNodeWidth(G);var H=this.getNodeHeight(G);var F=G._private.style["text-halign"].strValue;if(F=="left"){E.textAlign="right";C=G._private.position.x-B/2}else{if(F=="right"){E.textAlign="left";C=G._private.position.x+B/2}else{if(F=="center"){E.textAlign="center";C=G._private.position.x}else{E.textAlign="center";C=G._private.position.x
}}}var D=G._private.style["text-valign"].strValue;if(D=="top"){E.textBaseline="bottom";i=G._private.position.y-H/2}else{if(D=="bottom"){E.textBaseline="top";i=G._private.position.y+H/2}else{if(D=="middle"||D=="center"){E.textBaseline="middle";i=G._private.position.y}else{E.textBaseline="middle";i=G._private.position.y}}}this.drawText(E,G,C,i)};u.prototype.drawText=function(i,E,G,F){var J=E._private.style["font-style"].strValue;var D=E._private.style["font-size"].value+"px";var L=E._private.style["font-family"].strValue;
var I=E._private.style["font-variant"].strValue;var B=E._private.style["font-weight"].strValue;i.font=J+" "+B+" "+D+" "+L;var K=String(E._private.style.content.value);var C=E._private.style["text-transform"].value;if(C=="none"){}else{if(C=="uppercase"){K=K.toUpperCase()}else{if(C=="lowercase"){K=K.toLowerCase()}}}i.fillStyle="rgba("+E._private.style.color.value[0]+","+E._private.style.color.value[1]+","+E._private.style.color.value[2]+","+(E._private.style["text-opacity"].value*E._private.style.opacity.value)+")";
i.strokeStyle="rgba("+E._private.style["text-outline-color"].value[0]+","+E._private.style["text-outline-color"].value[1]+","+E._private.style["text-outline-color"].value[2]+","+(E._private.style["text-opacity"].value*E._private.style.opacity.value)+")";if(K!=undefined){var H=E._private.style["text-outline-width"].value;if(H>0){i.lineWidth=H;i.strokeText(K,G,F)}if(isNaN(G)){G=0}if(isNaN(F)){F=0}i.fillText(""+K,G,F);E._private.rstyle.labelWidth=i.measureText(K).width}};u.prototype.drawBackground=function(C,B,i,D,E){};
u.prototype.findEdgeControlPoints=function(I){var O={};var G=this.data.cy;var L;for(var J=0;J<I.length;J++){L=I[J]._private.data.source>I[J]._private.data.target?I[J]._private.data.target+I[J]._private.data.source:I[J]._private.data.source+I[J]._private.data.target;if(O[L]==undefined){O[L]=[]}O[L].push(I[J])}var C,H;for(var L in O){C=G.getElementById(O[L][0]._private.data.source);H=G.getElementById(O[L][0]._private.data.target);var N=(C._private.position.x+H._private.position.x)/2;var M=(C._private.position.y+H._private.position.y)/2;
var D,B;if(O[L].length>1){D=H._private.position.y-C._private.position.y;B=C._private.position.x-H._private.position.x;var K=Math.sqrt(D*D+B*B);D/=K;B/=K}var E;for(var J=0;J<O[L].length;J++){E=O[L][J];if(C._private.data.id==H._private.data.id){var P=E._private.style["control-point-step-size"].pxValue;E._private.rscratch.isSelfEdge=true;E._private.rscratch.cp2ax=C._private.position.x;E._private.rscratch.cp2ay=C._private.position.y-(1+Math.pow(this.getNodeHeight(C),1.12)/100)*P*(J/3+1);E._private.rscratch.cp2cx=C._private.position.x-(1+Math.pow(this.getNodeWidth(C),1.12)/100)*P*(J/3+1);
E._private.rscratch.cp2cy=C._private.position.y;E._private.rscratch.selfEdgeMidX=(E._private.rscratch.cp2ax+E._private.rscratch.cp2cx)/2;E._private.rscratch.selfEdgeMidY=(E._private.rscratch.cp2ay+E._private.rscratch.cp2cy)/2}else{if(O[L].length%2==1&&J==Math.floor(O[L].length/2)){E._private.rscratch.isStraightEdge=true}else{var P=E._private.style["control-point-step-size"].value;var F=(0.5-O[L].length/2+J)*P;E._private.rscratch.isBezierEdge=true;E._private.rscratch.cp2x=N+D*F;E._private.rscratch.cp2y=M+B*F
}}}}return O};u.prototype.findEndpoints=function(D){var F;var i=D.source()[0];var J=D.target()[0];var O=Math.max(this.getNodeWidth(i),this.getNodeHeight(i));var E=Math.max(this.getNodeWidth(J),this.getNodeHeight(J));O=0;E/=2;var C=[D.source().position().x,D.source().position().y];var G=[D.target().position().x,D.target().position().y];if(D._private.rscratch.isSelfEdge){var L=[D._private.rscratch.cp2cx,D._private.rscratch.cp2cy];F=n[this.getNodeShape(J)].intersectLine(J._private.position.x,J._private.position.y,this.getNodeWidth(J),this.getNodeHeight(J),L[0],L[1],J._private.style["border-width"].value/2);
var B=this.shortenIntersection(F,L,b[D._private.style["target-arrow-shape"].value].spacing(D));var K=this.shortenIntersection(F,L,b[D._private.style["target-arrow-shape"].value].gap(D));D._private.rscratch.endX=K[0];D._private.rscratch.endY=K[1];D._private.rscratch.arrowEndX=B[0];D._private.rscratch.arrowEndY=B[1];var L=[D._private.rscratch.cp2ax,D._private.rscratch.cp2ay];F=n[this.getNodeShape(i)].intersectLine(i._private.position.x,i._private.position.y,this.getNodeWidth(i),this.getNodeHeight(i),L[0],L[1],i._private.style["border-width"].value/2);
var H=this.shortenIntersection(F,L,b[D._private.style["source-arrow-shape"].value].spacing(D));var I=this.shortenIntersection(F,L,b[D._private.style["source-arrow-shape"].value].gap(D));D._private.rscratch.startX=I[0];D._private.rscratch.startY=I[1];D._private.rscratch.arrowStartX=H[0];D._private.rscratch.arrowStartY=H[1]}else{if(D._private.rscratch.isStraightEdge){F=n[this.getNodeShape(J)].intersectLine(J._private.position.x,J._private.position.y,this.getNodeWidth(J),this.getNodeHeight(J),i.position().x,i.position().y,J._private.style["border-width"].value/2);
if(F.length==0){D._private.rscratch.noArrowPlacement=true}else{D._private.rscratch.noArrowPlacement=false}var B=this.shortenIntersection(F,[i.position().x,i.position().y],b[D._private.style["target-arrow-shape"].value].spacing(D));var K=this.shortenIntersection(F,[i.position().x,i.position().y],b[D._private.style["target-arrow-shape"].value].gap(D));D._private.rscratch.endX=K[0];D._private.rscratch.endY=K[1];D._private.rscratch.arrowEndX=B[0];D._private.rscratch.arrowEndY=B[1];F=n[this.getNodeShape(i)].intersectLine(i._private.position.x,i._private.position.y,this.getNodeWidth(i),this.getNodeHeight(i),J.position().x,J.position().y,i._private.style["border-width"].value/2);
if(F.length==0){D._private.rscratch.noArrowPlacement=true}else{D._private.rscratch.noArrowPlacement=false}var H=this.shortenIntersection(F,[J.position().x,J.position().y],b[D._private.style["source-arrow-shape"].value].spacing(D));var I=this.shortenIntersection(F,[J.position().x,J.position().y],b[D._private.style["source-arrow-shape"].value].gap(D));D._private.rscratch.startX=I[0];D._private.rscratch.startY=I[1];D._private.rscratch.arrowStartX=H[0];D._private.rscratch.arrowStartY=H[1]}else{if(D._private.rscratch.isBezierEdge){var L=[D._private.rscratch.cp2x,D._private.rscratch.cp2y];
var N=C[0]*0.25+G[0]*0.25+L[0]*0.5;var M=C[1]*0.25+G[1]*0.25+L[1]*0.5;F=n[this.getNodeShape(J)].intersectLine(J._private.position.x,J._private.position.y,this.getNodeWidth(J),this.getNodeHeight(J),L[0],L[1],J._private.style["border-width"].value/2);var B=this.shortenIntersection(F,L,b[D._private.style["target-arrow-shape"].value].spacing(D));var K=this.shortenIntersection(F,L,b[D._private.style["target-arrow-shape"].value].gap(D));D._private.rscratch.endX=K[0];D._private.rscratch.endY=K[1];D._private.rscratch.arrowEndX=B[0];
D._private.rscratch.arrowEndY=B[1];F=n[this.getNodeShape(i)].intersectLine(i._private.position.x,i._private.position.y,this.getNodeWidth(i),this.getNodeHeight(i),L[0],L[1],i._private.style["border-width"].value/2);var H=this.shortenIntersection(F,L,b[D._private.style["source-arrow-shape"].value].spacing(D));var I=this.shortenIntersection(F,L,b[D._private.style["source-arrow-shape"].value].gap(D));D._private.rscratch.startX=I[0];D._private.rscratch.startY=I[1];D._private.rscratch.arrowStartX=H[0];
D._private.rscratch.arrowStartY=H[1]}else{if(D._private.rscratch.isArcEdge){return}}}}};u.prototype.findEdges=function(F){var C=this.getCachedEdges();var E={};var B=[];for(var D=0;D<F.length;D++){E[F[D]._private.data.id]=F[D]}for(var D=0;D<C.length;D++){if(E[C[D]._private.data.source]||E[C[D]._private.data.target]){B.push(C[D])}}return B};u.prototype.intersectLineEllipse=function(K,J,G,F,D,B){var C=G-K;var i=F-J;C/=D;i/=B;var H=Math.sqrt(C*C+i*i);var E=H-1;if(E<0){return[]}var I=E/H;return[(G-K)*I+K,(F-J)*I+J]
};u.prototype.findCircleNearPoint=function(E,D,F,J,I){var B=J-E;var i=I-D;var C=Math.sqrt(B*B+i*i);var H=B/C;var G=i/C;return[E+H*F,D+G*F]};u.prototype.findMaxSqDistanceToOrigin=function(E){var B=0.000001;var D;for(var C=0;C<E.length/2;C++){D=E[C*2]*E[C*2]+E[C*2+1]*E[C*2+1];if(D>B){B=D}}return B};u.prototype.finiteLinesIntersect=function(F,M,D,K,B,J,N,H,L){var G=(N-B)*(M-J)-(H-J)*(F-B);var I=(D-F)*(M-J)-(K-M)*(F-B);var E=(H-J)*(D-F)-(N-B)*(K-M);if(E!=0){var C=G/E;var i=I/E;if(0<=C&&C<=1&&0<=i&&i<=1){return[F+C*(D-F),M+C*(K-M)]
}else{if(!L){return[]}else{return[F+C*(D-F),M+C*(K-M)]}}}else{if(G==0||I==0){if([F,D,N].sort()[1]==N){return[N,H]}if([F,D,B].sort()[1]==B){return[B,J]}if([B,N,D].sort()[1]==D){return[D,K]}return[]}else{return[]}}};u.prototype.boxIntersectEllipse=function(C,L,i,J,K,B,O,G,E){if(i<C){var D=C;C=i;i=D}if(J<L){var M=L;L=J;J=M}var I=[G-B/2-K,E];var N=[G+B/2+K,E];var F=[G,E+O/2+K];var H=[G,E-O/2-K];if(i<I[0]){return false}if(C>N[0]){return false}if(J<H[1]){return false}if(L>F[1]){return false}if(C<=I[0]&&I[0]<=i&&L<=I[1]&&I[1]<=J){return true
}if(C<=N[0]&&N[0]<=i&&L<=N[1]&&N[1]<=J){return true}if(C<=F[0]&&F[0]<=i&&L<=F[1]&&F[1]<=J){return true}if(C<=H[0]&&H[0]<=i&&L<=H[1]&&H[1]<=J){return true}C=(C-G)/(B+K);i=(i-G)/(B+K);L=(L-E)/(O+K);J=(J-E)/(O+K);if(C*C+L*L<=1){return true}if(i*i+L*L<=1){return true}if(i*i+J*J<=1){return true}if(C*C+J*J<=1){return true}return false};u.prototype.boxIntersectPolygon=function(R,F,P,D,G,M,L,J,H,T,K){if(P<R){var Q=R;R=P;P=Q}if(D<F){var E=F;F=D;D=E}var I=new Array(G.length);var S=Math.asin(T[1]/(Math.sqrt(T[0]*T[0]+T[1]*T[1])));
if(T[0]<0){S=S+Math.PI/2}else{S=-S-Math.PI/2}var C=Math.cos(-S);var B=Math.sin(-S);for(var O=0;O<I.length/2;O++){I[O*2]=M*(G[O*2]*C-G[O*2+1]*B);I[O*2+1]=L*(G[O*2+1]*C+G[O*2]*B);I[O*2]+=J;I[O*2+1]+=H}var N;if(K>0){var U=w.expandPolygon(I,-K);N=w.joinLines(U)}else{N=I}for(var O=0;O<I.length/2;O++){if(R<=I[O*2]&&I[O*2]<=P){if(F<=I[O*2+1]&&I[O*2+1]<=D){return true}}}if(w.pointInsidePolygon(R,F,N,0,0,1,1,0,T)){return true}else{if(w.pointInsidePolygon(R,D,N,0,0,1,1,0,T)){return true}else{if(w.pointInsidePolygon(P,D,N,0,0,1,1,0,T)){return true
}else{if(w.pointInsidePolygon(P,F,N,0,0,1,1,0,T)){return true}}}}return false};u.prototype.polygonIntersectLine=function(H,G,B,E,C,K,J,I){var S=[];var F;var D=new Array(B.length);for(var O=0;O<D.length/2;O++){D[O*2]=B[O*2]*K+E;D[O*2+1]=B[O*2+1]*J+C}var N;if(I>0){var R=w.expandPolygon(D,-I);N=w.joinLines(R)}else{N=D}var M,L,Q,P;for(var O=0;O<N.length/2;O++){M=N[O*2];L=N[O*2+1];if(O<N.length/2-1){Q=N[(O+1)*2];P=N[(O+1)*2+1]}else{Q=N[0];P=N[1]}F=this.finiteLinesIntersect(H,G,E,C,M,L,Q,P);if(F.length!=0){S.push(F[0],F[1])
}}return S};u.prototype.shortenIntersection=function(F,E,C){var i=[F[0]-E[0],F[1]-E[1]];var D=Math.sqrt(i[0]*i[0]+i[1]*i[1]);var B=(D-C)/D;if(B<0){return[]}else{return[E[0]+B*i[0],E[1]+B*i[1]]}};b.arrow={_points:[-0.15,-0.3,0,0,0.15,-0.3],collide:function(G,D,C,B,i,I,E,F){var H=b.arrow._points;return c.pointInsidePolygon(G,D,H,C,B,i,I,E,F)},roughCollide:function(B,H,G,D,C,i,F,E){if(typeof(b.arrow._farthestPointSqDistance)=="undefined"){b.arrow._farthestPointSqDistance=c.findMaxSqDistanceToOrigin(b.arrow._points)
}return c.checkInBoundingCircle(B,H,b.arrow._farthestPointSqDistance,0,C,i,G,D)},draw:function(C){var D=b.arrow._points;for(var B=0;B<D.length/2;B++){C.lineTo(D[B*2],D[B*2+1])}},spacing:function(i){return 0},gap:function(i){return i._private.style.width.value*2}};b.triangle=b.arrow;b.none={collide:function(B,H,G,D,C,i,F,E){return false},roughCollide:function(B,H,G,D,C,i,F,E){return false},draw:function(i){},spacing:function(i){return 0},gap:function(i){return 0}};b.circle={_baseRadius:0.15,collide:function(J,G,D,C,i,M,H,I){if(i!=M){var B=Math.asin(H[1]/(Math.sqrt(H[0]*H[0]+H[1]*H[1])));
var L=Math.cos(-B);var F=Math.sin(-B);var E=[J*L-G*F,G*L+J*F];var K=(M+I)/(i+I);G/=K;C/=K;return(Math.pow(D-J,2)+Math.pow(C-G,2)<=Math.pow((i+I)*b.circle._baseRadius,2))}else{return(Math.pow(D-J,2)+Math.pow(C-G,2)<=Math.pow((i+I)*b.circle._baseRadius,2))}},roughCollide:function(B,H,G,D,C,i,F,E){return true},draw:function(i){i.arc(0,0,b.circle._baseRadius,0,Math.PI*2,false)},spacing:function(i){return c.getArrowWidth(i._private.style.width.value)*b.circle._baseRadius},gap:function(i){return i._private.style.width.value*2
}};b.inhibitor={_points:[-0.25,0,-0.25,-0.1,0.25,-0.1,0.25,0],collide:function(G,D,C,B,i,I,E,F){var H=b.inhibitor._points;return c.pointInsidePolygon(G,D,H,C,B,i,I,E,F)},roughCollide:function(B,H,G,D,C,i,F,E){if(typeof(b.inhibitor._farthestPointSqDistance)=="undefined"){b.inhibitor._farthestPointSqDistance=c.findMaxSqDistanceToOrigin(b.inhibitor._points)}return c.checkInBoundingCircle(B,H,b.inhibitor._farthestPointSqDistance,0,C,i,G,D)},draw:function(C){var D=b.inhibitor._points;for(var B=0;B<D.length/2;
B++){C.lineTo(D[B*2],D[B*2+1])}},spacing:function(i){return 4},gap:function(i){return 4}};b.square={_points:[-0.12,0,0.12,0,0.12,-0.24,-0.12,-0.24],collide:function(G,D,C,B,i,I,E,F){var H=b.square._points;return c.pointInsidePolygon(G,D,H,C,B,i,I,E,F)},roughCollide:function(B,H,G,D,C,i,F,E){if(typeof(b.square._farthestPointSqDistance)=="undefined"){b.square._farthestPointSqDistance=c.findMaxSqDistanceToOrigin(b.square._points)}return c.checkInBoundingCircle(B,H,b.square._farthestPointSqDistance,0,C,i,G,D)
},draw:function(C){var D=b.square._points;for(var B=0;B<D.length/2;B++){C.lineTo(D[B*2],D[B*2+1])}},spacing:function(i){return 0},gap:function(i){return i._private.style.width.value*2}};b.diamond={_points:[-0.14,-0.14,0,-0.28,0.14,-0.14,0,0],collide:function(G,D,C,B,i,I,E,F){var H=b.diamond._points;return c.pointInsidePolygon(G,D,H,C,B,i,I,E,F)},roughCollide:function(B,H,G,D,C,i,F,E){if(typeof(b.diamond._farthestPointSqDistance)=="undefined"){b.diamond._farthestPointSqDistance=c.findMaxSqDistanceToOrigin(b.diamond._points)
}return c.checkInBoundingCircle(B,H,b.diamond._farthestPointSqDistance,0,C,i,G,D)},draw:function(i){i.lineTo(-0.14,-0.14);i.lineTo(0,-0.28);i.lineTo(0.14,-0.14);i.lineTo(0,0)},spacing:function(i){return 0},gap:function(i){return i._private.style.width.value*2}};b.tee=b.inhibitor;u.prototype.getArrowWidth=function(i){return Math.max(Math.pow(i*13.37,0.9),29)};u.prototype.getArrowHeight=function(i){return Math.max(Math.pow(i*13.37,0.9),29)};u.prototype.drawArrowheads=function(B,D,E){if(E){return}var C,i;
var G=D._private.rscratch.arrowStartX;var F=D._private.rscratch.arrowStartY;C=G-D.source().position().x;i=F-D.source().position().y;B.fillStyle="rgba("+D._private.style["source-arrow-color"].value[0]+","+D._private.style["source-arrow-color"].value[1]+","+D._private.style["source-arrow-color"].value[2]+","+D._private.style.opacity.value+")";B.lineWidth=D._private.style.width.value;this.drawArrowShape(B,D._private.style["source-arrow-shape"].value,G,F,C,i);var I=D._private.rscratch.arrowEndX;var H=D._private.rscratch.arrowEndY;
C=I-D.target().position().x;i=H-D.target().position().y;B.fillStyle="rgba("+D._private.style["target-arrow-color"].value[0]+","+D._private.style["target-arrow-color"].value[1]+","+D._private.style["target-arrow-color"].value[2]+","+D._private.style.opacity.value+")";B.lineWidth=D._private.style.width.value;this.drawArrowShape(B,D._private.style["target-arrow-shape"].value,I,H,C,i)};u.prototype.drawArrowShape=function(F,B,i,H,E,C){var G=Math.asin(C/(Math.sqrt(E*E+C*C)));if(E<0){G=G+Math.PI/2}else{G=-(Math.PI/2+G)
}F.save();F.translate(i,H);F.moveTo(0,0);F.rotate(-G);var D=this.getArrowWidth(F.lineWidth);F.scale(D,D);F.beginPath();b[B].draw(F);F.closePath();F.fill();F.restore()};var k=function(C,B){var H=1/C*2*Math.PI;var F=C%2==0?Math.PI/2+H/2:Math.PI/2;F+=B;var J=new Array(C*2);var D;for(var E=0;E<C;E++){D=E*H+F;J[2*E]=Math.cos(D);J[2*E+1]=Math.sin(-D)}var L=0;var K=0;for(var E=0;E<J.length/2;E++){if(Math.abs(J[2*E]>L)){L=Math.abs(J[2*E])}if(Math.abs(J[2*E+1]>K)){K=Math.abs(J[2*E+1])}}var G=0.0005;var I=Math.max(L,K);
for(var E=0;E<J.length/2;E++){if(I>G){J[2*E]*=(1/I);J[2*E+1]*=(1/I)}}return J};var w=c;n.ellipse={draw:function(B,E,D,C,i){n.ellipse.drawPath(B,E,D,C,i);B.fill()},drawPath:function(B,E,D,C,i){B.beginPath();B.save();B.translate(E,D);B.scale(C/2,i/2);B.arc(0,0,1,0,Math.PI*2,false);B.closePath();B.restore()},intersectLine:function(F,E,D,C,B,H,G){var i=c.intersectLineEllipse(B,H,F,E,D/2+G,C/2+G);return i},intersectBox:function(C,H,i,F,B,I,E,D,G){return u.prototype.boxIntersectEllipse(C,H,i,F,G,B,I,E,D)
},checkPointRough:function(B,G,F,C,i,E,D){return true},checkPoint:function(B,G,F,C,i,E,D){B-=E;G-=D;B/=(C+F);G/=(i+F);return(Math.pow(B,2)+Math.pow(G,2)<=1)}};n.triangle={points:k(3,0),draw:function(B,E,D,C,i){w.drawPolygon(B,E,D,C,i,n.triangle.points)},drawPath:function(B,E,D,C,i){w.drawPolygonPath(B,E,D,C,i,n.triangle.points)},intersectLine:function(E,D,C,B,i,G,F){return w.polygonIntersectLine(i,G,n.triangle.points,E,D,C/2,B/2,F)},intersectBox:function(C,H,i,F,B,J,E,D,G){var I=n.triangle.points;
return w.boxIntersectPolygon(C,H,i,F,I,B,J,E,D,[0,-1],G)},checkPointRough:function(B,G,F,C,i,E,D){return w.checkInBoundingBox(B,G,n.triangle.points,F,C,i,E,D)},checkPoint:function(B,G,F,C,i,E,D){return w.pointInsidePolygon(B,G,n.triangle.points,E,D,C,i,[0,-1],F)}};n.square={points:k(4,0),draw:function(B,E,D,C,i){w.drawPolygon(B,E,D,C,i,n.square.points)},drawPath:function(B,E,D,C,i){w.drawPolygonPath(B,E,D,C,i,n.square.points)},intersectLine:function(E,D,C,B,i,G,F){return w.polygonIntersectLine(i,G,n.square.points,E,D,C/2,B/2,F)
},intersectBox:function(C,H,i,F,B,J,E,D,G){var I=n.square.points;return w.boxIntersectPolygon(C,H,i,F,I,B,J,E,D,[0,-1],G)},checkPointRough:function(B,G,F,C,i,E,D){return w.checkInBoundingBox(B,G,n.square.points,F,C,i,E,D)},checkPoint:function(B,G,F,C,i,E,D){return w.pointInsidePolygon(B,G,n.square.points,E,D,C,i,[0,-1],F)}};n.rectangle=n.square;n.octogon={};n.roundrectangle=n.square;n.roundrectangle2={roundness:4.99,draw:function(C,B,i){if(B<=roundness*2){return}w.drawPolygon(C._private.position.x,C._private.position.y,B,i,nodeSapes.roundrectangle2.points)
},intersectLine:function(D,C,B,i,E){return w.findPolygonIntersection(D,C,B,i,E,n.square.points)},intersectBox:function(C,H,i,F,B,J,E,D,G){var I=n.square.points}};n.pentagon={points:k(5,0),draw:function(B,E,D,C,i){w.drawPolygon(B,E,D,C,i,n.pentagon.points)},drawPath:function(B,E,D,C,i){w.drawPolygonPath(B,E,D,C,i,n.pentagon.points)},intersectLine:function(E,D,C,B,i,G,F){return w.polygonIntersectLine(i,G,n.pentagon.points,E,D,C/2,B/2,F)},intersectBox:function(C,H,i,F,B,J,E,D,G){var I=n.pentagon.points;
return w.boxIntersectPolygon(C,H,i,F,I,B,J,E,D,[0,-1],G)},checkPointRough:function(B,G,F,C,i,E,D){return w.checkInBoundingBox(B,G,n.pentagon.points,F,C,i,E,D)},checkPoint:function(B,G,F,C,i,E,D){return w.pointInsidePolygon(B,G,n.pentagon.points,E,D,C,i,[0,-1],F)}};n.hexagon={points:k(6,0),draw:function(B,E,D,C,i){w.drawPolygon(B,E,D,C,i,n.hexagon.points)},drawPath:function(B,E,D,C,i){w.drawPolygonPath(B,E,D,C,i,n.hexagon.points)},intersectLine:function(E,D,C,B,i,G,F){return w.polygonIntersectLine(i,G,n.hexagon.points,E,D,C/2,B/2,F)
},intersectBox:function(C,H,i,F,B,J,E,D,G){var I=n.hexagon.points;return w.boxIntersectPolygon(C,H,i,F,I,B,J,E,D,[0,-1],G)},checkPointRough:function(B,G,F,C,i,E,D){return w.checkInBoundingBox(B,G,n.hexagon.points,F,C,i,E,D)},checkPoint:function(B,G,F,C,i,E,D){return w.pointInsidePolygon(B,G,n.hexagon.points,E,D,C,i,[0,-1],F)}};n.heptagon={points:k(7,0),draw:function(B,E,D,C,i){w.drawPolygon(B,E,D,C,i,n.heptagon.points)},drawPath:function(B,E,D,C,i){w.drawPolygonPath(B,E,D,C,i,n.heptagon.points)},intersectLine:function(E,D,C,B,i,G,F){return w.polygonIntersectLine(i,G,n.heptagon.points,E,D,C/2,B/2,F)
},intersectBox:function(C,H,i,F,B,J,E,D,G){var I=n.heptagon.points;return w.boxIntersectPolygon(C,H,i,F,I,B,J,E,D,[0,-1],G)},checkPointRough:function(B,G,F,C,i,E,D){return w.checkInBoundingBox(B,G,n.heptagon.points,F,C,i,E,D)},checkPoint:function(B,G,F,C,i,E,D){return w.pointInsidePolygon(B,G,n.heptagon.points,E,D,C,i,[0,-1],F)}};n.octagon={points:k(8,0),draw:function(B,E,D,C,i){w.drawPolygon(B,E,D,C,i,n.octagon.points)},drawPath:function(B,E,D,C,i){w.drawPolygonPath(B,E,D,C,i,n.octagon.points)},intersectLine:function(E,D,C,B,i,G,F){return w.polygonIntersectLine(i,G,n.octagon.points,E,D,C/2,B/2,F)
},intersectBox:function(C,H,i,F,B,J,E,D,G){var I=n.octagon.points;return w.boxIntersectPolygon(C,H,i,F,I,B,J,E,D,[0,-1],G)},checkPointRough:function(B,G,F,C,i,E,D){return w.checkInBoundingBox(B,G,n.octagon.points,F,C,i,E,D)},checkPoint:function(B,G,F,C,i,E,D){return w.pointInsidePolygon(B,G,n.octagon.points,E,D,C,i,[0,-1],F)}};var h=new Array(20);var f=k(5,0);var z=k(5,Math.PI/5);var m=0.5*(3-Math.sqrt(5));m*=1.57;for(var y=0;y<z.length/2;y++){z[y*2]*=m;z[y*2+1]*=m}for(var y=0;y<20/4;y++){h[y*4]=f[y*2];
h[y*4+1]=f[y*2+1];h[y*4+2]=z[y*2];h[y*4+3]=z[y*2+1]}n.star5={points:h,draw:function(B,E,D,C,i){w.drawPolygon(B,E,D,C,i,n.star5.points)},drawPath:function(B,E,D,C,i){w.drawPolygonPath(B,E,D,C,i,n.star5.points)},intersectLine:function(E,D,C,B,i,G,F){return w.polygonIntersectLine(i,G,n.star5.points,E,D,C/2,B/2,F)},intersectBox:function(C,H,i,F,B,J,E,D,G){var I=n.star5.points;return w.boxIntersectPolygon(C,H,i,F,I,B,J,E,D,[0,-1],G)},checkPointRough:function(B,G,F,C,i,E,D){return w.checkInBoundingBox(B,G,n.star5.points,F,C,i,E,D)
},checkPoint:function(B,G,F,C,i,E,D){return w.pointInsidePolygon(B,G,n.star5.points,E,D,C,i,[0,-1],F)}};u.prototype.expandPolygon=function(N,D){var E=new Array(N.length*2);var M,L,K,J;for(var H=0;H<N.length/2;H++){M=N[H*2];L=N[H*2+1];if(H<N.length/2-1){K=N[(H+1)*2];J=N[(H+1)*2+1]}else{K=N[0];J=N[1]}var I=(J-L);var G=-(K-M);var F=Math.sqrt(I*I+G*G);var C=I/F;var B=G/F;E[H*4]=M+C*D;E[H*4+1]=L+B*D;E[H*4+2]=K+C*D;E[H*4+3]=J+B*D}return E};u.prototype.joinLines=function(K){var J=new Array(K.length/2);var M,L,I,H;
var F,E,D,C;for(var G=0;G<K.length/4;G++){M=K[G*4];L=K[G*4+1];I=K[G*4+2];H=K[G*4+3];if(G<K.length/4-1){F=K[(G+1)*4];E=K[(G+1)*4+1];D=K[(G+1)*4+2];C=K[(G+1)*4+3]}else{F=K[0];E=K[1];D=K[2];C=K[3]}var B=this.finiteLinesIntersect(M,L,I,H,F,E,D,C,true);J[G*2]=B[0];J[G*2+1]=B[1]}return J};u.prototype.pointInsidePolygon=function(M,K,G,J,H,Q,P,W,O){var I=new Array(G.length);var V=Math.asin(W[1]/(Math.sqrt(W[0]*W[0]+W[1]*W[1])));if(W[0]<0){V=V+Math.PI/2}else{V=-V-Math.PI/2}var D=Math.cos(-V);var B=Math.sin(-V);
for(var S=0;S<I.length/2;S++){I[S*2]=Q*(G[S*2]*D-G[S*2+1]*B);I[S*2+1]=P*(G[S*2+1]*D+G[S*2]*B);I[S*2]+=J;I[S*2+1]+=H}var R;if(O>0){var X=w.expandPolygon(I,-O);R=w.joinLines(X)}else{R=I}var U,F,T,E;var C;var L=0;var N=0;for(var S=0;S<R.length/2;S++){U=R[S*2];F=R[S*2+1];if(S+1<R.length/2){T=R[(S+1)*2];E=R[(S+1)*2+1]}else{T=R[(S+1-R.length/2)*2];E=R[(S+1-R.length/2)*2+1]}if(U==M&&T==M){}else{if((U>=M&&M>=T)||(U<=M&&M<=T)){C=(M-U)/(T-U)*(E-F)+F;if(C>K){L++}if(C<K){N++}}else{continue}}}if(L%2==0){return false
}else{return true}};u.prototype.drawPolygonPath=function(E,C,H,G,B,F){E.save();E.translate(C,H);E.beginPath();E.scale(G/2,B/2);E.moveTo(F[0],F[1]);for(var D=1;D<F.length/2;D++){E.lineTo(F[D*2],F[D*2+1])}E.closePath();E.restore()};u.prototype.drawPolygon=function(C,B,F,E,i,D){this.drawPolygonPath(C,B,F,E,i,D);C.fill()};u.prototype.checkInBoundingCircle=function(B,H,C,G,D,i,F,E){B=(B-F)/(D+G);H=(H-E)/(i+G);return(B*B+H*H)<=C};u.prototype.checkInBoundingBox=function(L,J,M,K,D,N,H,G){var F=M[0],E=M[1];
var C=M[0],B=M[1];for(var I=1;I<M.length/2;I++){if(M[I*2]<F){F=M[I*2]}else{if(M[I*2]>C){C=M[I*2]}}if(M[I*2+1]<E){E=M[I*2+1]}else{if(M[I*2+1]>B){B=M[I*2+1]}}}L-=H;J-=G;L/=D;J/=N;if(L<F){return false}else{if(L>C){return false}}if(J<E){return false}else{if(J>B){return false}}return true};u.prototype.boxInBezierVicinity=function(L,H,R,I,N,G,M,F,J,D,K){var S=Math.min(L,R)-K;var P=Math.min(H,I)-K;var Q=Math.max(L,R)+K;var O=Math.max(H,I)+K;if(N>=S&&N<=Q&&G>=P&&G<=O){return 2}else{if(J>=S&&J<=Q&&D>=P&&D<=O){return 2
}else{if(M>=S&&M<=Q&&F>=P&&F<=O){return 1}}}var E=Math.min(N,M,J);var C=Math.min(G,F,D);var B=Math.max(N,M,J);var i=Math.max(G,F,D);if(E>Q||B<S||C>O||i<P){return 0}return 1};u.prototype.checkStraightEdgeCrossesBox=function(O,I,V,L,Q,E,P,B,N){var W=Math.min(O,V)-N;var T=Math.min(I,L)-N;var U=Math.max(O,V)+N;var S=Math.max(I,L)+N;var F=P-Q;var K=Q;var R;var C=B-E;var J=E;var M;if(Math.abs(F)<0.0001){return(Q>=W&&Q<=U&&Math.min(E,B)<=T&&Math.max(E,B)>=S)}var i=(W-K)/F;if(i>0&&i<=1){R=C*i+J;if(R>=T&&R<=S){return true
}}var H=(U-K)/F;if(H>0&&H<=1){R=C*H+J;if(R>=T&&R<=S){return true}}var D=(T-J)/C;if(D>0&&D<=1){M=F*D+K;if(M>=W&&M<=U){return true}}var G=(S-J)/C;if(G>0&&G<=1){M=F*G+K;if(M>=W&&M<=U){return true}}return false};u.prototype.checkBezierCrossesBox=function(T,F,ag,V,N,ap,J,am,H,aj,B){var P=Math.min(T,ag)-B;var M=Math.min(F,V)-B;var ao=Math.max(T,ag)+B;var al=Math.max(F,V)+B;if(N>=P&&N<=ao&&ap>=M&&ap<=al){return true}else{if(H>=P&&H<=ao&&aj>=M&&aj<=al){return true}}var S=N-2*J+H;var E=-2*N+2*J;var ac=N;var W=[];
if(Math.abs(S)<0.0001){var ah=(P-N)/E;var U=(ao-N)/E;W.push(ah,U)}else{var Z=E*E-4*S*(ac-P);var Q,O;if(Z>0){var aa=Math.sqrt(Z);Q=(-E+aa)/(2*S);O=(-E-aa)/(2*S);W.push(Q,O)}var Y=E*E-4*S*(ac-ao);var L,I;if(Y>0){var aa=Math.sqrt(Y);L=(-E+aa)/(2*S);I=(-E-aa)/(2*S);W.push(L,I)}}W.sort(function(ar,aq){return ar-aq});var R=ap-2*am+aj;var C=-2*ap+2*am;var ab=ap;var af=[];if(Math.abs(R)<0.0001){var D=(M-ap)/C;var ad=(al-ap)/C;af.push(D,ad)}else{var K=C*C-4*R*(ab-M);var i,an;if(K>0){var aa=Math.sqrt(K);i=(-C+aa)/(2*R);
an=(-C-aa)/(2*R);af.push(i,an)}var G=C*C-4*R*(ab-al);var ak,ai;if(G>0){var aa=Math.sqrt(G);ak=(-C+aa)/(2*R);ai=(-C-aa)/(2*R);af.push(ak,ai)}}af.sort(function(ar,aq){return ar-aq});for(var X=0;X<W.length;X+=2){for(var ae=1;ae<af.length;ae+=2){if(W[X]<af[ae]&&af[ae]>=0&&W[X]<=1&&W[X+1]>af[ae-1]&&af[ae-1]<=1&&W[X+1]>=0){return true}}}return false};u.prototype.inBezierVicinity=function(G,F,Q,C,P,B,O,i,V){var I=0.25*Q+0.5*P+0.25*O;var H=0.25*C+0.5*B+0.25*i;var L,K,T,R;var E,D,J;var U=function(X,ad,Y,W,ac,ab,Z,aa){E=(ab-W)*(X-Y)+(Y-ac)*(ad-W);
D=E*E;sideSquared=(ab-W)*(ab-W)+(Y-ac)*(Y-ac);if(aa){if(E>0){return false}}else{if(E<0){return false}}return(D/sideSquared>Z)};var N=(I+P)/2;var M=(H+B)/2;var S=true;if(U(N,M,Q,C,P,B,0,S)){S=!S}return(!U(G,F,Q,C,P,B,V,S)&&!U(G,F,P,B,O,i,V,S)&&!U(G,F,O,i,Q,C,V,S))};u.prototype.solveCubic=function(I,H,G,F,M){H/=I;G/=I;F/=I;var K,B,i,D,L,J,C,E;B=(3*G-(H*H))/9;i=-(27*F)+H*(9*G-2*(H*H));i/=54;K=B*B*B+i*i;M[1]=0;C=(H/3);if(K>0){L=i+Math.sqrt(K);L=((L<0)?-Math.pow(-L,(1/3)):Math.pow(L,(1/3)));J=i-Math.sqrt(K);
J=((J<0)?-Math.pow(-J,(1/3)):Math.pow(J,(1/3)));M[0]=-C+L+J;C+=(L+J)/2;M[4]=M[2]=-C;C=Math.sqrt(3)*(-J+L)/2;M[3]=C;M[5]=-C;return}M[5]=M[3]=0;if(K==0){E=((i<0)?-Math.pow(-i,(1/3)):Math.pow(i,(1/3)));M[0]=-C+2*E;M[4]=M[2]=-(E+C);return}B=-B;D=B*B*B;D=Math.acos(i/Math.sqrt(D));E=2*Math.sqrt(B);M[0]=-C+E*Math.cos(D/3);M[2]=-C+E*Math.cos((D+2*Math.PI)/3);M[4]=-C+E*Math.cos((D+4*Math.PI)/3);return};u.prototype.sqDistanceToQuadraticBezier=function(L,K,Q,F,P,E,O,D){var W=1*Q*Q-4*Q*P+2*Q*O+4*P*P-4*P*O+O*O+F*F-4*F*E+2*F*D+4*E*E-4*E*D+D*D;
var V=1*9*Q*P-3*Q*Q-3*Q*O-6*P*P+3*P*O+9*F*E-3*F*F-3*F*D-6*E*E+3*E*D;var T=1*3*Q*Q-6*Q*P+Q*O-Q*L+2*P*P+2*P*L-O*L+3*F*F-6*F*E+F*D-F*K+2*E*E+2*E*K-D*K;var S=1*Q*P-Q*Q+Q*L-P*L+F*E-F*F+F*K-E*K;v("coefficients: "+W/W+", "+V/W+", "+T/W+", "+S/W);var G=[];this.solveCubic(W,V,T,S,G);var B=1e-7;var U=[];for(var H=0;H<6;H+=2){if(Math.abs(G[H+1])<B&&G[H]>=0&&G[H]<=1){U.push(G[H])}}U.push(1);U.push(0);var C=-1;var R;var J,I,M;for(var N=0;N<U.length;N++){J=Math.pow(1-U[N],2)*Q+2*(1-U[N])*U[N]*P+U[N]*U[N]*O;I=Math.pow(1-U[N],2)*F+2*(1-U[N])*U[N]*E+U[N]*U[N]*D;
M=Math.pow(J-L,2)+Math.pow(I-K,2);v("distance for param "+U[N]+": "+Math.sqrt(M));if(C>=0){if(M<C){C=M;R=U[N]}}else{C=M;R=U[N]}}v("given: ( "+L+", "+K+"), ( "+Q+", "+F+"), ( "+P+", "+E+"), ( "+O+", "+D+")");v("roots: "+G);v("params: "+U);v("closest param: "+R);return C};u.prototype.sqDistanceToFiniteLine=function(I,F,B,H,i,G){var C=[I-B,F-H];var L=[i-B,G-H];var D=L[0]*L[0]+L[1]*L[1];var K=C[0]*C[0]+C[1]*C[1];var J=C[0]*L[0]+C[1]*L[1];var E=J*J/D;if(J<0){return K}if(E>D){return(I-i)*(I-i)+(F-G)*(F-G)
}return(K-E)};var v=function(){};t("renderer","canvas",u)})(cytoscape);(function(a){var b={ready:function(){},stop:function(){}};function c(d){this.options=a.util.extend(true,{},b,d)}c.prototype.run=function(){var d=this.options;var e=d.cy;e.nodes().positions(function(){return{x:0,y:0}});e.one("layoutready",d.ready);e.trigger("layoutready");e.one("layoutstop",d.stop);e.trigger("layoutstop")};c.prototype.stop=function(){var d=this.options;cy.one("layoutstop",d.stop);cy.trigger("layoutstop")};a("layout","null",c)
})(cytoscape);(function(a){var c={ready:undefined,stop:undefined,fit:true};function b(d){this.options=a.util.extend(true,{},c,d)}b.prototype.run=function(){var h=this.options;var j=h.cy;var g=j.nodes();var f=j.edges();var e=j.container();var i=e.clientWidth;var d=e.clientHeight;g.positions(function(l,k){if(k.locked()){return false}return{x:Math.round(Math.random()*i),y:Math.round(Math.random()*d)}});j.one("layoutready",h.ready);j.trigger("layoutready");if(h.fit){j.fit()}j.one("layoutstop",h.stop);
j.trigger("layoutstop")};b.prototype.stop=function(){};a("layout","random",b)})(cytoscape);(function(a){var c={fit:true,rows:undefined,columns:undefined,ready:undefined,stop:undefined};function b(d){this.options=a.util.extend({},c,d)}b.prototype.run=function(){var x=options=this.options;var g=x.cy;var u=g.nodes();var f=g.edges();var o=g.container();var t=o.clientWidth;var s=o.clientHeight;if(s==0||t==0){u.positions(function(){return{x:0,y:0}})}else{var h=u.size();var m=Math.sqrt(h*s/t);var l=Math.round(m);
var n=Math.round(t/s*m);function k(z){if(z==undefined){return Math.min(l,n)}else{var y=Math.min(l,n);if(y==l){l=z}else{n=z}}}function d(z){if(z==undefined){return Math.max(l,n)}else{var y=Math.max(l,n);if(y==l){l=z}else{n=z}}}if(options.rows!=null&&options.columns!=null){l=options.rows;n=options.columns}else{if(options.rows!=null&&options.columns==null){l=options.rows;n=Math.ceil(h/l)}else{if(options.rows==null&&options.columns!=null){n=options.columns;l=Math.ceil(h/n)}else{if(n*l>h){var w=k();var p=d();
if((w-1)*p>=h){k(w-1)}else{if((p-1)*w>=h){d(p-1)}}}else{while(n*l<h){var w=k();var p=d();if((p+1)*w>=h){d(p+1)}else{k(w+1)}}}}}}var v=t/n;var e=s/l;var j=0;var i=0;u.positions(function(B,A){if(A.locked()){return false}var z=i*v+v/2;var C=j*e+e/2;i++;if(i>=n){i=0;j++}return{x:z,y:C}})}if(x.fit){g.reset()}g.one("layoutready",x.ready);g.trigger("layoutready");g.one("layoutstop",x.stop);g.trigger("layoutstop")};b.prototype.stop=function(){};a("layout","grid",b)})(cytoscape);(function(a){var c={fit:true,ready:undefined,stop:undefined,positions:undefined,zoom:undefined,pan:undefined};
function b(d){this.options=a.util.extend(true,{},c,d)}b.prototype.run=function(){var g=this.options;var i=g.cy;var f=i.nodes();var e=i.edges();var d=i.container();function h(j){if(g.positions==null){return null}if(g.positions[j._private.data.id]==null){return null}return g.positions[j._private.data.id]}f.positions(function(k,l){var j=h(l);if(l.locked()||j==null){return false}return j});if(g.pan!=null){i.pan(g.pan)}if(g.zoom!=null){i.zoom(g.zoom)}i.one("layoutready",g.ready);i.trigger("layoutready");
if(g.fit){i.fit()}i.one("layoutstop",g.stop);i.trigger("layoutstop")};a("layout","preset",b);a("core","presetLayout",function(){var f=this;var d={};var e={};f.nodes().each(function(g,h){e[h.data("id")]=h.position()});d.positions=e;d.name="preset";d.zoom=f.zoom();d.pan=f.pan();return d})})(cytoscape);(function(a){var b={liveUpdate:true,ready:undefined,stop:undefined,maxSimulationTime:4000,fit:true,padding:[50,50,50,50],ungrabifyWhileSimulating:true,repulsion:undefined,stiffness:undefined,friction:undefined,gravity:true,fps:undefined,precision:undefined,nodeMass:undefined,edgeLength:undefined,stepSize:1,stableEnergy:function(d){var f=d;
return(f.max<=0.5)||(f.mean<=0.3)}};function c(d){this.options=a.util.extend({},b,d)}c.prototype.run=function(){var k=this.options;var j=k.cy;var w=j.nodes();var i=j.edges();var p=j.container();var v=p.clientWidth;var t=p.clientHeight;if(j.nodes().size()<=1){if(k.fit){j.reset()}j.nodes().position({x:Math.round(v/2),y:Math.round(t/2)});j.one("layoutstop",k.stop);j.trigger("layoutstop");j.one("layoutstop",k.stop);j.trigger("layoutstop");return}var m=this.system=arbor.ParticleSystem(k.repulsion,k.stiffness,k.friction,k.gravity,k.fps,k.dt,k.precision);
this.system=m;if(k.liveUpdate&&k.fit){j.reset()}var u=250;var g;var o=false;var f=+new Date;var s={init:function(y){},redraw:function(){var z=m.energy();if(k.stableEnergy!=null&&z!=null&&z.n>0&&k.stableEnergy(z)){m.stop();return}clearTimeout(g);g=setTimeout(x,u);var A=[];m.eachNode(function(G,B){var F=G.name;var D=G.data;var C=D.element;if(C==null){return}var E=C._private.position;if(!C.locked()&&!C.grabbed()){E.x=B.x;E.y=B.y;A.push(C)}});var y=(+new Date-f)>=16;if(k.liveUpdate&&A.length>0&&y){new a.Collection(j,A).rtrigger("position");
f=+new Date}if(!o){o=true;j.one("layoutready",k.ready);j.trigger("layoutready")}}};m.renderer=s;m.screenSize(v,t);m.screenPadding(k.padding[0],k.padding[1],k.padding[2],k.padding[3]);m.screenStep(k.stepSize);function n(y,z){if(z==null){return undefined}else{if(typeof z==typeof function(){}){return z.apply(y,[y._private.data,{nodes:w.length,edges:i.length,element:y}])}else{return z}}}function d(D){var G=D.x;var E=D.y;var H=v;var B=t;var A=-2;var I=2;var F=-2;var z=2;var C=4;return{x:G/H*C+A,y:E/B*C+I}
}var l=function(z){grabbed=this;var A=m.fromScreen(this.position());var y=arbor.Point(A.x,A.y);this.scratch().arbor.p=y;switch(z.type){case"grab":this.scratch().arbor.fixed=true;break;case"dragstop":this.scratch().arbor.fixed=false;this.scratch().arbor.tempMass=1000;break}};w.bind("grab drag dragstop",l);w.each(function(A,B){var D=this._private.data.id;var z=n(this,k.nodeMass);var y=this._private.locked;var C=d({x:B.position().x,y:B.position().y});this.scratch().arbor=m.addNode(D,{element:this,mass:z,fixed:y,x:y?C.x:undefined,y:y?C.y:undefined})
});i.each(function(){var B=this.id();var z=this.source().id();var A=this.target().id();var y=n(this,k.edgeLength);this.scratch().arbor=m.addEdge(z,A,{length:y})});function h(y){if(k.fit){j.fit()}y()}var e=w.filter(":grabbable");if(k.ungrabifyWhileSimulating){e.ungrabify()}var x=function(){if($.browser.msie){h(function(){y()})}else{y()}function y(){if(!k.liveUpdate){if(k.fit){j.reset()}j.nodes().rtrigger("position")}w.unbind("grab drag dragstop",l);if(k.ungrabifyWhileSimulating){e.grabify()}j.one("layoutstop",k.stop);
j.trigger("layoutstop")}};m.start();setTimeout(function(){m.stop()},k.maxSimulationTime)};c.prototype.stop=function(){if(this.system!=null){system.stop()}};a("layout","arbor",c)})(cytoscape);